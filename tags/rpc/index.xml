<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Rpc on firebirdテクテクテクブログ</title><link>https://firebird-techtalktech.com/tags/rpc/</link><description>Recent content in Rpc on firebirdテクテクテクブログ</description><generator>Hugo -- gohugo.io</generator><language>ja</language><copyright>トミー</copyright><lastBuildDate>Sun, 14 Sep 2025 13:20:00 +0900</lastBuildDate><atom:link href="https://firebird-techtalktech.com/tags/rpc/index.xml" rel="self" type="application/rss+xml"/><item><title>Protocol Bufferの真実：バイナリエンコーディングとRPC技術の全貌</title><link>https://firebird-techtalktech.com/post/protocol-buffer%E3%81%AE%E7%9C%9F%E5%AE%9F%E3%83%90%E3%82%A4%E3%83%8A%E3%83%AA%E3%82%A8%E3%83%B3%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E3%81%A8rpc%E6%8A%80%E8%A1%93%E3%81%AE%E5%85%A8%E8%B2%8C/</link><pubDate>Sun, 14 Sep 2025 13:20:00 +0900</pubDate><guid>https://firebird-techtalktech.com/post/protocol-buffer%E3%81%AE%E7%9C%9F%E5%AE%9F%E3%83%90%E3%82%A4%E3%83%8A%E3%83%AA%E3%82%A8%E3%83%B3%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E3%81%A8rpc%E6%8A%80%E8%A1%93%E3%81%AE%E5%85%A8%E8%B2%8C/</guid><description>&lt;h1 id="protocol-bufferの真実バイナリエンコーディングとrpc技術の全貌">Protocol Bufferの真実：バイナリエンコーディングとRPC技術の全貌
&lt;/h1>&lt;h2 id="はじめに">はじめに
&lt;/h2>&lt;p>「Protocol Bufferって何？暗号化？」「gRPCとtRPCって何が違うの？」&lt;/p>
&lt;p>そんな疑問を持ったことはありませんか？この記事では、Protocol Bufferのバイナリエンコーディング原理から、現代のRPC技術比較まで、実例を交えて詳しく解説します。&lt;/p>
&lt;h2 id="-protocol-buffer詳細技術分析">🔧 Protocol Buffer詳細技術分析
&lt;/h2>&lt;h3 id="protocol-bufferとは何か">Protocol Bufferとは何か
&lt;/h3>&lt;p>Protocol Bufferは、Googleが開発した&lt;strong>構造化データの効率的バイナリシリアライゼーション&lt;/strong>技術です。重要なのは「暗号化ではない」ということ。あくまで&lt;strong>効率化・圧縮が目的&lt;/strong>のエンコーディング技術です。&lt;/p>
&lt;h3 id="バイナリエンコーディング原理の核心">バイナリエンコーディング原理の核心
&lt;/h3>&lt;p>Protocol Bufferの最大の特徴は&lt;strong>フィールド番号システム&lt;/strong>です。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-protobuf" data-lang="protobuf">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">message&lt;/span> &lt;span class="nc">User&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span> &lt;span class="kt">int64&lt;/span> &lt;span class="n">id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// フィールド番号1
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// フィールド番号2
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kt">int32&lt;/span> &lt;span class="n">age&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// フィールド番号3
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>この構文の意味は：&lt;/p>
&lt;ul>
&lt;li>&lt;strong>データ型&lt;/strong>: &lt;code>string&lt;/code>&lt;/li>
&lt;li>&lt;strong>フィールド名&lt;/strong>: &lt;code>name&lt;/code>（実際には送信されない！）&lt;/li>
&lt;li>&lt;strong>フィールド番号&lt;/strong>: &lt;code>2&lt;/code>（これが実際に送信される）&lt;/li>
&lt;/ul>
&lt;h3 id="具体的バイナリ解析例">具体的バイナリ解析例
&lt;/h3>&lt;p>実際にどのようにエンコードされるかを見てみましょう。&lt;/p>
&lt;p>&lt;strong>元データ&lt;/strong>:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>&lt;span class="nt">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Alice&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nt">&amp;#34;age&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">26&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>Protocol Bufferバイナリ&lt;/strong>:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">0A 05 41 6C 69 63 65 10 1A
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>詳細解析&lt;/strong>:&lt;/p>
&lt;ul>
&lt;li>&lt;code>0A 05&lt;/code>: フィールド2（name）開始、長さ5バイト&lt;/li>
&lt;li>&lt;code>41 6C 69 63 65&lt;/code>: &amp;ldquo;Alice&amp;quot;の文字列
&lt;ul>
&lt;li>&lt;code>41&lt;/code> = ASCII 65 = &amp;lsquo;A&amp;rsquo;&lt;/li>
&lt;li>&lt;code>6C&lt;/code> = ASCII 108 = &amp;rsquo;l'&lt;/li>
&lt;li>&lt;code>69&lt;/code> = ASCII 105 = &amp;lsquo;i&amp;rsquo;&lt;/li>
&lt;li>&lt;code>63&lt;/code> = ASCII 99 = &amp;lsquo;c&amp;rsquo;&lt;/li>
&lt;li>&lt;code>65&lt;/code> = ASCII 101 = &amp;rsquo;e'&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>10 1A&lt;/code>: フィールド3（age）= 26&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>効率性の証明&lt;/strong>:&lt;/p>
&lt;ul>
&lt;li>JSON: &lt;code>{&amp;quot;name&amp;quot;:&amp;quot;Alice&amp;quot;,&amp;quot;age&amp;quot;:26}&lt;/code> = 26バイト&lt;/li>
&lt;li>Protocol Buffer: &lt;code>0A 05 41 6C 69 63 65 10 1A&lt;/code> = 9バイト&lt;/li>
&lt;li>&lt;strong>約3倍の効率化！&lt;/strong>&lt;/li>
&lt;/ul>
&lt;h3 id="暗号化との明確な区別">暗号化との明確な区別
&lt;/h3>&lt;p>多くの人が誤解しがちなポイントです：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>比較項目&lt;/th>
&lt;th>Protocol Buffer&lt;/th>
&lt;th>暗号化&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;strong>目的&lt;/strong>&lt;/td>
&lt;td>効率化・圧縮&lt;/td>
&lt;td>セキュリティ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>復元&lt;/strong>&lt;/td>
&lt;td>簡単（protoc &amp;ndash;decode）&lt;/td>
&lt;td>秘密鍵必須&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>可読性&lt;/strong>&lt;/td>
&lt;td>バイナリだが構造は明確&lt;/td>
&lt;td>完全に不明&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>用途&lt;/strong>&lt;/td>
&lt;td>通信効率化&lt;/td>
&lt;td>データ保護&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="deprecatedreserved標準フロー">deprecated/reserved標準フロー
&lt;/h3>&lt;p>Protocol Bufferの真価は、段階的な&lt;strong>スキーマ進化&lt;/strong>にあります。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-protobuf" data-lang="protobuf">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">message&lt;/span> &lt;span class="nc">User&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span> &lt;span class="kt">int64&lt;/span> &lt;span class="n">id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span> &lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span> &lt;span class="c1">// 段階1: 廃止警告
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">email&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">3&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">deprecated&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">];&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span> &lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span> &lt;span class="c1">// 段階2: 完全削除・永久欠番
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">reserved&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// フィールド番号永久欠番
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">reserved&lt;/span> &lt;span class="s">&amp;#34;phone&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// フィールド名永久欠番
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>この仕組みにより：&lt;/p>
&lt;ul>
&lt;li>&lt;strong>後方互換性&lt;/strong>: 古いクライアントでも動作&lt;/li>
&lt;li>&lt;strong>前方互換性&lt;/strong>: 新しいフィールドを安全に追加&lt;/li>
&lt;li>&lt;strong>再利用防止&lt;/strong>: reserved設定で同名・同番号の誤用防止&lt;/li>
&lt;/ul>
&lt;h2 id="-rpc技術アーキテクチャ比較分析">🌐 RPC技術アーキテクチャ比較分析
&lt;/h2>&lt;h3 id="rpcの広義定義">RPCの広義定義
&lt;/h3>&lt;p>RPC（Remote Procedure Call）とは「&lt;strong>ネットワーク越しの関数呼び出し全般&lt;/strong>」を指します。&lt;/p>
&lt;p>普段使っているこれらも、実はすべてRPCです：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// これもRPC
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">fetch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;/api/users/123&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// これもRPC
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">const&lt;/span> &lt;span class="nx">user&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kr">await&lt;/span> &lt;span class="nx">trpc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getUser&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">query&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="nx">id&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">123&lt;/span>&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// これもRPC
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">const&lt;/span> &lt;span class="nx">response&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kr">await&lt;/span> &lt;span class="nx">client&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">GetUser&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">request&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="実装手段別比較">実装手段別比較
&lt;/h3>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>RPC実装&lt;/th>
&lt;th>データ形式&lt;/th>
&lt;th>プロトコル&lt;/th>
&lt;th>対象言語&lt;/th>
&lt;th>送信量&lt;/th>
&lt;th>典型的用途&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;strong>gRPC&lt;/strong>&lt;/td>
&lt;td>Protocol Buffer&lt;/td>
&lt;td>HTTP/2&lt;/td>
&lt;td>多言語&lt;/td>
&lt;td>✅最小&lt;/td>
&lt;td>マイクロサービス間&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>tRPC&lt;/strong>&lt;/td>
&lt;td>JSON&lt;/td>
&lt;td>HTTP/1.1&lt;/td>
&lt;td>TypeScript専用&lt;/td>
&lt;td>❌大&lt;/td>
&lt;td>フロント↔バック（TS統一）&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>REST&lt;/strong>&lt;/td>
&lt;td>JSON&lt;/td>
&lt;td>HTTP/1.1&lt;/td>
&lt;td>汎用&lt;/td>
&lt;td>❌大&lt;/td>
&lt;td>一般的なWeb API&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>GraphQL&lt;/strong>&lt;/td>
&lt;td>JSON&lt;/td>
&lt;td>HTTP/1.1&lt;/td>
&lt;td>汎用&lt;/td>
&lt;td>⚠️中&lt;/td>
&lt;td>柔軟なクエリAPI&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="技術選択の4軸判断フレームワーク">技術選択の4軸判断フレームワーク
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>&lt;strong>言語環境&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>単一言語 → tRPC&lt;/li>
&lt;li>多言語混在 → gRPC、REST&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>通信頻度&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>高頻度・大量 → gRPC&lt;/li>
&lt;li>低頻度・小量 → REST&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>データ量&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>大容量 → Protocol Buffer&lt;/li>
&lt;li>小容量 → JSON&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>開発効率&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>型安全性重視 → tRPC、gRPC&lt;/li>
&lt;li>汎用性重視 → REST&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h3 id="実際の使い分け戦略">実際の使い分け戦略
&lt;/h3>&lt;p>実際のプロダクト開発では、以下のような使い分けが効果的です：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">🏢 マイクロサービス間通信
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">→ gRPC（Go, Java, Python等の多言語環境）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">🖥️ フロントエンド通信
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">→ tRPC検討（TypeScript統一環境）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">→ REST（既存システム・汎用性重視）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">🔌 外部API提供
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">→ REST（互換性・理解しやすさ）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">⚙️ 管理画面・内部ツール
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">→ 通常のHTTP API（シンプルさ重視）
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="通信効率の実測比較">通信効率の実測比較
&lt;/h3>&lt;p>同じデータを異なる方式で送信した場合：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>データ形式&lt;/th>
&lt;th>送信量&lt;/th>
&lt;th>パース速度&lt;/th>
&lt;th>型安全性&lt;/th>
&lt;th>人間可読性&lt;/th>
&lt;th>学習コスト&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;strong>JSON&lt;/strong>&lt;/td>
&lt;td>❌大（100%）&lt;/td>
&lt;td>❌遅&lt;/td>
&lt;td>❌弱&lt;/td>
&lt;td>✅高&lt;/td>
&lt;td>✅低&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>MessagePack&lt;/strong>&lt;/td>
&lt;td>⚠️中（60%）&lt;/td>
&lt;td>⚠️中&lt;/td>
&lt;td>❌弱&lt;/td>
&lt;td>❌低&lt;/td>
&lt;td>⚠️中&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Protocol Buffer&lt;/strong>&lt;/td>
&lt;td>✅小（30%）&lt;/td>
&lt;td>✅高速&lt;/td>
&lt;td>✅強&lt;/td>
&lt;td>❌低&lt;/td>
&lt;td>❌高&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="実践的な選択指針">実践的な選択指針
&lt;/h2>&lt;h3 id="grpcを選ぶべき場面">gRPCを選ぶべき場面
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">✅ マイクロサービス間の高頻度通信
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">✅ 多言語環境（Go、Java、Python、C++等）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">✅ パフォーマンス最優先
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">✅ 厳密な型安全性が必要
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="trpcを選ぶべき場面">tRPCを選ぶべき場面
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">✅ フロントエンド・バックエンドともTypeScript
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">✅ 開発効率・開発体験重視
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">✅ チーム全員のTypeScript習熟度が高い
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">✅ 通信量がそれほど多くない
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="restを選ぶべき場面">RESTを選ぶべき場面
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">✅ 外部向けAPI提供
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">✅ チームの学習コスト最小化
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">✅ 既存システムとの互換性重視
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">✅ デバッグ・トラブルシューティング重視
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="まとめ">まとめ
&lt;/h2>&lt;h3 id="protocol-bufferの核心">Protocol Bufferの核心
&lt;/h3>&lt;ul>
&lt;li>&lt;strong>バイナリエンコーディング&lt;/strong>：暗号化ではなく効率化技術&lt;/li>
&lt;li>&lt;strong>フィールド番号システム&lt;/strong>：名前ではなく番号で識別&lt;/li>
&lt;li>&lt;strong>段階的スキーマ進化&lt;/strong>：deprecated→reserved フロー&lt;/li>
&lt;li>&lt;strong>圧倒的な通信効率&lt;/strong>：JSONの約1/3のサイズ&lt;/li>
&lt;/ul>
&lt;h3 id="rpc技術選択の要点">RPC技術選択の要点
&lt;/h3>&lt;ul>
&lt;li>&lt;strong>RPC = 広義概念&lt;/strong>：REST APIもgRPCもすべてRPC&lt;/li>
&lt;li>&lt;strong>実装は多様&lt;/strong>：プロトコル・データ形式・対象言語で差別化&lt;/li>
&lt;li>&lt;strong>選択は4軸判断&lt;/strong>：言語環境・通信頻度・データ量・開発効率&lt;/li>
&lt;li>&lt;strong>適材適所の活用&lt;/strong>：単一技術ではなく使い分けが重要&lt;/li>
&lt;/ul>
&lt;h3 id="技術選択の本質">技術選択の本質
&lt;/h3>&lt;p>重要なのは「&lt;strong>目的に応じた適切な技術選択&lt;/strong>」です。Protocol BufferもgRPCも、決して万能ではありません。プロジェクトの要件・チームの状況・運用の制約を総合的に判断し、最適な組み合わせを選ぶことが成功への鍵です。&lt;/p>
&lt;p>次回は、実際のProtocol Bufferスキーマ設計や、gRPCサービスの実装例について詳しく解説予定です。お楽しみに！&lt;/p>
&lt;hr>
&lt;p>&lt;strong>関連記事&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://firebird-techtalktech.com/" >Protocol Bufferスキーマ設計のベストプラクティス&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://firebird-techtalktech.com/" >gRPCサービス実装の実践的パターン&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://firebird-techtalktech.com/" >マイクロサービス間通信の技術選択フレームワーク&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>執筆日&lt;/strong>: 2025-08-25
&lt;strong>分類&lt;/strong>: 技術記事・アーキテクチャ・Protocol Buffer・RPC・gRPC・tRPC
&lt;strong>対象読者&lt;/strong>: ソフトウェアエンジニア・システムアーキテクト・マイクロサービス開発者&lt;/p></description></item><item><title>The Truth About Protocol Buffers: Complete Guide to Binary Encoding and RPC Technologies</title><link>https://firebird-techtalktech.com/post/the-truth-about-protocol-buffers-complete-guide-to-binary-encoding-and-rpc-technologies/</link><pubDate>Sun, 14 Sep 2025 13:20:00 +0900</pubDate><guid>https://firebird-techtalktech.com/post/the-truth-about-protocol-buffers-complete-guide-to-binary-encoding-and-rpc-technologies/</guid><description>&lt;h1 id="the-truth-about-protocol-buffers-complete-guide-to-binary-encoding-and-rpc-technologies">The Truth About Protocol Buffers: Complete Guide to Binary Encoding and RPC Technologies
&lt;/h1>&lt;h2 id="introduction">Introduction
&lt;/h2>&lt;p>&amp;ldquo;What is Protocol Buffer? Is it encryption?&amp;rdquo; &amp;ldquo;What&amp;rsquo;s the difference between gRPC and tRPC?&amp;rdquo;&lt;/p>
&lt;p>Have you ever had such questions? This article provides a detailed explanation from Protocol Buffer binary encoding principles to modern RPC technology comparison with practical examples.&lt;/p>
&lt;h2 id="-protocol-buffer-detailed-technical-analysis">🔧 Protocol Buffer Detailed Technical Analysis
&lt;/h2>&lt;h3 id="what-is-protocol-buffer">What is Protocol Buffer?
&lt;/h3>&lt;p>Protocol Buffer is an &lt;strong>efficient binary serialization technology for structured data&lt;/strong> developed by Google. The important thing to understand is that &amp;ldquo;it&amp;rsquo;s not encryption.&amp;rdquo; It&amp;rsquo;s an encoding technology aimed at &lt;strong>efficiency and compression&lt;/strong>.&lt;/p>
&lt;h3 id="the-core-of-binary-encoding-principles">The Core of Binary Encoding Principles
&lt;/h3>&lt;p>The biggest feature of Protocol Buffer is the &lt;strong>field number system&lt;/strong>.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-protobuf" data-lang="protobuf">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">message&lt;/span> &lt;span class="nc">User&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span> &lt;span class="kt">int64&lt;/span> &lt;span class="n">id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// Field number 1
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// Field number 2
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kt">int32&lt;/span> &lt;span class="n">age&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// Field number 3
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>The meaning of this syntax:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Data type&lt;/strong>: &lt;code>string&lt;/code>&lt;/li>
&lt;li>&lt;strong>Field name&lt;/strong>: &lt;code>name&lt;/code> (not actually transmitted!)&lt;/li>
&lt;li>&lt;strong>Field number&lt;/strong>: &lt;code>2&lt;/code> (this is what&amp;rsquo;s actually transmitted)&lt;/li>
&lt;/ul>
&lt;h3 id="concrete-binary-analysis-example">Concrete Binary Analysis Example
&lt;/h3>&lt;p>Let&amp;rsquo;s see how it&amp;rsquo;s actually encoded.&lt;/p>
&lt;p>&lt;strong>Original data&lt;/strong>:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>&lt;span class="nt">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Alice&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nt">&amp;#34;age&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">26&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>Protocol Buffer binary&lt;/strong>:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">0A 05 41 6C 69 63 65 10 1A
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>Detailed analysis&lt;/strong>:&lt;/p>
&lt;ul>
&lt;li>&lt;code>0A 05&lt;/code>: Field 2 (name) start, length 5 bytes&lt;/li>
&lt;li>&lt;code>41 6C 69 63 65&lt;/code>: &amp;ldquo;Alice&amp;rdquo; string
&lt;ul>
&lt;li>&lt;code>41&lt;/code> = ASCII 65 = &amp;lsquo;A&amp;rsquo;&lt;/li>
&lt;li>&lt;code>6C&lt;/code> = ASCII 108 = &amp;rsquo;l'&lt;/li>
&lt;li>&lt;code>69&lt;/code> = ASCII 105 = &amp;lsquo;i&amp;rsquo;&lt;/li>
&lt;li>&lt;code>63&lt;/code> = ASCII 99 = &amp;lsquo;c&amp;rsquo;&lt;/li>
&lt;li>&lt;code>65&lt;/code> = ASCII 101 = &amp;rsquo;e'&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>10 1A&lt;/code>: Field 3 (age) = 26&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Efficiency proof&lt;/strong>:&lt;/p>
&lt;ul>
&lt;li>JSON: &lt;code>{&amp;quot;name&amp;quot;:&amp;quot;Alice&amp;quot;,&amp;quot;age&amp;quot;:26}&lt;/code> = 26 bytes&lt;/li>
&lt;li>Protocol Buffer: &lt;code>0A 05 41 6C 69 63 65 10 1A&lt;/code> = 9 bytes&lt;/li>
&lt;li>&lt;strong>About 3x more efficient!&lt;/strong>&lt;/li>
&lt;/ul>
&lt;h3 id="clear-distinction-from-encryption">Clear Distinction from Encryption
&lt;/h3>&lt;p>This is a point where many people are confused:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Comparison&lt;/th>
&lt;th>Protocol Buffer&lt;/th>
&lt;th>Encryption&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;strong>Purpose&lt;/strong>&lt;/td>
&lt;td>Efficiency/Compression&lt;/td>
&lt;td>Security&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Recovery&lt;/strong>&lt;/td>
&lt;td>Easy (protoc &amp;ndash;decode)&lt;/td>
&lt;td>Requires secret key&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Readability&lt;/strong>&lt;/td>
&lt;td>Binary but clear structure&lt;/td>
&lt;td>Completely obscure&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Use case&lt;/strong>&lt;/td>
&lt;td>Communication efficiency&lt;/td>
&lt;td>Data protection&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="deprecatedreserved-standard-flow">deprecated/reserved Standard Flow
&lt;/h3>&lt;p>The true value of Protocol Buffer lies in gradual &lt;strong>schema evolution&lt;/strong>.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-protobuf" data-lang="protobuf">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">message&lt;/span> &lt;span class="nc">User&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span> &lt;span class="kt">int64&lt;/span> &lt;span class="n">id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span> &lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span> &lt;span class="c1">// Stage 1: Deprecation warning
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">email&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">3&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">deprecated&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">];&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span> &lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span> &lt;span class="c1">// Stage 2: Complete deletion, permanent number reservation
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">reserved&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// Field number permanently reserved
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">reserved&lt;/span> &lt;span class="s">&amp;#34;phone&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// Field name permanently reserved
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>This mechanism enables:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Backward compatibility&lt;/strong>: Works with old clients&lt;/li>
&lt;li>&lt;strong>Forward compatibility&lt;/strong>: Safely add new fields&lt;/li>
&lt;li>&lt;strong>Reuse prevention&lt;/strong>: reserved setting prevents misuse of same names/numbers&lt;/li>
&lt;/ul>
&lt;h2 id="-rpc-technology-architecture-comparison-analysis">🌐 RPC Technology Architecture Comparison Analysis
&lt;/h2>&lt;h3 id="broad-definition-of-rpc">Broad Definition of RPC
&lt;/h3>&lt;p>RPC (Remote Procedure Call) refers to &amp;ldquo;&lt;strong>all function calls over the network&lt;/strong>&amp;rdquo;.&lt;/p>
&lt;p>These that we use regularly are actually all RPCs:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// This is also RPC
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">fetch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;/api/users/123&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// This is also RPC
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">const&lt;/span> &lt;span class="nx">user&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kr">await&lt;/span> &lt;span class="nx">trpc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getUser&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">query&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="nx">id&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">123&lt;/span>&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// This is also RPC
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">const&lt;/span> &lt;span class="nx">response&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kr">await&lt;/span> &lt;span class="nx">client&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">GetUser&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">request&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="comparison-by-implementation-method">Comparison by Implementation Method
&lt;/h3>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>RPC Implementation&lt;/th>
&lt;th>Data Format&lt;/th>
&lt;th>Protocol&lt;/th>
&lt;th>Target Languages&lt;/th>
&lt;th>Transfer Size&lt;/th>
&lt;th>Typical Use Case&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;strong>gRPC&lt;/strong>&lt;/td>
&lt;td>Protocol Buffer&lt;/td>
&lt;td>HTTP/2&lt;/td>
&lt;td>Multi-language&lt;/td>
&lt;td>✅Minimal&lt;/td>
&lt;td>Inter-microservice&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>tRPC&lt;/strong>&lt;/td>
&lt;td>JSON&lt;/td>
&lt;td>HTTP/1.1&lt;/td>
&lt;td>TypeScript only&lt;/td>
&lt;td>❌Large&lt;/td>
&lt;td>Frontend↔Backend (TS unified)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>REST&lt;/strong>&lt;/td>
&lt;td>JSON&lt;/td>
&lt;td>HTTP/1.1&lt;/td>
&lt;td>Universal&lt;/td>
&lt;td>❌Large&lt;/td>
&lt;td>General Web API&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>GraphQL&lt;/strong>&lt;/td>
&lt;td>JSON&lt;/td>
&lt;td>HTTP/1.1&lt;/td>
&lt;td>Universal&lt;/td>
&lt;td>⚠️Medium&lt;/td>
&lt;td>Flexible query API&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="4-axis-decision-framework-for-technology-selection">4-Axis Decision Framework for Technology Selection
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>&lt;strong>Language Environment&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Single language → tRPC&lt;/li>
&lt;li>Multi-language mixed → gRPC, REST&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Communication Frequency&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>High frequency, large volume → gRPC&lt;/li>
&lt;li>Low frequency, small volume → REST&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Data Volume&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Large capacity → Protocol Buffer&lt;/li>
&lt;li>Small capacity → JSON&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Development Efficiency&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Type safety emphasis → tRPC, gRPC&lt;/li>
&lt;li>Versatility emphasis → REST&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h3 id="actual-usage-strategy">Actual Usage Strategy
&lt;/h3>&lt;p>In actual product development, the following usage differentiation is effective:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="err">🏢&lt;/span> &lt;span class="n">Inter&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">microservice&lt;/span> &lt;span class="n">communication&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">→&lt;/span> &lt;span class="n">gRPC&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">Multi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">language&lt;/span> &lt;span class="n">environment&lt;/span> &lt;span class="n">like&lt;/span> &lt;span class="n">Go&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Java&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Python&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">🖥️&lt;/span> &lt;span class="n">Frontend&lt;/span> &lt;span class="n">communication&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">→&lt;/span> &lt;span class="n">Consider&lt;/span> &lt;span class="n">tRPC&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">TypeScript&lt;/span> &lt;span class="n">unified&lt;/span> &lt;span class="n">environment&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">→&lt;/span> &lt;span class="n">REST&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">Existing&lt;/span> &lt;span class="n">systems&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">versatility&lt;/span> &lt;span class="n">emphasis&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">🔌&lt;/span> &lt;span class="n">External&lt;/span> &lt;span class="n">API&lt;/span> &lt;span class="n">provision&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">→&lt;/span> &lt;span class="n">REST&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">Compatibility&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nb">ease&lt;/span> &lt;span class="n">of&lt;/span> &lt;span class="n">understanding&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">⚙️&lt;/span> &lt;span class="n">Admin&lt;/span> &lt;span class="n">panels&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">internal&lt;/span> &lt;span class="n">tools&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">→&lt;/span> &lt;span class="n">Regular&lt;/span> &lt;span class="n">HTTP&lt;/span> &lt;span class="n">API&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">Simplicity&lt;/span> &lt;span class="n">emphasis&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="actual-performance-comparison">Actual Performance Comparison
&lt;/h3>&lt;p>When sending the same data using different methods:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Data Format&lt;/th>
&lt;th>Transfer Size&lt;/th>
&lt;th>Parse Speed&lt;/th>
&lt;th>Type Safety&lt;/th>
&lt;th>Human Readability&lt;/th>
&lt;th>Learning Cost&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;strong>JSON&lt;/strong>&lt;/td>
&lt;td>❌Large (100%)&lt;/td>
&lt;td>❌Slow&lt;/td>
&lt;td>❌Weak&lt;/td>
&lt;td>✅High&lt;/td>
&lt;td>✅Low&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>MessagePack&lt;/strong>&lt;/td>
&lt;td>⚠️Medium (60%)&lt;/td>
&lt;td>⚠️Medium&lt;/td>
&lt;td>❌Weak&lt;/td>
&lt;td>❌Low&lt;/td>
&lt;td>⚠️Medium&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Protocol Buffer&lt;/strong>&lt;/td>
&lt;td>✅Small (30%)&lt;/td>
&lt;td>✅Fast&lt;/td>
&lt;td>✅Strong&lt;/td>
&lt;td>❌Low&lt;/td>
&lt;td>❌High&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="practical-selection-guidelines">Practical Selection Guidelines
&lt;/h2>&lt;h3 id="when-to-choose-grpc">When to Choose gRPC
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">✅ High-frequency communication between microservices
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">✅ Multi-language environment (Go, Java, Python, C++, etc.)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">✅ Performance top priority
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">✅ Strict type safety required
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="when-to-choose-trpc">When to Choose tRPC
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">✅ Both frontend and backend use TypeScript
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">✅ Development efficiency and developer experience priority
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">✅ High TypeScript proficiency across the team
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">✅ Communication volume not extremely high
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="when-to-choose-rest">When to Choose REST
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">✅ Providing external APIs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">✅ Minimizing team learning costs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">✅ Compatibility with existing systems priority
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">✅ Debugging and troubleshooting emphasis
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="summary">Summary
&lt;/h2>&lt;h3 id="core-of-protocol-buffer">Core of Protocol Buffer
&lt;/h3>&lt;ul>
&lt;li>&lt;strong>Binary encoding&lt;/strong>: Efficiency technology, not encryption&lt;/li>
&lt;li>&lt;strong>Field number system&lt;/strong>: Identification by numbers, not names&lt;/li>
&lt;li>&lt;strong>Gradual schema evolution&lt;/strong>: deprecated→reserved flow&lt;/li>
&lt;li>&lt;strong>Outstanding communication efficiency&lt;/strong>: About 1/3 the size of JSON&lt;/li>
&lt;/ul>
&lt;h3 id="key-points-of-rpc-technology-selection">Key Points of RPC Technology Selection
&lt;/h3>&lt;ul>
&lt;li>&lt;strong>RPC = Broad concept&lt;/strong>: REST API and gRPC are all RPC&lt;/li>
&lt;li>&lt;strong>Diverse implementations&lt;/strong>: Differentiated by protocol, data format, target languages&lt;/li>
&lt;li>&lt;strong>4-axis decision&lt;/strong>: Language environment, communication frequency, data volume, development efficiency&lt;/li>
&lt;li>&lt;strong>Appropriate use&lt;/strong>: Using different technologies rather than a single solution&lt;/li>
&lt;/ul>
&lt;h3 id="essence-of-technology-selection">Essence of Technology Selection
&lt;/h3>&lt;p>What&amp;rsquo;s important is &amp;ldquo;&lt;strong>appropriate technology selection according to purpose&lt;/strong>&amp;rdquo;. Protocol Buffer and gRPC are not silver bullets. The key to success is comprehensively judging project requirements, team situation, and operational constraints to select the optimal combination.&lt;/p>
&lt;p>Next time, we plan to explain Protocol Buffer schema design and practical gRPC service implementation patterns in detail. Stay tuned!&lt;/p>
&lt;hr>
&lt;p>&lt;strong>Related Articles&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://firebird-techtalktech.com/" >Protocol Buffer Schema Design Best Practices&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://firebird-techtalktech.com/" >Practical gRPC Service Implementation Patterns&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://firebird-techtalktech.com/" >Technology Selection Framework for Inter-Microservice Communication&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Written on&lt;/strong>: 2025-08-25
&lt;strong>Category&lt;/strong>: Technical Articles・Architecture・Protocol Buffer・RPC・gRPC・tRPC
&lt;strong>Target Audience&lt;/strong>: Software Engineers・System Architects・Microservice Developers&lt;/p></description></item><item><title>Escape from Protocol Buffer Hell: My 3-Week Battle Crying 'It's Not Encryption!'</title><link>https://firebird-techtalktech.com/post/escape-from-protocol-buffer-hell-my-3-week-battle-crying-its-not-encryption/</link><pubDate>Sun, 14 Sep 2025 00:00:00 +0000</pubDate><guid>https://firebird-techtalktech.com/post/escape-from-protocol-buffer-hell-my-3-week-battle-crying-its-not-encryption/</guid><description>&lt;h1 id="escape-from-protocol-buffer-hell-my-3-week-battle-crying-its-not-encryption">Escape from Protocol Buffer Hell: My 3-Week Battle Crying &amp;lsquo;It&amp;rsquo;s Not Encryption!&amp;rsquo;
&lt;/h1>&lt;h2 id="wait-isnt-this-encryption---the-initial-misconception">&amp;ldquo;Wait, isn&amp;rsquo;t this encryption?&amp;rdquo; - The Initial Misconception
&lt;/h2>&lt;p>When a new microservices project started and the team leader said &amp;ldquo;Let&amp;rsquo;s use Protocol Buffer with gRPC,&amp;rdquo; I internally panicked thinking &amp;ldquo;Oh no, I don&amp;rsquo;t understand encryption technology&amp;hellip;&amp;rdquo;&lt;/p>
&lt;p>&lt;strong>My first major misconception: &amp;ldquo;Protocol Buffer = Encryption technology&amp;rdquo;&lt;/strong>&lt;/p>
&lt;p>When I actually saw Protocol Buffer binary data:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">0A 05 41 6C 69 63 65 10 1A
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&amp;ldquo;Wow, it&amp;rsquo;s completely encrypted! Can I decode this?&amp;rdquo;&lt;/p>
&lt;p>This is the record of my 3-week investigation, failures, and discoveries.&lt;/p>
&lt;h2 id="week-1-the-why-did-json-become-9-bytes-incident">Week 1: The &amp;ldquo;Why did JSON become 9 bytes!?&amp;rdquo; Incident
&lt;/h2>&lt;h3 id="failure-experience-the-initial-shock">Failure Experience: The Initial Shock
&lt;/h3>&lt;p>Day 2 of the project. A senior said &amp;ldquo;Protocol Buffer is 3 times more efficient than JSON,&amp;rdquo; so I tried it out.&lt;/p>
&lt;p>&lt;strong>Original data (JSON)&lt;/strong>:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>&lt;span class="nt">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Alice&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nt">&amp;#34;age&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">26&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>Size&lt;/strong>: 26 bytes&lt;/p>
&lt;p>&lt;strong>Protocol Buffer binary&lt;/strong>:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">0A 05 41 6C 69 63 65 10 1A
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>Size&lt;/strong>: 9 bytes&lt;/p>
&lt;p>&amp;ldquo;Really? Actually one-third? But what language is this? Alien characters?&amp;rdquo;&lt;/p>
&lt;h3 id="investigation-begins-solving-the-binary-mystery">Investigation Begins: Solving the Binary Mystery
&lt;/h3>&lt;p>I went into complete panic mode and started investigating until late at night.&lt;/p>
&lt;p>&lt;strong>First failure&lt;/strong>: Googled &amp;ldquo;Protocol Buffer encryption&amp;rdquo;
→ Nothing found, because it&amp;rsquo;s not encryption in the first place&lt;/p>
&lt;p>&lt;strong>Next failure&lt;/strong>: Opened with binary editor and stared at it
→ &amp;ldquo;What are 41 6C 69 63 65? ASCII? But what are 0A 05?&amp;rdquo;&lt;/p>
&lt;p>&lt;strong>Finally discovered&lt;/strong>: Looked up ASCII code table&lt;/p>
&lt;ul>
&lt;li>&lt;code>41&lt;/code> = 65 = &amp;lsquo;A&amp;rsquo;&lt;/li>
&lt;li>&lt;code>6C&lt;/code> = 108 = &amp;rsquo;l'&lt;/li>
&lt;li>&lt;code>69&lt;/code> = 105 = &amp;lsquo;i&amp;rsquo;&lt;/li>
&lt;li>&lt;code>63&lt;/code> = 99 = &amp;lsquo;c&amp;rsquo;&lt;/li>
&lt;li>&lt;code>65&lt;/code> = 101 = &amp;rsquo;e'&lt;/li>
&lt;/ul>
&lt;p>&amp;ldquo;Ah! It&amp;rsquo;s &amp;quot;Alice&amp;quot;! It&amp;rsquo;s not encryption, just encoding!&amp;rdquo;&lt;/p>
&lt;h2 id="week-2-the-shocking-discovery-of-the-field-number-system">Week 2: The Shocking Discovery of the &amp;ldquo;Field Number System&amp;rdquo;
&lt;/h2>&lt;h3 id="failure-experience-the-mystery-of-proto-files">Failure Experience: The Mystery of .proto Files
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-protobuf" data-lang="protobuf">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">message&lt;/span> &lt;span class="nc">User&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span> &lt;span class="kt">int64&lt;/span> &lt;span class="n">id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// What&amp;#39;s this &amp;#34;= 1&amp;#34;?
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// &amp;#34;= 2&amp;#34; too? Default value?
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kt">int32&lt;/span> &lt;span class="n">age&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// &amp;#34;= 3&amp;#34; too?
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&amp;ldquo;Huh? Is the default for id 1, and name 2? This makes no sense&amp;hellip;&amp;rdquo;&lt;/p>
&lt;h3 id="discovery-of-truth-shocking-facts">Discovery of Truth: Shocking Facts
&lt;/h3>&lt;p>After 3 days of puzzling, I read the official documentation and was stunned.&lt;/p>
&lt;p>&lt;strong>Shocking facts&lt;/strong>:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Field names are not transmitted!&lt;/strong>&lt;/li>
&lt;li>&lt;strong>Only field numbers are transmitted!&lt;/strong>&lt;/li>
&lt;li>&lt;strong>&lt;code>= 2&lt;/code> is not a default value but an identification number!&lt;/strong>&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">0A 05 41 6C 69 63 65 10 1A
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">↓
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">0A 05: Field 2 (name), length 5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">41 6C 69 63 65: &amp;#34;Alice&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">10 1A: Field 3 (age) = 26
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&amp;ldquo;That&amp;rsquo;s why it&amp;rsquo;s small! It doesn&amp;rsquo;t send field names! Genius!&amp;rdquo;&lt;/p>
&lt;h3 id="verification-experiment-really-3x-more-efficient">Verification Experiment: Really 3x More Efficient?
&lt;/h3>&lt;p>&lt;strong>JSON vs Protocol Buffer Showdown&lt;/strong>&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Data&lt;/th>
&lt;th>JSON&lt;/th>
&lt;th>Protocol Buffer&lt;/th>
&lt;th>Efficiency&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Simple data&lt;/td>
&lt;td>26 bytes&lt;/td>
&lt;td>9 bytes&lt;/td>
&lt;td>2.9x&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>100 user array&lt;/td>
&lt;td>2,600 bytes&lt;/td>
&lt;td>900 bytes&lt;/td>
&lt;td>2.9x&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Complex object&lt;/td>
&lt;td>1,200 bytes&lt;/td>
&lt;td>420 bytes&lt;/td>
&lt;td>2.9x&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&amp;ldquo;It&amp;rsquo;s true&amp;hellip; about 3x more efficient for any data!&amp;rdquo;&lt;/p>
&lt;h2 id="week-3-grpc-vs-trpc-which-one-selection-hell">Week 3: &amp;ldquo;gRPC vs tRPC, which one?&amp;rdquo; Selection Hell
&lt;/h2>&lt;h3 id="failure-experience-lost-in-the-rpc-technology-selection-maze">Failure Experience: Lost in the RPC Technology Selection Maze
&lt;/h3>&lt;p>As the project reached its climax, the &amp;ldquo;So, do we use gRPC or tRPC?&amp;rdquo; problem erupted.&lt;/p>
&lt;p>&lt;strong>Initial shallow understanding&lt;/strong>:&lt;/p>
&lt;ul>
&lt;li>gRPC = Old technology?&lt;/li>
&lt;li>tRPC = New technology so it&amp;rsquo;s good?&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>After trying both&amp;hellip;&lt;/strong>&lt;/p>
&lt;h3 id="grpc-implementation-experience-why-isnt-it-type-safe">gRPC Implementation Experience: &amp;ldquo;Why isn&amp;rsquo;t it type-safe?&amp;rdquo;
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// gRPC client
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">const&lt;/span> &lt;span class="nx">client&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">UserServiceClient&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;localhost:50051&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">request&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">GetUserRequest&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">request&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">setId&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">123&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">client&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getUser&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">request&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">response&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// response.getName() ← This isn&amp;#39;t type-checked!
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&amp;ldquo;Huh? It&amp;rsquo;s TypeScript but not type-safe? What&amp;rsquo;s the point of gRPC?&amp;rdquo;&lt;/p>
&lt;h3 id="trpc-implementation-experience-this-is-too-comfortable">tRPC Implementation Experience: &amp;ldquo;This is too comfortable&amp;hellip;&amp;rdquo;
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-typescript" data-lang="typescript">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// tRPC client
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">const&lt;/span> &lt;span class="nx">user&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">await&lt;/span> &lt;span class="nx">trpc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getUser&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">query&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="nx">id&lt;/span>: &lt;span class="kt">123&lt;/span>&lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// ↑ Completely type-safe! IDE completion works too!
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&amp;ldquo;This is amazing&amp;hellip; the development experience is like night and day!&amp;rdquo;&lt;/p>
&lt;h3 id="reality-check-but-what-about-inter-microservice-communication">Reality Check: &amp;ldquo;But what about inter-microservice communication?&amp;rdquo;
&lt;/h3>&lt;p>I noticed the tRPC trap after implementation.&lt;/p>
&lt;p>&lt;strong>tRPC limitations discovered&lt;/strong>:&lt;/p>
&lt;ul>
&lt;li>TypeScript only (no integration with other languages)&lt;/li>
&lt;li>Server-to-server communication uses JSON = Large data transfer&lt;/li>
&lt;li>Can&amp;rsquo;t benefit from Protocol Buffer advantages&lt;/li>
&lt;/ul>
&lt;p>&amp;ldquo;Ah, we&amp;rsquo;re using Go and Python for microservices too&amp;hellip;&amp;rdquo;&lt;/p>
&lt;h2 id="final-battle-the-truth-of-technology-selection">Final Battle: The Truth of Technology Selection
&lt;/h2>&lt;h3 id="blood-and-sweat-comparison-chart">Blood and Sweat Comparison Chart
&lt;/h3>&lt;p>My blood and sweat crystallized after 3 weeks of investigation:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Technology&lt;/th>
&lt;th>Data Format&lt;/th>
&lt;th>Transfer Efficiency&lt;/th>
&lt;th>Dev Experience&lt;/th>
&lt;th>Multi-language&lt;/th>
&lt;th>Learning Cost&lt;/th>
&lt;th>Use Case&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;strong>gRPC&lt;/strong>&lt;/td>
&lt;td>Protocol Buffer&lt;/td>
&lt;td>⭐⭐⭐⭐⭐&lt;/td>
&lt;td>⭐⭐&lt;/td>
&lt;td>⭐⭐⭐⭐⭐&lt;/td>
&lt;td>⭐⭐&lt;/td>
&lt;td>Inter-microservice&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>tRPC&lt;/strong>&lt;/td>
&lt;td>JSON&lt;/td>
&lt;td>⭐⭐&lt;/td>
&lt;td>⭐⭐⭐⭐⭐&lt;/td>
&lt;td>⭐&lt;/td>
&lt;td>⭐⭐⭐⭐&lt;/td>
&lt;td>Frontend↔Backend (TS unified environment)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>REST&lt;/strong>&lt;/td>
&lt;td>JSON&lt;/td>
&lt;td>⭐⭐&lt;/td>
&lt;td>⭐⭐⭐&lt;/td>
&lt;td>⭐⭐⭐⭐⭐&lt;/td>
&lt;td>⭐⭐⭐⭐⭐&lt;/td>
&lt;td>General Web API&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="final-decision-the-importance-of-right-tool-for-right-job">Final Decision: The Importance of &amp;ldquo;Right Tool for Right Job&amp;rdquo;
&lt;/h3>&lt;p>&lt;strong>Final project selection&lt;/strong>:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Inter-microservice communication&lt;/strong>: gRPC + Protocol Buffer
&lt;ul>
&lt;li>Reason: Prioritized transfer efficiency and performance&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>Frontend↔API&lt;/strong>: tRPC
&lt;ul>
&lt;li>Reason: Prioritized development experience and type safety&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>&amp;ldquo;In the end, there&amp;rsquo;s no silver bullet&amp;hellip;&amp;rdquo;&lt;/p>
&lt;h2 id="what-i-learned-lessons-from-3-weeks-of-struggle">What I Learned: Lessons from 3 Weeks of Struggle
&lt;/h2>&lt;h3 id="lesson-1-encryption-vs-encoding">Lesson 1: &amp;ldquo;Encryption&amp;rdquo; vs &amp;ldquo;Encoding&amp;rdquo;
&lt;/h3>&lt;p>&lt;strong>Biggest misconception&lt;/strong>: I thought Protocol Buffer was encryption technology
&lt;strong>Truth&lt;/strong>: Just efficient binary encoding technology&lt;/p>
&lt;p>&lt;strong>Understanding the difference&lt;/strong>:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Encryption&lt;/strong>: Security purpose, requires decryption key&lt;/li>
&lt;li>&lt;strong>Encoding&lt;/strong>: Efficiency purpose, decodable if you know the rules&lt;/li>
&lt;/ul>
&lt;h3 id="lesson-2-the-trap-of-new--better">Lesson 2: The Trap of &amp;ldquo;New = Better&amp;rdquo;
&lt;/h3>&lt;p>&lt;strong>Initial thinking&lt;/strong>: tRPC is new so it must be better
&lt;strong>Reality&lt;/strong>: Sometimes old gRPC is more suitable depending on use case&lt;/p>
&lt;p>&lt;strong>Truth of technology selection&lt;/strong>:&lt;/p>
&lt;ul>
&lt;li>Clarify requirements&lt;/li>
&lt;li>Understand trade-offs&lt;/li>
&lt;li>Select appropriate tools for specific purposes&lt;/li>
&lt;/ul>
&lt;h3 id="lesson-3-the-power-of-binary-encoding">Lesson 3: The Power of Binary Encoding
&lt;/h3>&lt;p>&lt;strong>True value of Protocol Buffer&lt;/strong>:&lt;/p>
&lt;ul>
&lt;li>Not sending field names = Data size reduction&lt;/li>
&lt;li>Managing type information with schema = Type safety&lt;/li>
&lt;li>Multi-language support = Ecosystem breadth&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Actual measurement data&lt;/strong>:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Regular REST API: 2.6KB per request
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Same data with gRPC: 0.9KB per request
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">For 1 million requests per month:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- REST: 2.6GB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- gRPC: 0.9GB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- Reduction effect: 1.7GB (65% reduction)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="summary-the-obvious-conclusion-that-protocol-buffer-isnt-encryption">Summary: The Obvious Conclusion That &amp;ldquo;Protocol Buffer Isn&amp;rsquo;t Encryption&amp;rdquo;
&lt;/h2>&lt;p>What I learned through 3 weeks of struggle:&lt;/p>
&lt;ol>
&lt;li>&lt;strong>Protocol Buffer is not encryption technology&lt;/strong> (should have been obvious&amp;hellip;)&lt;/li>
&lt;li>&lt;strong>Binary encoding is truly efficient&lt;/strong> (proven by actual measurement)&lt;/li>
&lt;li>&lt;strong>RPC technologies are about right tool for right job&lt;/strong> (no silver bullet)&lt;/li>
&lt;li>&lt;strong>Getting your hands dirty is better than reading technical articles for understanding&lt;/strong>&lt;/li>
&lt;/ol>
&lt;p>Starting from the misconception &amp;ldquo;Protocol Buffer is encryption, right?&amp;rdquo;, the investigation resulted in understanding the full picture of modern RPC technologies.&lt;/p>
&lt;p>&lt;strong>For the next similar technical investigation&lt;/strong>:&lt;/p>
&lt;ul>
&lt;li>Read official documentation first&lt;/li>
&lt;li>Actually write code and try it out&lt;/li>
&lt;li>Question your assumptions&lt;/li>
&lt;li>Compare multiple technologies to understand&lt;/li>
&lt;/ul>
&lt;p>When asked &amp;ldquo;Is Protocol Buffer encryption?&amp;rdquo; I can now confidently answer &amp;ldquo;No! It&amp;rsquo;s efficient binary encoding!&amp;rdquo;&lt;/p>
&lt;p>&lt;strong>Everyone, when you encounter new technologies, don&amp;rsquo;t be afraid to get your hands dirty and investigate. You&amp;rsquo;ll surely discover more than you expect.&lt;/strong>&lt;/p></description></item><item><title>Protocol Buffer地獄からの脱出：「暗号化じゃないよ！」と叫んだ3週間の戦い</title><link>https://firebird-techtalktech.com/post/protocol-buffer%E5%9C%B0%E7%8D%84%E3%81%8B%E3%82%89%E3%81%AE%E8%84%B1%E5%87%BA%E6%9A%97%E5%8F%B7%E5%8C%96%E3%81%98%E3%82%83%E3%81%AA%E3%81%84%E3%82%88%E3%81%A8%E5%8F%AB%E3%82%93%E3%81%A03%E9%80%B1%E9%96%93%E3%81%AE%E6%88%A6%E3%81%84/</link><pubDate>Sun, 14 Sep 2025 00:00:00 +0000</pubDate><guid>https://firebird-techtalktech.com/post/protocol-buffer%E5%9C%B0%E7%8D%84%E3%81%8B%E3%82%89%E3%81%AE%E8%84%B1%E5%87%BA%E6%9A%97%E5%8F%B7%E5%8C%96%E3%81%98%E3%82%83%E3%81%AA%E3%81%84%E3%82%88%E3%81%A8%E5%8F%AB%E3%82%93%E3%81%A03%E9%80%B1%E9%96%93%E3%81%AE%E6%88%A6%E3%81%84/</guid><description>&lt;h1 id="protocol-buffer地獄からの脱出暗号化じゃないよと叫んだ3週間の戦い">Protocol Buffer地獄からの脱出：「暗号化じゃないよ！」と叫んだ3週間の戦い
&lt;/h1>&lt;h2 id="えっこれ暗号化じゃないの--最初の誤解">「えっ、これ暗号化じゃないの？」- 最初の誤解
&lt;/h2>&lt;p>新しいマイクロサービスプロジェクトが始まった時、チームリーダーから「Protocol Buffer使ってgRPCで行こう」と言われて、内心「やばい、暗号化技術なんて分からない&amp;hellip;」と青ざめました。&lt;/p>
&lt;p>&lt;strong>最初の大誤解：「Protocol Buffer = 暗号化技術」&lt;/strong>&lt;/p>
&lt;p>実際にProtocol Bufferのバイナリデータを見たとき：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">0A 05 41 6C 69 63 65 10 1A
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>「うわ、完全に暗号化されてる！これ解読できるの？」&lt;/p>
&lt;p>そんな私の3週間に渡る調査と失敗の記録をお話しします。&lt;/p>
&lt;h2 id="第1週なぜjsonが9バイトになるんだ事件">第1週：「なぜJSONが9バイトになるんだ！？」事件
&lt;/h2>&lt;h3 id="失敗体験最初の衝撃">失敗体験：最初の衝撃
&lt;/h3>&lt;p>プロジェクト開始2日目。先輩が「Protocol BufferってJSONより3倍効率いいよ」と言うので、実際に試してみました。&lt;/p>
&lt;p>&lt;strong>元データ（JSON）&lt;/strong>:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>&lt;span class="nt">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Alice&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nt">&amp;#34;age&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">26&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>サイズ&lt;/strong>: 26バイト&lt;/p>
&lt;p>&lt;strong>Protocol Bufferバイナリ&lt;/strong>:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">0A 05 41 6C 69 63 65 10 1A
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>サイズ&lt;/strong>: 9バイト&lt;/p>
&lt;p>「マジで？本当に3分の1？でも、これ何語？宇宙人の文字？」&lt;/p>
&lt;h3 id="調査開始バイナリの謎を解く">調査開始：バイナリの謎を解く
&lt;/h3>&lt;p>完全にパニックになった私は、深夜まで調査開始。&lt;/p>
&lt;p>&lt;strong>最初の失敗&lt;/strong>：Googleで「Protocol Buffer 暗号化」で検索
→ 見つからない、というかそもそも暗号化じゃない&lt;/p>
&lt;p>&lt;strong>次の失敗&lt;/strong>：バイナリエディタで開いて眺める
→ 「41 6C 69 63 65って何？ASCII？でも0A 05って何？」&lt;/p>
&lt;p>&lt;strong>ついに発見&lt;/strong>：ASCIIコード表を引いてみる&lt;/p>
&lt;ul>
&lt;li>&lt;code>41&lt;/code> = 65 = &amp;lsquo;A&amp;rsquo;&lt;/li>
&lt;li>&lt;code>6C&lt;/code> = 108 = &amp;rsquo;l'&lt;/li>
&lt;li>&lt;code>69&lt;/code> = 105 = &amp;lsquo;i&amp;rsquo;&lt;/li>
&lt;li>&lt;code>63&lt;/code> = 99 = &amp;lsquo;c&amp;rsquo;&lt;/li>
&lt;li>&lt;code>65&lt;/code> = 101 = &amp;rsquo;e'&lt;/li>
&lt;/ul>
&lt;p>「あ！&amp;ldquo;Alice&amp;quot;だ！暗号化じゃなくて、ただのエンコーディングじゃん！」&lt;/p>
&lt;h2 id="第2週フィールド番号システムの衝撃的発見">第2週：「フィールド番号システム」の衝撃的発見
&lt;/h2>&lt;h3 id="失敗体験protoファイルの謎">失敗体験：&lt;code>.proto&lt;/code>ファイルの謎
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-protobuf" data-lang="protobuf">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">message&lt;/span> &lt;span class="nc">User&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span> &lt;span class="kt">int64&lt;/span> &lt;span class="n">id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// この「= 1」って何？
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kt">string&lt;/span> &lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// 「= 2」も？初期値？
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kt">int32&lt;/span> &lt;span class="n">age&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// 「= 3」も？
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>「え？idのデフォルトが1で、nameのデフォルトが2？意味不明&amp;hellip;」&lt;/p>
&lt;h3 id="真実の発見衝撃的な事実">真実の発見：衝撃的な事実
&lt;/h3>&lt;p>3日間悩んだ末、公式ドキュメントを読んで愕然。&lt;/p>
&lt;p>&lt;strong>衝撃の事実&lt;/strong>：&lt;/p>
&lt;ul>
&lt;li>&lt;strong>フィールド名は送信されない！&lt;/strong>&lt;/li>
&lt;li>&lt;strong>フィールド番号だけが送信される！&lt;/strong>&lt;/li>
&lt;li>&lt;strong>&lt;code>= 2&lt;/code>は初期値じゃなくて識別番号！&lt;/strong>&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">0A 05 41 6C 69 63 65 10 1A
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">↓
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">0A 05: フィールド2（name）、長さ5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">41 6C 69 63 65: &amp;#34;Alice&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">10 1A: フィールド3（age）= 26
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>「フィールド名送らないから小さいのか！天才的じゃん！」&lt;/p>
&lt;h3 id="実証実験本当に3倍効率的">実証実験：本当に3倍効率的？
&lt;/h3>&lt;p>&lt;strong>JSON vs Protocol Buffer 対決&lt;/strong>&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>データ&lt;/th>
&lt;th>JSON&lt;/th>
&lt;th>Protocol Buffer&lt;/th>
&lt;th>効率化&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>単純データ&lt;/td>
&lt;td>26バイト&lt;/td>
&lt;td>9バイト&lt;/td>
&lt;td>2.9倍&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ユーザー配列100件&lt;/td>
&lt;td>2,600バイト&lt;/td>
&lt;td>900バイト&lt;/td>
&lt;td>2.9倍&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>複雑なオブジェクト&lt;/td>
&lt;td>1,200バイト&lt;/td>
&lt;td>420バイト&lt;/td>
&lt;td>2.9倍&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>「本当だ&amp;hellip;どのデータでも約3倍効率的！」&lt;/p>
&lt;h2 id="第3週grpcとtrpc結局どっち地獄の選択">第3週：「gRPCとtRPC、結局どっち？」地獄の選択
&lt;/h2>&lt;h3 id="失敗体験rpc技術選択の迷宮">失敗体験：RPC技術選択の迷宮
&lt;/h3>&lt;p>プロジェクトも佳境に入り、「結局、gRPCとtRPCどっち使うの？」問題が勃発。&lt;/p>
&lt;p>&lt;strong>最初の浅い理解&lt;/strong>：&lt;/p>
&lt;ul>
&lt;li>gRPC = 古い技術？&lt;/li>
&lt;li>tRPC = 新しい技術だから良い？&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>実際に両方試してみた結果&lt;/strong>&amp;hellip;&lt;/p>
&lt;h3 id="grpc実装体験なんで型安全じゃないの">gRPC実装体験：「なんで型安全じゃないの？」
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// gRPCクライアント
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">const&lt;/span> &lt;span class="nx">client&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">UserServiceClient&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;localhost:50051&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">request&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">GetUserRequest&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">request&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">setId&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">123&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">client&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getUser&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">request&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">response&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// response.getName() ← これ、型チェックされない！
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>「え？TypeScriptなのに型安全じゃない？何のためのgRPC？」&lt;/p>
&lt;h3 id="trpc実装体験これは快適すぎる">tRPC実装体験：「これは快適すぎる&amp;hellip;」
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-typescript" data-lang="typescript">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// tRPCクライアント
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">const&lt;/span> &lt;span class="nx">user&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">await&lt;/span> &lt;span class="nx">trpc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getUser&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">query&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="nx">id&lt;/span>: &lt;span class="kt">123&lt;/span>&lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// ↑ 完全に型安全！IDEで補完も効く！
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>「これはやばい&amp;hellip;開発体験が天と地の差！」&lt;/p>
&lt;h3 id="現実の壁でもマイクロサービス間通信は">現実の壁：「でも、マイクロサービス間通信は？」
&lt;/h3>&lt;p>tRPCの罠に気づいたのは実装後。&lt;/p>
&lt;p>&lt;strong>tRPCの制限発見&lt;/strong>：&lt;/p>
&lt;ul>
&lt;li>TypeScript専用（他言語との連携不可）&lt;/li>
&lt;li>サーバー間通信でJSONを使う = データ転送量が大きい&lt;/li>
&lt;li>Protocol Bufferの恩恵を受けられない&lt;/li>
&lt;/ul>
&lt;p>「あー、マイクロサービスでGoやPythonも使うのに&amp;hellip;」&lt;/p>
&lt;h2 id="最終決戦技術選択の真実">最終決戦：技術選択の真実
&lt;/h2>&lt;h3 id="血と汗の比較表">血と汗の比較表
&lt;/h3>&lt;p>3週間の調査結果をまとめた、私の血と汗の結晶：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>技術&lt;/th>
&lt;th>データ形式&lt;/th>
&lt;th>転送効率&lt;/th>
&lt;th>開発体験&lt;/th>
&lt;th>多言語対応&lt;/th>
&lt;th>学習コスト&lt;/th>
&lt;th>適用場面&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;strong>gRPC&lt;/strong>&lt;/td>
&lt;td>Protocol Buffer&lt;/td>
&lt;td>⭐⭐⭐⭐⭐&lt;/td>
&lt;td>⭐⭐&lt;/td>
&lt;td>⭐⭐⭐⭐⭐&lt;/td>
&lt;td>⭐⭐&lt;/td>
&lt;td>マイクロサービス間&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>tRPC&lt;/strong>&lt;/td>
&lt;td>JSON&lt;/td>
&lt;td>⭐⭐&lt;/td>
&lt;td>⭐⭐⭐⭐⭐&lt;/td>
&lt;td>⭐&lt;/td>
&lt;td>⭐⭐⭐⭐&lt;/td>
&lt;td>フロント↔バック（TS統一環境）&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>REST&lt;/strong>&lt;/td>
&lt;td>JSON&lt;/td>
&lt;td>⭐⭐&lt;/td>
&lt;td>⭐⭐⭐&lt;/td>
&lt;td>⭐⭐⭐⭐⭐&lt;/td>
&lt;td>⭐⭐⭐⭐⭐&lt;/td>
&lt;td>汎用Web API&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="最終判断適材適所の重要性">最終判断：「適材適所」の重要性
&lt;/h3>&lt;p>&lt;strong>プロジェクトでの最終選択&lt;/strong>：&lt;/p>
&lt;ul>
&lt;li>&lt;strong>マイクロサービス間通信&lt;/strong>: gRPC + Protocol Buffer
&lt;ul>
&lt;li>理由：転送効率とパフォーマンスを最重視&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>フロントエンド↔API&lt;/strong>: tRPC
&lt;ul>
&lt;li>理由：開発体験とタイプセーフティを最重視&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>「結局、銀の弾丸はないんだ&amp;hellip;」&lt;/p>
&lt;h2 id="学んだこと3週間の格闘から得た教訓">学んだこと：3週間の格闘から得た教訓
&lt;/h2>&lt;h3 id="教訓1暗号化vsエンコーディング">教訓1：「暗号化」vs「エンコーディング」
&lt;/h3>&lt;p>&lt;strong>最大の誤解&lt;/strong>：Protocol Bufferを暗号化技術だと思っていた
&lt;strong>真実&lt;/strong>：ただの効率的なバイナリエンコーディング技術&lt;/p>
&lt;p>&lt;strong>違いを理解&lt;/strong>：&lt;/p>
&lt;ul>
&lt;li>&lt;strong>暗号化&lt;/strong>：セキュリティ目的、復号化キーが必要&lt;/li>
&lt;li>&lt;strong>エンコーディング&lt;/strong>：効率化目的、ルールさえ分かれば復号可能&lt;/li>
&lt;/ul>
&lt;h3 id="教訓2新しい--良いの罠">教訓2：「新しい = 良い」の罠
&lt;/h3>&lt;p>&lt;strong>最初の思考&lt;/strong>：tRPCは新しいから良いはず
&lt;strong>現実&lt;/strong>：用途によっては古いgRPCの方が適している&lt;/p>
&lt;p>&lt;strong>技術選択の真理&lt;/strong>：&lt;/p>
&lt;ul>
&lt;li>要件を明確にする&lt;/li>
&lt;li>トレードオフを理解する&lt;/li>
&lt;li>適材適所で選択する&lt;/li>
&lt;/ul>
&lt;h3 id="教訓3バイナリエンコーディングの威力">教訓3：バイナリエンコーディングの威力
&lt;/h3>&lt;p>&lt;strong>Protocol Bufferの真の価値&lt;/strong>：&lt;/p>
&lt;ul>
&lt;li>フィールド名を送らない = データサイズ削減&lt;/li>
&lt;li>型情報をスキーマで管理 = 型安全性&lt;/li>
&lt;li>多言語対応 = エコシステムの広さ&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>実測データ&lt;/strong>：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">通常のREST API：1回あたり2.6KB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gRPCでの同じデータ：1回あたり0.9KB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">月間100万リクエスト時：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- REST: 2.6GB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- gRPC: 0.9GB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 削減効果: 1.7GB（65%削減）
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="まとめprotocol-bufferは暗号化じゃないという当たり前の結論">まとめ：「Protocol Bufferは暗号化じゃない」という当たり前の結論
&lt;/h2>&lt;p>3週間の格闘を通して学んだことは：&lt;/p>
&lt;ol>
&lt;li>&lt;strong>Protocol Bufferは暗号化技術ではない&lt;/strong>（当たり前だった&amp;hellip;）&lt;/li>
&lt;li>&lt;strong>バイナリエンコーディングは本当に効率的&lt;/strong>（実測で証明）&lt;/li>
&lt;li>&lt;strong>RPC技術は適材適所&lt;/strong>（銀の弾丸はない）&lt;/li>
&lt;li>&lt;strong>読める技術記事より、実際に手を動かす方が理解が深まる&lt;/strong>&lt;/li>
&lt;/ol>
&lt;p>最初の「Protocol Bufferって暗号化でしょ？」という誤解から始まった調査でしたが、結果として現代のRPC技術の全貌を理解することができました。&lt;/p>
&lt;p>&lt;strong>次に同じような技術調査をする時は&lt;/strong>：&lt;/p>
&lt;ul>
&lt;li>公式ドキュメントを最初に読む&lt;/li>
&lt;li>実際にコードを書いて試す&lt;/li>
&lt;li>思い込みを疑う&lt;/li>
&lt;li>複数の技術を比較して理解する&lt;/li>
&lt;/ul>
&lt;p>「Protocol Bufferって暗号化？」と聞かれたら、今度は自信を持って「違うよ！効率的なバイナリエンコーディングだよ！」と答えられます。&lt;/p>
&lt;p>&lt;strong>皆さんも新しい技術に出会ったら、恐れずに手を動かして調査してみてください。きっと予想以上の発見があるはずです。&lt;/strong>&lt;/p></description></item></channel></rss>