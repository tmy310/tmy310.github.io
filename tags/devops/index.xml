<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>DevOps on firebirdãƒ†ã‚¯ãƒ†ã‚¯ãƒ†ã‚¯ãƒ–ãƒ­ã‚°</title><link>https://firebird-techtalktech.com/tags/devops/</link><description>Recent content in DevOps on firebirdãƒ†ã‚¯ãƒ†ã‚¯ãƒ†ã‚¯ãƒ–ãƒ­ã‚°</description><generator>Hugo -- gohugo.io</generator><language>ja</language><copyright>ãƒˆãƒŸãƒ¼</copyright><lastBuildDate>Thu, 18 Sep 2025 12:00:00 +0900</lastBuildDate><atom:link href="https://firebird-techtalktech.com/tags/devops/index.xml" rel="self" type="application/rss+xml"/><item><title>GCPä¸Šã§PackerÃ—Terraformã‚’ä½¿ã£ã¦Windows Serverã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½œæˆãƒ»å±•é–‹ã™ã‚‹æ–¹æ³•</title><link>https://firebird-techtalktech.com/post/gcp%E4%B8%8A%E3%81%A7packerterraform%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6windows-server%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8%E3%82%92%E4%BD%9C%E6%88%90%E5%B1%95%E9%96%8B%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95/</link><pubDate>Thu, 18 Sep 2025 12:00:00 +0900</pubDate><guid>https://firebird-techtalktech.com/post/gcp%E4%B8%8A%E3%81%A7packerterraform%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6windows-server%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8%E3%82%92%E4%BD%9C%E6%88%90%E5%B1%95%E9%96%8B%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95/</guid><description>&lt;h2 id="ã¯ã˜ã‚ã«">ã¯ã˜ã‚ã«
&lt;/h2>&lt;p>ã‚¯ãƒ©ã‚¦ãƒ‰ç’°å¢ƒã§Windows Serverã‚’é‹ç”¨ã™ã‚‹éš›ã€æ¯å›æ‰‹å‹•ã§ç’°å¢ƒã‚’æ§‹ç¯‰ã—ã¦ã„ã¦ã¯æ™‚é–“ãŒã‹ã‹ã‚Šã€å†ç¾æ€§ã‚‚ä½ããªã£ã¦ã—ã¾ã„ã¾ã™ã€‚ç‰¹ã«GCPï¼ˆGoogle Cloud Platformï¼‰ä¸Šã§ä¼æ¥­ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒªã‚·ãƒ¼ã«æº–æ‹ ã—ãŸWindows Serverç’°å¢ƒã‚’æ§‹ç¯‰ã™ã‚‹å ´åˆã€ä»¥ä¸‹ã®ã‚ˆã†ãªèª²é¡Œã«ç›´é¢ã™ã‚‹ã“ã¨ãŒå¤šã„ã§ã™ï¼š&lt;/p>
&lt;ul>
&lt;li>æ¯å›GUIã§ç’°å¢ƒã‚’ä½œã‚‹ã¨è¨­å®šãƒŸã‚¹ãŒç™ºç”Ÿã—ã‚„ã™ã„&lt;/li>
&lt;li>æ¨™æº–ã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã¯å¿…è¦ãªãƒ„ãƒ¼ãƒ«ã‚„ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®šãŒä¸è¶³ã—ã¦ã„ã‚‹&lt;/li>
&lt;li>è¤‡æ•°ç’°å¢ƒï¼ˆé–‹ç™ºã€æ¤œè¨¼ã€æœ¬ç•ªï¼‰ã§ä¸€è²«æ€§ã‚’ä¿ã¤ã®ãŒå›°é›£&lt;/li>
&lt;li>ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ‘ãƒƒãƒã‚„ä¼æ¥­ãƒãƒªã‚·ãƒ¼ã®é©ç”¨ãŒç…©é›‘&lt;/li>
&lt;/ul>
&lt;p>æœ¬è¨˜äº‹ã§ã¯ã€&lt;strong>Packer&lt;/strong>ã¨&lt;strong>Terraform&lt;/strong>ã‚’çµ„ã¿åˆã‚ã›ã¦ã€ã“ã‚Œã‚‰ã®èª²é¡Œã‚’è§£æ±ºã™ã‚‹è‡ªå‹•åŒ–ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è©³ç´°ã«è§£èª¬ã—ã¾ã™ã€‚&lt;/p>
&lt;h2 id="ç’°å¢ƒæ§‹æˆã¨ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£">ç’°å¢ƒæ§‹æˆã¨ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
&lt;/h2>&lt;h3 id="å…¨ä½“æ§‹æˆå›³">å…¨ä½“æ§‹æˆå›³
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚ Developer â”‚ â”‚ CI/CD â”‚ â”‚ GCP Project â”‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚ Local â”‚ â”‚ Pipeline â”‚ â”‚ â”‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚ â€¢ Packer HCL â”‚â”€â”€â”€â–¶â”‚ â€¢ GitHub Actionsâ”‚â”€â”€â”€â–¶â”‚ â€¢ Custom Images â”‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚ â€¢ Terraform â”‚ â”‚ â€¢ Cloud Build â”‚ â”‚ â€¢ VM Instances â”‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚ â€¢ gcloud CLI â”‚ â”‚ â€¢ Auto Deploy â”‚ â”‚ â€¢ IAM/Network â”‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯">æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯
&lt;/h3>&lt;ul>
&lt;li>&lt;strong>Packer 1.9+&lt;/strong>: Windows Serverã®ã‚«ã‚¹ã‚¿ãƒ ã‚¤ãƒ¡ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰&lt;/li>
&lt;li>&lt;strong>Terraform 1.5+&lt;/strong>: ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ã®ã‚³ãƒ¼ãƒ‰ç®¡ç†&lt;/li>
&lt;li>&lt;strong>GCP Compute Engine&lt;/strong>: å®Ÿè¡ŒåŸºç›¤&lt;/li>
&lt;li>&lt;strong>PowerShell/cmd&lt;/strong>: Windowsç’°å¢ƒã®ãƒ—ãƒ­ãƒ“ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°&lt;/li>
&lt;li>&lt;strong>WinRM&lt;/strong>: Packerã¨ã®é€šä¿¡ãƒ—ãƒ­ãƒˆã‚³ãƒ«&lt;/li>
&lt;/ul>
&lt;h2 id="äº‹å‰æº–å‚™">äº‹å‰æº–å‚™
&lt;/h2>&lt;h3 id="1-gcpãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è¨­å®š">1. GCPãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è¨­å®š
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">PROJECT_ID&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;your-project-id&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gcloud config &lt;span class="nb">set&lt;/span> project &lt;span class="nv">$PROJECT_ID&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># å¿…è¦ãªAPIã®æœ‰åŠ¹åŒ–&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gcloud services &lt;span class="nb">enable&lt;/span> compute.googleapis.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gcloud services &lt;span class="nb">enable&lt;/span> cloudresourcemanager.googleapis.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gcloud services &lt;span class="nb">enable&lt;/span> iam.googleapis.com
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="2-ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ä½œæˆ">2. ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ä½œæˆ
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Packerç”¨ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gcloud iam service-accounts create packer-builder &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --description&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;Packer image builder&amp;#34;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --display-name&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;Packer Builder&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># å¿…è¦ãªæ¨©é™ã®ä»˜ä¸&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gcloud projects add-iam-policy-binding &lt;span class="nv">$PROJECT_ID&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --member&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;serviceAccount:packer-builder@&lt;/span>&lt;span class="nv">$PROJECT_ID&lt;/span>&lt;span class="s2">.iam.gserviceaccount.com&amp;#34;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --role&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;roles/compute.instanceAdmin.v1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="packerã®è©³ç´°è¨­å®š">Packerã®è©³ç´°è¨­å®š
&lt;/h2>&lt;h3 id="ãƒ¡ã‚¤ãƒ³ã®packerè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«">ãƒ¡ã‚¤ãƒ³ã®Packerè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-hcl" data-lang="hcl">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># windows-2022.pkr.hcl
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">packer&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">required_plugins&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> googlecompute&lt;/span> &lt;span class="o">=&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> version&lt;/span> &lt;span class="o">=&lt;/span>&lt;span class="n"> &amp;#34;&amp;gt;&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="err">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> source&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;github.com/hashicorp/googlecompute&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">variable&lt;/span> &lt;span class="s2">&amp;#34;project_id&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;GCP Project ID&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">variable&lt;/span> &lt;span class="s2">&amp;#34;zone&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> default&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;asia-northeast1-b&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;GCP Zone for building&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">source&lt;/span> &lt;span class="s2">&amp;#34;googlecompute&amp;#34; &amp;#34;windows-2022&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> project_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">project_id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> source_image_family&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;windows-2022&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> zone&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">zone&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> machine_type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;e2-standard-4&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> disk_size&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">50&lt;/span>&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"> # Windowså›ºæœ‰ã®è¨­å®š
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="n"> communicator&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;winrm&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> winrm_username&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;packer_user&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> winrm_password&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;SecurePassword123!&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> winrm_timeout&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;30m&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> winrm_use_ssl&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kt">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> winrm_insecure&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kt">true&lt;/span>&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"> # ã‚¤ãƒ¡ãƒ¼ã‚¸è¨­å®š
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="n"> image_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;custom-windows-2022-{{timestamp}}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> image_description&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;Custom Windows Server 2022 with security baseline&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> image_family&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;custom-windows-2022&amp;#34;&lt;/span>&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"> # ã‚¿ã‚°ã¨ãƒ©ãƒ™ãƒ«
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="n"> tags&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;packer&amp;#34;, &amp;#34;windows&amp;#34;, &amp;#34;base-image&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">build&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;windows-2022-custom&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> sources&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;source.googlecompute.windows-2022&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"> # Windows Updateã®å®Ÿè¡Œ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">provisioner&lt;/span> &lt;span class="s2">&amp;#34;powershell&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> script&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;scripts/windows-update.ps1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"> # å¿…è¦ãªãƒ„ãƒ¼ãƒ«ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">provisioner&lt;/span> &lt;span class="s2">&amp;#34;powershell&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> script&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;scripts/install-tools.ps1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"> # ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ã®é©ç”¨
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">provisioner&lt;/span> &lt;span class="s2">&amp;#34;powershell&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> script&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;scripts/security-baseline.ps1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"> # ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">provisioner&lt;/span> &lt;span class="s2">&amp;#34;powershell&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> script&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;scripts/cleanup.ps1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="terraformã«ã‚ˆã‚‹è‡ªå‹•å±•é–‹">Terraformã«ã‚ˆã‚‹è‡ªå‹•å±•é–‹
&lt;/h2>&lt;h3 id="ãƒ¡ã‚¤ãƒ³ã®terraformè¨­å®š">ãƒ¡ã‚¤ãƒ³ã®Terraformè¨­å®š
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-hcl" data-lang="hcl">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># main.tf
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">terraform&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> required_version&lt;/span> &lt;span class="o">=&lt;/span>&lt;span class="n"> &amp;#34;&amp;gt;&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="m">5&lt;/span>&lt;span class="err">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">required_providers&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> google&lt;/span> &lt;span class="o">=&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> source&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;hashicorp/google&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> version&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;~&amp;gt; 4.84&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">provider&lt;/span> &lt;span class="s2">&amp;#34;google&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> project&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">project_id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> region&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">region&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> zone&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">zone&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹: æœ€æ–°ã®ã‚«ã‚¹ã‚¿ãƒ ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’å–å¾—
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">data&lt;/span> &lt;span class="s2">&amp;#34;google_compute_image&amp;#34; &amp;#34;windows_image&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> family&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;custom-windows-2022&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> project&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">project_id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Windows VM ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">resource&lt;/span> &lt;span class="s2">&amp;#34;google_compute_instance&amp;#34; &amp;#34;windows_vm&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">instance_name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> machine_type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">machine_type&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> zone&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">zone&lt;/span>&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"> # ãƒ–ãƒ¼ãƒˆãƒ‡ã‚£ã‚¹ã‚¯
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">boot_disk&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">initialize_params&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> image&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">data&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">google_compute_image&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">windows_image&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">self_link&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> size&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">disk_size&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;pd-standard&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"> # ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯è¨­å®š
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">network_interface&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> network&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">network&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> subnetwork&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">subnetwork&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">access_config&lt;/span> {}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"> # ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆç­‰ï¼‰
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="n"> metadata&lt;/span> &lt;span class="o">=&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> windows-startup-script-ps1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">templatefile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;${path.module}/scripts/startup.ps1&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> admin_username&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">admin_username&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> admin_password&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">var&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="k">admin_password&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"> # ã‚¿ã‚°
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="n"> tags&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;windows-server&amp;#34;, &amp;#34;rdp-server&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="å®Ÿè¡Œæ‰‹é †">å®Ÿè¡Œæ‰‹é †
&lt;/h2>&lt;h3 id="1-packerã§ã‚¤ãƒ¡ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰">1. Packerã§ã‚¤ãƒ¡ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># å¤‰æ•°ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cat &amp;gt; variables.pkrvars.hcl &lt;span class="s">&amp;lt;&amp;lt; EOF
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">project_id = &amp;#34;your-project-id&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">EOF&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ã‚¤ãƒ¡ãƒ¼ã‚¸ã®ãƒ“ãƒ«ãƒ‰å®Ÿè¡Œ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">packer build -var-file&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;variables.pkrvars.hcl&amp;#34;&lt;/span> windows-2022.pkr.hcl
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="2-terraformã§å±•é–‹">2. Terraformã§å±•é–‹
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ä½œæ¥­ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®åˆæœŸåŒ–&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> terraform
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">terraform init
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># å®Ÿè¡Œãƒ—ãƒ©ãƒ³ã®ç¢ºèª&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">terraform plan -var-file&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;terraform.tfvars&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ãƒªã‚½ãƒ¼ã‚¹ã®ä½œæˆ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">terraform apply -var-file&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;terraform.tfvars&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°">ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
&lt;/h2>&lt;h3 id="ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºæ–¹æ³•">ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºæ–¹æ³•
&lt;/h3>&lt;h4 id="1-winrmæ¥ç¶šã‚¨ãƒ©ãƒ¼">1. WinRMæ¥ç¶šã‚¨ãƒ©ãƒ¼
&lt;/h4>&lt;p>&lt;strong>å•é¡Œ&lt;/strong>: Packerãƒ“ãƒ«ãƒ‰ä¸­ã«WinRMã§ã®æ¥ç¶šãŒå¤±æ•—ã™ã‚‹&lt;/p>
&lt;p>&lt;strong>è§£æ±ºæ–¹æ³•&lt;/strong>:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-powershell" data-lang="powershell">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã§WinRMã‚’ç¢ºå®Ÿã«æœ‰åŠ¹åŒ–&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">winrm&lt;/span> &lt;span class="n">quickconfig&lt;/span> &lt;span class="n">-quiet&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">winrm&lt;/span> &lt;span class="nb">set &lt;/span>&lt;span class="n">winrm&lt;/span>&lt;span class="p">/&lt;/span>&lt;span class="n">config&lt;/span>&lt;span class="p">/&lt;/span>&lt;span class="n">service&lt;/span> &lt;span class="vm">@&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">AllowUnencrypted&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="s2">&amp;#34;true&amp;#34;&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">winrm&lt;/span> &lt;span class="nb">set &lt;/span>&lt;span class="n">winrm&lt;/span>&lt;span class="p">/&lt;/span>&lt;span class="n">config&lt;/span>&lt;span class="p">/&lt;/span>&lt;span class="n">service&lt;/span>&lt;span class="p">/&lt;/span>&lt;span class="n">auth&lt;/span> &lt;span class="vm">@&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">Basic&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="s2">&amp;#34;true&amp;#34;&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="2-ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«ãƒ–ãƒ­ãƒƒã‚¯">2. ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«ãƒ–ãƒ­ãƒƒã‚¯
&lt;/h4>&lt;p>&lt;strong>å•é¡Œ&lt;/strong>: RDPã‚„WinRMãƒãƒ¼ãƒˆãŒãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã‚‹&lt;/p>
&lt;p>&lt;strong>è§£æ±ºæ–¹æ³•&lt;/strong>:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># GCPãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«ãƒ«ãƒ¼ãƒ«ã®ç¢ºèª&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gcloud compute firewall-rules list --filter&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;name~allow-rdp&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># å¿…è¦ã«å¿œã˜ã¦ãƒ«ãƒ¼ãƒ«ã‚’ä½œæˆ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gcloud compute firewall-rules create allow-rdp-custom &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --allow tcp:3389 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --source-ranges 0.0.0.0/0 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --target-tags rdp-server
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è€ƒæ…®äº‹é …">ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è€ƒæ…®äº‹é …
&lt;/h2>&lt;h3 id="èªè¨¼æƒ…å ±ã®ç®¡ç†">èªè¨¼æƒ…å ±ã®ç®¡ç†
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Secret Manager ã«ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ä¿å­˜&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gcloud secrets create windows-admin-password --data-file&lt;span class="o">=&lt;/span>-
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Terraform ã§ Secret Manager ã‹ã‚‰å–å¾—&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">data &lt;span class="s2">&amp;#34;google_secret_manager_secret_version&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;admin_password&amp;#34;&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">secret&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;windows-admin-password&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="ã¾ã¨ã‚">ã¾ã¨ã‚
&lt;/h2>&lt;p>æœ¬è¨˜äº‹ã§ã¯ã€GCPä¸Šã§Packerã¨Terraformã‚’çµ„ã¿åˆã‚ã›ã¦Windows Serverã®è‡ªå‹•åŒ–ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ§‹ç¯‰ã™ã‚‹æ–¹æ³•ã‚’è©³ç´°ã«è§£èª¬ã—ã¾ã—ãŸã€‚&lt;/p>
&lt;h3 id="ä¸»ãªåˆ©ç‚¹">ä¸»ãªåˆ©ç‚¹
&lt;/h3>&lt;ol>
&lt;li>&lt;strong>å†ç¾æ€§&lt;/strong>: æ¯å›åŒä¸€ã®ç’°å¢ƒã‚’æ§‹ç¯‰å¯èƒ½&lt;/li>
&lt;li>&lt;strong>åŠ¹ç‡æ€§&lt;/strong>: æ‰‹å‹•ä½œæ¥­ã‚’å¤§å¹…ã«å‰Šæ¸›&lt;/li>
&lt;li>&lt;strong>ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£&lt;/strong>: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ã‚’è‡ªå‹•é©ç”¨&lt;/li>
&lt;li>&lt;strong>ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£&lt;/strong>: è¤‡æ•°ç’°å¢ƒã¸ã®æ¨ªå±•é–‹ãŒå®¹æ˜“&lt;/li>
&lt;li>&lt;strong>ç›£æŸ»æ€§&lt;/strong>: ã‚¤ãƒ³ãƒ•ãƒ©ã®å¤‰æ›´å±¥æ­´ã‚’ã‚³ãƒ¼ãƒ‰ã§ç®¡ç†&lt;/li>
&lt;/ol>
&lt;p>ã“ã®è‡ªå‹•åŒ–åŸºç›¤ã«ã‚ˆã‚Šã€Windows Serverç’°å¢ƒã®æ§‹ç¯‰ãƒ»é‹ç”¨ãŒåŠ‡çš„ã«åŠ¹ç‡åŒ–ã•ã‚Œã‚‹ã“ã¨ã‚’å®Ÿæ„Ÿã—ã¦ã„ãŸã ã‘ã‚‹ã§ã—ã‚‡ã†ã€‚&lt;/p>
&lt;p>æ¬¡å›ã¯ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³é©ç”¨æ™‚ã®æ³¨æ„ç‚¹ã«ã¤ã„ã¦è©³ã—ãè§£èª¬ã—ã¾ã™ã€‚&lt;/p></description></item><item><title>ğŸ—ï¸ TerraformæŠ€è¡“è¨˜äº‹ã¾ã¨ã‚ - 2025å¹´å³é¸ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³</title><link>https://firebird-techtalktech.com/post/%EF%B8%8F-terraform%E6%8A%80%E8%A1%93%E8%A8%98%E4%BA%8B%E3%81%BE%E3%81%A8%E3%82%81-2025%E5%B9%B4%E5%8E%B3%E9%81%B8%E3%82%B3%E3%83%AC%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3/</link><pubDate>Wed, 17 Sep 2025 00:45:00 +0900</pubDate><guid>https://firebird-techtalktech.com/post/%EF%B8%8F-terraform%E6%8A%80%E8%A1%93%E8%A8%98%E4%BA%8B%E3%81%BE%E3%81%A8%E3%82%81-2025%E5%B9%B4%E5%8E%B3%E9%81%B8%E3%82%B3%E3%83%AC%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3/</guid><description>&lt;h2 id="-terraformæŠ€è¡“è¨˜äº‹ã‚­ãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³">ğŸ“‹ TerraformæŠ€è¡“è¨˜äº‹ã‚­ãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
&lt;/h2>&lt;p>Terraformã«é–¢ã™ã‚‹å®Ÿç”¨çš„ãªæŠ€è¡“è¨˜äº‹ã‚’å³é¸ã—ã€èª­ã¿ã‚„ã™ã„å½¢ã§ã¾ã¨ã‚ã¾ã—ãŸã€‚&lt;/p>
&lt;hr>
&lt;h2 id="-å…¥é–€åŸºç¤ç·¨">ğŸ”° &lt;strong>å…¥é–€ãƒ»åŸºç¤ç·¨&lt;/strong>
&lt;/h2>&lt;h3 id="-iacè¶…å…¥é–€30æ—¥ã§aws-cloudformationã¨terraformã‚’ãƒã‚¹ã‚¿ãƒ¼ã™ã‚‹ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—">ğŸ“š &lt;strong>IaCè¶…å…¥é–€ï¼š30æ—¥ã§AWS CloudFormationã¨Terraformã‚’ãƒã‚¹ã‚¿ãƒ¼ã™ã‚‹ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—&lt;/strong>
&lt;/h3>&lt;p>&lt;strong>å‡ºå…¸&lt;/strong>: &lt;a class="link" href="https://qiita.com/555hamano/items/e5ee753d1406cc76493b" target="_blank" rel="noopener"
>Qiita&lt;/a> | &lt;strong>è‘—è€…&lt;/strong>: 555hamano&lt;br>
&lt;strong>è¦ç´„&lt;/strong>: CloudFormationã¨Terraformã‚’çµ„ã¿åˆã‚ã›ã‚‹ã‚±ãƒ¼ã‚¹ã‚¹ã‚¿ãƒ‡ã‚£ã€‚30æ—¥é–“ã§ã®ä½“ç³»çš„å­¦ç¿’ãƒ—ãƒ©ãƒ³ã‚’æä¾›&lt;br>
&lt;strong>æ¨å¥¨å¯¾è±¡&lt;/strong>: Terraformåˆå¿ƒè€…ã€IaCåˆå­¦è€…&lt;/p>
&lt;hr>
&lt;h2 id="-å®Ÿè·µé‹ç”¨ç·¨">âš¡ &lt;strong>å®Ÿè·µãƒ»é‹ç”¨ç·¨&lt;/strong>
&lt;/h2>&lt;h3 id="-terraformå®Ÿé‹ç”¨ã‹ã‚‰å¾—ãŸtipsé›†">ğŸ’¡ &lt;strong>Terraformå®Ÿé‹ç”¨ã‹ã‚‰å¾—ãŸTipsé›†&lt;/strong>
&lt;/h3>&lt;p>&lt;strong>å‡ºå…¸&lt;/strong>: &lt;a class="link" href="https://qiita.com/sh0re/items/a06a0fcf6c83dd6cbf44" target="_blank" rel="noopener"
>Qiita&lt;/a> | &lt;strong>è‘—è€…&lt;/strong>: sh0re&lt;br>
&lt;strong>è¦ç´„&lt;/strong>: æ¥­å‹™ã§Terraformæ­´1å¹´ã®å®Ÿä½“é¨“ã‹ã‚‰å¾—ãŸå®Ÿè·µçš„ãƒã‚¦ãƒã‚¦ã€‚AWSç’°å¢ƒã§ã®é‹ç”¨Tips&lt;br>
&lt;strong>æ¨å¥¨å¯¾è±¡&lt;/strong>: TerraformçµŒé¨“è€…ã€DevOpsã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢&lt;/p>
&lt;h3 id="-ä¾å­˜é–¢ä¿‚ã®è‡ªå‹•ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã«ã¯detailed-exitcodeãŒä¾¿åˆ©">ğŸ”§ &lt;strong>ä¾å­˜é–¢ä¿‚ã®è‡ªå‹•ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã«ã¯detailed-exitcodeãŒä¾¿åˆ©&lt;/strong>
&lt;/h3>&lt;p>&lt;strong>å‡ºå…¸&lt;/strong>: Qiitaåé›†è¨˜äº‹&lt;br>
&lt;strong>è¦ç´„&lt;/strong>: &lt;code>terraform plan -detailed-exitcode&lt;/code>ã‚’æ´»ç”¨ã—ãŸCI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³æœ€é©åŒ–æ‰‹æ³•&lt;br>
&lt;strong>æ¨å¥¨å¯¾è±¡&lt;/strong>: è‡ªå‹•åŒ–ã«å–ã‚Šçµ„ã‚€ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢&lt;/p>
&lt;h3 id="-default_">ğŸ·ï¸ &lt;strong>default_tagsã‚’ä½¿ã£ã¦ãƒªã‚½ãƒ¼ã‚¹ã®ã‚¿ã‚°ä»˜ã‘é‹ç”¨ã‚’æ¥½ã«ã—ã‚ˆã†&lt;/strong>
&lt;/h3>&lt;p>&lt;strong>å‡ºå…¸&lt;/strong>: Qiitaåé›†è¨˜äº‹&lt;br>
&lt;strong>è¦ç´„&lt;/strong>: AWSãƒªã‚½ãƒ¼ã‚¹ã®ã‚¿ã‚°ç®¡ç†ã‚’åŠ¹ç‡åŒ–ã™ã‚‹default_tagsæ©Ÿèƒ½ã®æ´»ç”¨æ–¹æ³•&lt;br>
&lt;strong>æ¨å¥¨å¯¾è±¡&lt;/strong>: AWSé‹ç”¨ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢&lt;/p>
&lt;hr>
&lt;h2 id="-ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆç·¨">ğŸ›ï¸ &lt;strong>ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ»è¨­è¨ˆç·¨&lt;/strong>
&lt;/h2>&lt;h3 id="-terraformã®reference-architectureã‚’è€ƒãˆã‚‹">ğŸ“ &lt;strong>Terraformã®Reference Architectureã‚’è€ƒãˆã‚‹&lt;/strong>
&lt;/h3>&lt;p>&lt;strong>å‡ºå…¸&lt;/strong>: Qiitaåé›†è¨˜äº‹&lt;br>
&lt;strong>è¦ç´„&lt;/strong>: ä¼æ¥­ãƒ¬ãƒ™ãƒ«ã§ã®Terraformæ§‹æˆè¨­è¨ˆã€‚ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã¨ã‚¬ãƒãƒŠãƒ³ã‚¹&lt;br>
&lt;strong>æ¨å¥¨å¯¾è±¡&lt;/strong>: ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒˆã€æŠ€è¡“ãƒªãƒ¼ãƒ€ãƒ¼&lt;/p>
&lt;h3 id="-terraform-modules-your-infrastructure">ğŸ”§ &lt;strong>Terraform Modules: Your Infrastructure&amp;rsquo;s Building Blocks&lt;/strong>
&lt;/h3>&lt;p>&lt;strong>å‡ºå…¸&lt;/strong>: &lt;a class="link" href="https://dev.to/deepanshub09/terraform-modules-your-infrastructures-building-blocks-the-complete-guide-25c5" target="_blank" rel="noopener"
>Dev.to&lt;/a> | &lt;strong>è‘—è€…&lt;/strong>: Deepanshu&lt;br>
&lt;strong>è¦ç´„&lt;/strong>: Terraformãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®è¨­è¨ˆåŸå‰‡ã¨å®Ÿè£…ã‚¬ã‚¤ãƒ‰ã€‚å†åˆ©ç”¨å¯èƒ½ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä½œæˆæ‰‹æ³•&lt;br>
&lt;strong>æ¨å¥¨å¯¾è±¡&lt;/strong>: Terraformä¸­ç´šè€…ã€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒˆ&lt;/p>
&lt;h3 id="-iamã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚’è¨­å®šã—ã¦awsã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«ã‚¢ã‚«ã‚¦ãƒ³ãƒˆåã‚’è¡¨ç¤ºã•ã›ã‚‹">ğŸ¢ &lt;strong>IAMã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚’è¨­å®šã—ã¦AWSã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«ã‚¢ã‚«ã‚¦ãƒ³ãƒˆåã‚’è¡¨ç¤ºã•ã›ã‚‹&lt;/strong>
&lt;/h3>&lt;p>&lt;strong>å‡ºå…¸&lt;/strong>: Qiitaåé›†è¨˜äº‹&lt;br>
&lt;strong>è¦ç´„&lt;/strong>: AWSãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆè­˜åˆ¥ã‚’æ”¹å–„ã™ã‚‹è¨­å®šæ–¹æ³•&lt;br>
&lt;strong>æ¨å¥¨å¯¾è±¡&lt;/strong>: AWSç®¡ç†è€…&lt;/p>
&lt;hr>
&lt;h2 id="-ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¬ãƒãƒŠãƒ³ã‚¹ç·¨">ğŸ”’ &lt;strong>ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ»ã‚¬ãƒãƒŠãƒ³ã‚¹ç·¨&lt;/strong>
&lt;/h2>&lt;h3 id="-securing-your-code-with-aws-inspector-a-comprehensive-guide">ğŸ›¡ï¸ &lt;strong>Securing Your Code with AWS Inspector: A Comprehensive Guide&lt;/strong>
&lt;/h3>&lt;p>&lt;strong>å‡ºå…¸&lt;/strong>: æµ·å¤–æŠ€è¡“è¨˜äº‹&lt;br>
&lt;strong>è¦ç´„&lt;/strong>: AWS Inspectorã‚’Terraformã‚³ãƒ¼ãƒ‰ã«çµ±åˆã—ã¦ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç›£æŸ»ã‚’è‡ªå‹•åŒ–&lt;br>
&lt;strong>æ¨å¥¨å¯¾è±¡&lt;/strong>: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã€DevSecOps&lt;/p>
&lt;h3 id="-implementing-secure-breakglass-access-for-argocd">ğŸ” &lt;strong>Implementing Secure Breakglass Access for ArgoCD&lt;/strong>
&lt;/h3>&lt;p>&lt;strong>å‡ºå…¸&lt;/strong>: æµ·å¤–æŠ€è¡“è¨˜äº‹&lt;br>
&lt;strong>è¦ç´„&lt;/strong>: ArgoCDã§ã®ç·Šæ€¥æ™‚ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã‚’Terraformã§å®Ÿè£…ã™ã‚‹æ–¹æ³•&lt;br>
&lt;strong>æ¨å¥¨å¯¾è±¡&lt;/strong>: Kubernetesé‹ç”¨è€…ã€SREã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢&lt;/p>
&lt;hr>
&lt;h2 id="-awsçµ±åˆå¿œç”¨ç·¨">â˜ï¸ &lt;strong>AWSçµ±åˆãƒ»å¿œç”¨ç·¨&lt;/strong>
&lt;/h2>&lt;h3 id="-aws-s3google-cloud-storageã‹ã‚‰ã‚¤ãƒ™ãƒ³ãƒˆãƒ‰ãƒªãƒ–ãƒ³ã§troccoã‚’å®Ÿè¡Œã™ã‚‹">ğŸ“Š &lt;strong>AWS S3ãƒ»Google Cloud Storageã‹ã‚‰ã‚¤ãƒ™ãƒ³ãƒˆãƒ‰ãƒªãƒ–ãƒ³ã§troccoã‚’å®Ÿè¡Œã™ã‚‹&lt;/strong>
&lt;/h3>&lt;p>&lt;strong>å‡ºå…¸&lt;/strong>: Qiitaåé›†è¨˜äº‹&lt;br>
&lt;strong>è¦ç´„&lt;/strong>: ãƒãƒ«ãƒã‚¯ãƒ©ã‚¦ãƒ‰ç’°å¢ƒã§ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒ‰ãƒªãƒ–ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å®Ÿè£…ä¾‹&lt;br>
&lt;strong>æ¨å¥¨å¯¾è±¡&lt;/strong>: ãƒ‡ãƒ¼ã‚¿ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã€ãƒãƒ«ãƒã‚¯ãƒ©ã‚¦ãƒ‰è¨­è¨ˆè€…&lt;/p>
&lt;h3 id="-gitops-and-iac-at-scale-argocd-and-opentofu">ğŸ”„ &lt;strong>GitOps and IaC at Scale: ArgoCD and OpenTofu&lt;/strong>
&lt;/h3>&lt;p>&lt;strong>å‡ºå…¸&lt;/strong>: æµ·å¤–æŠ€è¡“è¨˜äº‹&lt;br>
&lt;strong>è¦ç´„&lt;/strong>: å¤§è¦æ¨¡ç’°å¢ƒã§ã®GitOpsãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®Ÿè£…ã€‚OpenTofuã¨ã®çµ±åˆæ‰‹æ³•&lt;br>
&lt;strong>æ¨å¥¨å¯¾è±¡&lt;/strong>: ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã€DevOpsãƒªãƒ¼ãƒ€ãƒ¼&lt;/p>
&lt;hr>
&lt;h2 id="-é«˜åº¦ãªå¿œç”¨æ–°æŠ€è¡“ç·¨">ğŸš€ &lt;strong>é«˜åº¦ãªå¿œç”¨ãƒ»æ–°æŠ€è¡“ç·¨&lt;/strong>
&lt;/h2>&lt;h3 id="-terraform-vs-cloudformation-which-aws-iac-tool-should-you-choose">âš–ï¸ &lt;strong>Terraform vs CloudFormation: Which AWS IaC Tool Should You Choose?&lt;/strong>
&lt;/h3>&lt;p>&lt;strong>å‡ºå…¸&lt;/strong>: æµ·å¤–æŠ€è¡“è¨˜äº‹&lt;br>
&lt;strong>è¦ç´„&lt;/strong>: Terraformã¨CloudFormationã®è©³ç´°æ¯”è¼ƒã€‚é¸æŠæŒ‡é‡ã¨ç§»è¡Œæˆ¦ç•¥&lt;br>
&lt;strong>æ¨å¥¨å¯¾è±¡&lt;/strong>: æŠ€è¡“é¸å®šè²¬ä»»è€…ã€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒˆ&lt;/p>
&lt;h3 id="-terraform-or-opentofu-what-you-need-to-know-about-the-fork">ğŸ†• &lt;strong>Terraform or OpenTofu: What You Need to Know About the Fork&lt;/strong>
&lt;/h3>&lt;p>&lt;strong>å‡ºå…¸&lt;/strong>: æµ·å¤–æŠ€è¡“è¨˜äº‹&lt;br>
&lt;strong>è¦ç´„&lt;/strong>: OpenTofuãƒ•ã‚©ãƒ¼ã‚¯ã®èƒŒæ™¯ã¨æŠ€è¡“çš„å·®ç•°ã€‚ç§»è¡Œæ¤œè¨ã®ãƒã‚¤ãƒ³ãƒˆ&lt;br>
&lt;strong>æ¨å¥¨å¯¾è±¡&lt;/strong>: æŠ€è¡“æˆ¦ç•¥ç­–å®šè€…ã€ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹è©•ä¾¡è€…&lt;/p>
&lt;h3 id="-bye-bye-credentials-automate-btp-cloud-foundry-security">ğŸ” &lt;strong>Bye Bye Credentials: Automate BTP Cloud Foundry Security&lt;/strong>
&lt;/h3>&lt;p>&lt;strong>å‡ºå…¸&lt;/strong>: æµ·å¤–æŠ€è¡“è¨˜äº‹&lt;br>
&lt;strong>è¦ç´„&lt;/strong>: SAP BTP Cloud Foundryã§ã®èªè¨¼è‡ªå‹•åŒ–ã‚’Terraformã§å®Ÿç¾&lt;br>
&lt;strong>æ¨å¥¨å¯¾è±¡&lt;/strong>: SAPç’°å¢ƒç®¡ç†è€…ã€ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºé–‹ç™ºè€…&lt;/p>
&lt;hr>
&lt;h2 id="-ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºäº‹ä¾‹">ğŸ¢ &lt;strong>ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºäº‹ä¾‹&lt;/strong>
&lt;/h2>&lt;h3 id="-deploying-a-highly-scalable--available-django-app">ğŸŒ &lt;strong>Deploying a Highly Scalable &amp;amp; Available Django App&lt;/strong>
&lt;/h3>&lt;p>&lt;strong>å‡ºå…¸&lt;/strong>: æµ·å¤–æŠ€è¡“è¨˜äº‹&lt;br>
&lt;strong>è¦ç´„&lt;/strong>: Djangoã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®é«˜å¯ç”¨æ€§ã‚¤ãƒ³ãƒ•ãƒ©ã‚’Terraformã§æ§‹ç¯‰&lt;br>
&lt;strong>æ¨å¥¨å¯¾è±¡&lt;/strong>: Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒˆ&lt;/p>
&lt;h3 id="-spring-boot-banking-application-deployment-using-docker">ğŸ¦ &lt;strong>Spring Boot Banking Application Deployment using Docker&lt;/strong>
&lt;/h3>&lt;p>&lt;strong>å‡ºå…¸&lt;/strong>: æµ·å¤–æŠ€è¡“è¨˜äº‹&lt;br>
&lt;strong>è¦ç´„&lt;/strong>: é‡‘èæ¥­ç•Œå‘ã‘Spring Bootã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚³ãƒ³ãƒ†ãƒŠåŒ–ã¨ãƒ‡ãƒ—ãƒ­ã‚¤&lt;br>
&lt;strong>æ¨å¥¨å¯¾è±¡&lt;/strong>: é‡‘èç³»ã‚·ã‚¹ãƒ†ãƒ é–‹ç™ºè€…&lt;/p>
&lt;h3 id="-building-a-production-ready-terraform-project">ğŸ—ï¸ &lt;strong>Building a Production-Ready Terraform Project&lt;/strong>
&lt;/h3>&lt;p>&lt;strong>å‡ºå…¸&lt;/strong>: æµ·å¤–æŠ€è¡“è¨˜äº‹&lt;br>
&lt;strong>è¦ç´„&lt;/strong>: æœ¬ç•ªç’°å¢ƒã§é‹ç”¨å¯èƒ½ãªTerraformãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æ§‹ç¯‰æ‰‹æ³•&lt;br>
&lt;strong>æ¨å¥¨å¯¾è±¡&lt;/strong>: ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³é‹ç”¨è€…&lt;/p>
&lt;hr>
&lt;h2 id="-å­¦ç¿’ãƒªã‚½ãƒ¼ã‚¹">ğŸ“š &lt;strong>å­¦ç¿’ãƒªã‚½ãƒ¼ã‚¹&lt;/strong>
&lt;/h2>&lt;h3 id="-å…¬å¼æ¨å¥¨ãƒªã‚½ãƒ¼ã‚¹">ğŸ“ å…¬å¼ãƒ»æ¨å¥¨ãƒªã‚½ãƒ¼ã‚¹
&lt;/h3>&lt;ul>
&lt;li>&lt;a class="link" href="https://registry.terraform.io/" target="_blank" rel="noopener"
>Terraform Registry&lt;/a> - å…¬å¼ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ãƒ»ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«&lt;/li>
&lt;li>&lt;a class="link" href="https://learn.hashicorp.com/terraform" target="_blank" rel="noopener"
>HashiCorp Learn&lt;/a> - å…¬å¼å­¦ç¿’ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ &lt;/li>
&lt;li>&lt;a class="link" href="https://registry.terraform.io/providers/hashicorp/aws/" target="_blank" rel="noopener"
>AWS Terraform Provider&lt;/a> - AWSçµ±åˆ&lt;/li>
&lt;/ul>
&lt;h3 id="-å®Ÿç”¨ãƒ„ãƒ¼ãƒ«">ğŸ› ï¸ å®Ÿç”¨ãƒ„ãƒ¼ãƒ«
&lt;/h3>&lt;ul>
&lt;li>&lt;strong>Terraform Cloud&lt;/strong>: ãƒãƒãƒ¼ã‚¸ãƒ‰Terraformã‚µãƒ¼ãƒ“ã‚¹&lt;/li>
&lt;li>&lt;strong>TFLint&lt;/strong>: Terraformé™çš„è§£æãƒ„ãƒ¼ãƒ«&lt;/li>
&lt;li>&lt;strong>Terragrunt&lt;/strong>: DRYæ§‹æˆç®¡ç†ãƒ„ãƒ¼ãƒ«&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="-ã¾ã¨ã‚">ğŸ“ ã¾ã¨ã‚
&lt;/h2>&lt;p>ã“ã®è¨˜äº‹ã§ã¯ã€Terraformã«é–¢ã™ã‚‹å®Ÿç”¨çš„ãªæŠ€è¡“è¨˜äº‹ã‚’å³é¸ã—ã¦ã‚­ãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã—ã¾ã—ãŸã€‚å„è¨˜äº‹ã¯å®Ÿéš›ã®é–‹ç™ºãƒ»é‹ç”¨ç¾å ´ã§ã®çµŒé¨“ã«åŸºã¥ã„ã¦ãŠã‚Šã€ã™ãã«æ´»ç”¨ã§ãã‚‹å†…å®¹ã¨ãªã£ã¦ã„ã¾ã™ã€‚&lt;/p>
&lt;p>èˆˆå‘³ã®ã‚ã‚‹è¨˜äº‹ã‹ã‚‰èª­ã¿å§‹ã‚ã¦ã€æ®µéšçš„ã«Terraformã®ã‚¹ã‚­ãƒ«ã‚¢ãƒƒãƒ—ã‚’å›³ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚&lt;/p>
&lt;hr>
&lt;p>&lt;strong>ğŸ“Š ã‚­ãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æƒ…å ±&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;strong>åé›†è¨˜äº‹æ•°&lt;/strong>: 23è¨˜äº‹&lt;/li>
&lt;li>&lt;strong>æƒ…å ±æº&lt;/strong>: Qiitaã€Dev.toã€æµ·å¤–æŠ€è¡“ãƒ–ãƒ­ã‚°&lt;/li>
&lt;li>&lt;strong>æœ€çµ‚æ›´æ–°&lt;/strong>: 2025å¹´9æœˆ17æ—¥&lt;/li>
&lt;/ul></description></item><item><title>Git filter-branchå®Œå…¨ã‚¬ã‚¤ãƒ‰ï¼šGitã®æ­´å²ã‚’æ›¸ãæ›ãˆã‚‹å¼·åŠ›ãªãƒ„ãƒ¼ãƒ«</title><link>https://firebird-techtalktech.com/post/git-filter-branch-guide/</link><pubDate>Tue, 09 Sep 2025 11:30:00 +0900</pubDate><guid>https://firebird-techtalktech.com/post/git-filter-branch-guide/</guid><description>&lt;h2 id="ã¯ã˜ã‚ã«">ã¯ã˜ã‚ã«
&lt;/h2>&lt;p>Gitã‚’ä½¿ã£ã¦ã„ã¦ã€Œã‚ã€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ã‚³ãƒŸãƒƒãƒˆã—ã¦ã—ã¾ã£ãŸï¼ã€ã€Œéå»ã®ã‚³ãƒŸãƒƒãƒˆã®è‘—è€…åã‚’å…¨éƒ¨å¤‰æ›´ã—ãŸã„ã€ã¨ã„ã£ãŸçµŒé¨“ã¯ã‚ã‚Šã¾ã›ã‚“ã‹ï¼Ÿ&lt;/p>
&lt;p>ä»Šå›ã¯ã€ãã‚“ãªæ™‚ã«å½¹ç«‹ã¤&lt;code>git filter-branch&lt;/code>ã¨ã„ã†å¼·åŠ›ãªã‚³ãƒãƒ³ãƒ‰ã«ã¤ã„ã¦è§£èª¬ã—ã¾ã™ã€‚ã“ã®ã‚³ãƒãƒ³ãƒ‰ã¯ã€ŒGitã®æ­´å²æ”¹å¤‰ãƒ„ãƒ¼ãƒ«ã€ã¨ã‚‚å‘¼ã¹ã‚‹ã€çŸ¥ã‚‹äººãçŸ¥ã‚‹ä¸Šç´šã‚³ãƒãƒ³ãƒ‰ã§ã™ã€‚&lt;/p>
&lt;h2 id="git-filter-branchã¨ã¯">git filter-branchã¨ã¯ï¼Ÿ
&lt;/h2>&lt;p>&lt;code>git filter-branch&lt;/code>ã¯ã€Gitãƒªãƒã‚¸ãƒˆãƒªã®å±¥æ­´ã‚’æ›¸ãæ›ãˆã‚‹ãŸã‚ã®ã‚³ãƒãƒ³ãƒ‰ã§ã™ã€‚å˜ä¸€ã®ã‚³ãƒŸãƒƒãƒˆã ã‘ã§ãªãã€&lt;strong>å…¨å±¥æ­´ã‚’å¯¾è±¡ã«ä¸€æ‹¬ã§å¤‰æ›´ã‚’é©ç”¨&lt;/strong>ã§ãã‚‹ã®ãŒç‰¹å¾´ã§ã™ã€‚&lt;/p>
&lt;h3 id="åŸºæœ¬æ§‹æ–‡">åŸºæœ¬æ§‹æ–‡
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">git filter-branch &lt;span class="o">[&lt;/span>--option&lt;span class="o">]&lt;/span> &lt;span class="s1">&amp;#39;&amp;lt;command&amp;gt;&amp;#39;&lt;/span> &lt;span class="o">[&lt;/span>revision-range&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸»ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>--tree-filter&lt;/code>: å„ã‚³ãƒŸãƒƒãƒˆã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒ„ãƒªãƒ¼ã‚’ç›´æ¥ç·¨é›†&lt;/li>
&lt;li>&lt;code>--index-filter&lt;/code>: ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼ˆã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ï¼‰ã‚’ç·¨é›†&lt;/li>
&lt;li>&lt;code>--env-filter&lt;/code>: ç’°å¢ƒå¤‰æ•°ï¼ˆè‘—è€…æƒ…å ±ãªã©ï¼‰ã‚’ç·¨é›†&lt;/li>
&lt;li>&lt;code>--msg-filter&lt;/code>: ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç·¨é›†&lt;/li>
&lt;/ul>
&lt;h2 id="å®Ÿè·µä¾‹1æ©Ÿå¯†æƒ…å ±ã®å‰Šé™¤">å®Ÿè·µä¾‹1ï¼šæ©Ÿå¯†æƒ…å ±ã®å‰Šé™¤
&lt;/h2>&lt;p>æœ€ã‚‚ä¸€èˆ¬çš„ãªä½¿ç”¨ä¾‹ã¯ã€èª¤ã£ã¦ã‚³ãƒŸãƒƒãƒˆã—ã¦ã—ã¾ã£ãŸæ©Ÿå¯†æƒ…å ±ã®å‰Šé™¤ã§ã™ã€‚&lt;/p>
&lt;h3 id="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å…¨å±¥æ­´ã‹ã‚‰å‰Šé™¤">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å…¨å±¥æ­´ã‹ã‚‰å‰Šé™¤
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># passwords.txtã‚’å…¨å±¥æ­´ã‹ã‚‰å‰Šé™¤&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git filter-branch --force --index-filter &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> &lt;span class="s1">&amp;#39;git rm --cached --ignore-unmatch passwords.txt&amp;#39;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --prune-empty --tag-name-filter cat -- --all
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="envãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤ã‚ˆã‚Šå®‰å…¨ãªæ–¹æ³•">.envãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤ï¼ˆã‚ˆã‚Šå®‰å…¨ãªæ–¹æ³•ï¼‰
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’ä½œæˆ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git branch backup-before-cleanup
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># .envãƒ•ã‚¡ã‚¤ãƒ«ã‚’å…¨å±¥æ­´ã‹ã‚‰å‰Šé™¤&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git filter-branch --force --index-filter &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> &lt;span class="s1">&amp;#39;git rm --cached --ignore-unmatch .env&amp;#39;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --prune-empty --tag-name-filter cat -- --all
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># å‰Šé™¤ã‚’ç¢ºèª&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git log --all --full-history -- .env
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="å®Ÿè·µä¾‹2è‘—è€…æƒ…å ±ã®å¤‰æ›´">å®Ÿè·µä¾‹2ï¼šè‘—è€…æƒ…å ±ã®å¤‰æ›´
&lt;/h2>&lt;p>GitHubã®ãƒ¦ãƒ¼ã‚¶ãƒ¼åã‚’å¤‰æ›´ã—ãŸå ´åˆãªã©ã€éå»ã®ã‚³ãƒŸãƒƒãƒˆã®è‘—è€…åã‚’å¤‰æ›´ã—ãŸã„å ´åˆãŒã‚ã‚Šã¾ã™ã€‚&lt;/p>
&lt;h3 id="ç‰¹å®šã®è‘—è€…åã‚’ä¸€æ‹¬å¤‰æ›´">ç‰¹å®šã®è‘—è€…åã‚’ä¸€æ‹¬å¤‰æ›´
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>git filter-branch --env-filter &lt;span class="s1">&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">OLD_EMAIL=&amp;#34;old@example.com&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">CORRECT_NAME=&amp;#34;æ–°ã—ã„åå‰&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">CORRECT_EMAIL=&amp;#34;new@example.com&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">if [ &amp;#34;$GIT_COMMITTER_EMAIL&amp;#34; = &amp;#34;$OLD_EMAIL&amp;#34; ]
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">then
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> export GIT_COMMITTER_NAME=&amp;#34;$CORRECT_NAME&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> export GIT_COMMITTER_EMAIL=&amp;#34;$CORRECT_EMAIL&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">fi
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">if [ &amp;#34;$GIT_AUTHOR_EMAIL&amp;#34; = &amp;#34;$OLD_EMAIL&amp;#34; ]
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">then
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> export GIT_AUTHOR_NAME=&amp;#34;$CORRECT_NAME&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> export GIT_AUTHOR_EMAIL=&amp;#34;$CORRECT_EMAIL&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">fi
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">&amp;#39;&lt;/span> --tag-name-filter cat -- --branches --tags
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="å®Ÿéš›ã®ä½¿ç”¨ä¾‹tmy-ss-310--tmy-310">å®Ÿéš›ã®ä½¿ç”¨ä¾‹ï¼štmy-ss-310 â†’ tmy-310
&lt;/h3>&lt;p>ç§ãŒå®Ÿéš›ã«ä½¿ç”¨ã—ãŸã‚±ãƒ¼ã‚¹ã§ã™ã€‚GitHubã®ãƒ¦ãƒ¼ã‚¶ãƒ¼åã‚’å¤‰æ›´ã—ãŸãŸã‚ã€éå»ã®ã‚³ãƒŸãƒƒãƒˆå±¥æ­´ã‚‚æ›´æ–°ã—ã¾ã—ãŸï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">git filter-branch -f --env-filter &lt;span class="s1">&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">if [ &amp;#34;$GIT_AUTHOR_NAME&amp;#34; = &amp;#34;tmy-ss-310&amp;#34; ]; then
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> export GIT_AUTHOR_NAME=&amp;#34;tmy-310&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> export GIT_AUTHOR_EMAIL=&amp;#34;mito.motohiro@gmail.com&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">fi
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">if [ &amp;#34;$GIT_COMMITTER_NAME&amp;#34; = &amp;#34;tmy-ss-310&amp;#34; ]; then
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> export GIT_COMMITTER_NAME=&amp;#34;tmy-310&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> export GIT_COMMITTER_EMAIL=&amp;#34;mito.motohiro@gmail.com&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">fi
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">&amp;#39;&lt;/span> -- --all
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="å®Ÿè·µä¾‹3ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã®å¤‰æ›´">å®Ÿè·µä¾‹3ï¼šãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã®å¤‰æ›´
&lt;/h2>&lt;h3 id="ã‚µãƒ–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’æ–°ã—ã„ãƒªãƒã‚¸ãƒˆãƒªã¨ã—ã¦åˆ‡ã‚Šå‡ºã™">ã‚µãƒ–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’æ–°ã—ã„ãƒªãƒã‚¸ãƒˆãƒªã¨ã—ã¦åˆ‡ã‚Šå‡ºã™
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># frontendãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã ã‘ã‚’æŠ½å‡ºã—ã¦æ–°ã—ã„ãƒªãƒã‚¸ãƒˆãƒªã«&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git filter-branch --subdirectory-filter frontend HEAD
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ã“ã‚Œã«ã‚ˆã‚Šã€frontendãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ãªã‚‹&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="å…¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚µãƒ–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•">å…¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚µãƒ–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">git filter-branch --index-filter &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> &lt;span class="s1">&amp;#39;git ls-files -s | sed &amp;#34;s-\t\&amp;#34;*-&amp;amp;newsubdir/-&amp;#34; |
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> GIT_INDEX_FILE=$GIT_INDEX_FILE.new \
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> git update-index --index-info &amp;amp;&amp;amp;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> mv &amp;#34;$GIT_INDEX_FILE.new&amp;#34; &amp;#34;$GIT_INDEX_FILE&amp;#34;&amp;#39;&lt;/span> HEAD
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="å®Ÿè·µä¾‹4å¤§ããªãƒ•ã‚¡ã‚¤ãƒ«ã®å‰Šé™¤">å®Ÿè·µä¾‹4ï¼šå¤§ããªãƒ•ã‚¡ã‚¤ãƒ«ã®å‰Šé™¤
&lt;/h2>&lt;p>ãƒªãƒã‚¸ãƒˆãƒªã‚µã‚¤ã‚ºã‚’å‰Šæ¸›ã™ã‚‹ãŸã‚ã€å¤§ããªãƒ•ã‚¡ã‚¤ãƒ«ã‚’å±¥æ­´ã‹ã‚‰å‰Šé™¤ã—ã¾ã™ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 100MBä»¥ä¸Šã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¤œå‡º&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git rev-list --objects --all &lt;span class="p">|&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> git cat-file --batch-check&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;%(objecttype) %(objectname) %(objectsize) %(rest)&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sed -n &lt;span class="s1">&amp;#39;s/^blob //p&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sort --numeric-sort --key&lt;span class="o">=&lt;/span>&lt;span class="m">2&lt;/span> &lt;span class="p">|&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> tail -10
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># å¤§ããªãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆä¾‹ï¼šhuge-video.mp4ï¼‰ã‚’å‰Šé™¤&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git filter-branch --force --index-filter &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> &lt;span class="s1">&amp;#39;git rm --cached --ignore-unmatch huge-video.mp4&amp;#39;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --prune-empty --tag-name-filter cat -- --all
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="filter-branchã®æ³¨æ„ç‚¹">filter-branchã®æ³¨æ„ç‚¹
&lt;/h2>&lt;h3 id="-ç ´å£Šçš„æ“ä½œ">âš ï¸ ç ´å£Šçš„æ“ä½œ
&lt;/h3>&lt;p>&lt;code>git filter-branch&lt;/code>ã¯å±¥æ­´ã‚’å®Œå…¨ã«æ›¸ãæ›ãˆã‚‹ãŸã‚ï¼š&lt;/p>
&lt;ol>
&lt;li>&lt;strong>å¿…ãšãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’ä½œæˆ&lt;/strong>&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">git branch backup-&lt;span class="k">$(&lt;/span>date +%Y%m%d&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="2">
&lt;li>&lt;strong>å¼·åˆ¶ãƒ—ãƒƒã‚·ãƒ¥ãŒå¿…è¦&lt;/strong>&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">git push --force origin main
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="3">
&lt;li>&lt;strong>ãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼ã¸ã®å½±éŸ¿&lt;/strong>
&lt;ul>
&lt;li>ä»–ã®é–‹ç™ºè€…ã¯å†ã‚¯ãƒ­ãƒ¼ãƒ³ãŒå¿…è¦&lt;/li>
&lt;li>é€²è¡Œä¸­ã®ä½œæ¥­ãŒã‚ã‚‹å ´åˆã¯è¦èª¿æ•´&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h3 id="ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®å•é¡Œ">ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®å•é¡Œ
&lt;/h3>&lt;p>å¤§è¦æ¨¡ãªãƒªãƒã‚¸ãƒˆãƒªã§ã¯å‡¦ç†ã«æ™‚é–“ãŒã‹ã‹ã‚Šã¾ã™ï¼š&lt;/p>
&lt;ul>
&lt;li>1000ã‚³ãƒŸãƒƒãƒˆ: æ•°åˆ†&lt;/li>
&lt;li>10000ã‚³ãƒŸãƒƒãƒˆ: 30åˆ†ä»¥ä¸Š&lt;/li>
&lt;/ul>
&lt;h2 id="ä»£æ›¿ãƒ„ãƒ¼ãƒ«git-filter-repo">ä»£æ›¿ãƒ„ãƒ¼ãƒ«ï¼šgit filter-repo
&lt;/h2>&lt;p>Git 2.24ä»¥é™ã§ã¯ã€&lt;code>git filter-repo&lt;/code>ãŒæ¨å¥¨ã•ã‚Œã¦ã„ã¾ã™ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pip install git-filter-repo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ä½¿ç”¨ä¾‹ï¼šãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã®å¤‰æ›´&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git filter-repo --email-callback &lt;span class="s1">&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> return email.replace(b&amp;#34;old@example.com&amp;#34;, b&amp;#34;new@example.com&amp;#34;)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ãƒ‘ã‚¹ã®å‰Šé™¤&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git filter-repo --path passwords.txt --invert-paths
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="filter-repoã®åˆ©ç‚¹">filter-repoã®åˆ©ç‚¹
&lt;/h3>&lt;ul>
&lt;li>&lt;strong>é«˜é€Ÿ&lt;/strong>: filter-branchã®10-720å€é«˜é€Ÿ&lt;/li>
&lt;li>&lt;strong>å®‰å…¨&lt;/strong>: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§æ–°ã—ã„ãƒªãƒã‚¸ãƒˆãƒªã«å‡ºåŠ›&lt;/li>
&lt;li>&lt;strong>ä½¿ã„ã‚„ã™ã„&lt;/strong>: ã‚ˆã‚Šç›´æ„Ÿçš„ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³&lt;/li>
&lt;/ul>
&lt;h2 id="å®Ÿç”¨çš„ãªä½¿ã„åˆ†ã‘">å®Ÿç”¨çš„ãªä½¿ã„åˆ†ã‘
&lt;/h2>&lt;h3 id="git-filter-branchã‚’ä½¿ã†ã¹ãå ´åˆ">git filter-branchã‚’ä½¿ã†ã¹ãå ´åˆ
&lt;/h3>&lt;ul>
&lt;li>Gitã®æ¨™æº–æ©Ÿèƒ½ã®ã¿ã§å®Œçµã—ãŸã„&lt;/li>
&lt;li>ç°¡å˜ãªè‘—è€…åå¤‰æ›´ã‚„å˜ä¸€ãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤&lt;/li>
&lt;li>è¿½åŠ ãƒ„ãƒ¼ãƒ«ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå›°é›£ãªç’°å¢ƒ&lt;/li>
&lt;/ul>
&lt;h3 id="git-rebaseã‚„resetã§ååˆ†ãªå ´åˆ">git rebaseã‚„resetã§ååˆ†ãªå ´åˆ
&lt;/h3>&lt;ul>
&lt;li>æœ€è¿‘ã®ã‚³ãƒŸãƒƒãƒˆï¼ˆ10å€‹ç¨‹åº¦ï¼‰ã®ä¿®æ­£&lt;/li>
&lt;li>å€‹äººãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§å±¥æ­´ã®è©³ç´°ãŒä¸è¦&lt;/li>
&lt;li>ã‚¯ãƒªãƒ¼ãƒ³ãªå±¥æ­´ã‚’å„ªå…ˆ&lt;/li>
&lt;/ul>
&lt;h3 id="git-filter-repoã‚’ä½¿ã†ã¹ãå ´åˆ">git filter-repoã‚’ä½¿ã†ã¹ãå ´åˆ
&lt;/h3>&lt;ul>
&lt;li>å¤§è¦æ¨¡ãªãƒªãƒã‚¸ãƒˆãƒª&lt;/li>
&lt;li>è¤‡é›‘ãªãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ¡ä»¶&lt;/li>
&lt;li>ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒé‡è¦&lt;/li>
&lt;/ul>
&lt;h2 id="ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°">ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
&lt;/h2>&lt;h3 id="ã‚¨ãƒ©ãƒ¼-cannot-create-a-new-backup">ã‚¨ãƒ©ãƒ¼: &amp;ldquo;Cannot create a new backup&amp;rdquo;
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># æ—¢å­˜ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’å‰Šé™¤&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rm -rf .git/refs/original/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="ãƒªãƒ¢ãƒ¼ãƒˆã¨ã®åŒæœŸå•é¡Œ">ãƒªãƒ¢ãƒ¼ãƒˆã¨ã®åŒæœŸå•é¡Œ
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ãƒ­ãƒ¼ã‚«ãƒ«ã®å¤‰æ›´ã‚’å¼·åˆ¶çš„ã«åæ˜ &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git push --force-with-lease origin main
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ã‚ˆã‚Šå®‰å…¨ï¼šæ–°ã—ã„ãƒ–ãƒ©ãƒ³ãƒã«ãƒ—ãƒƒã‚·ãƒ¥&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git push origin main:main-filtered
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="å®¹é‡ãŒæ¸›ã‚‰ãªã„å ´åˆ">å®¹é‡ãŒæ¸›ã‚‰ãªã„å ´åˆ
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ã‚¬ãƒ™ãƒ¼ã‚¸ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git reflog expire --expire&lt;span class="o">=&lt;/span>now --all
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git gc --prune&lt;span class="o">=&lt;/span>now --aggressive
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="ã¾ã¨ã‚">ã¾ã¨ã‚
&lt;/h2>&lt;p>&lt;code>git filter-branch&lt;/code>ã¯å¼·åŠ›ãªãƒ„ãƒ¼ãƒ«ã§ã™ãŒã€ä½¿ç”¨ã«ã¯æ³¨æ„ãŒå¿…è¦ã§ã™ï¼š&lt;/p>
&lt;p>âœ… &lt;strong>ä½¿ã†ã¹ãæ™‚&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>æ©Ÿå¯†æƒ…å ±ã®ç·Šæ€¥å‰Šé™¤&lt;/li>
&lt;li>è‘—è€…æƒ…å ±ã®ä¸€æ‹¬ä¿®æ­£&lt;/li>
&lt;li>ãƒªãƒã‚¸ãƒˆãƒªã®å¤§è¦æ¨¡ãªãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°&lt;/li>
&lt;/ul>
&lt;p>âŒ &lt;strong>é¿ã‘ã‚‹ã¹ãæ™‚&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>å…¬é–‹æ¸ˆã¿ã®å¤§è¦æ¨¡ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ&lt;/li>
&lt;li>ãƒãƒ¼ãƒ é–‹ç™ºä¸­ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªãƒªãƒã‚¸ãƒˆãƒª&lt;/li>
&lt;li>ç°¡å˜ãªä¿®æ­£ã§æ¸ˆã‚€å ´åˆ&lt;/li>
&lt;/ul>
&lt;p>é©åˆ‡ã«ä½¿ãˆã°ã€Gitã®å±¥æ­´ã‚’ã‚¯ãƒªãƒ¼ãƒ³ã«ä¿ã¡ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å•é¡Œã‚’è§£æ±ºã§ãã‚‹å¼·åŠ›ãªå‘³æ–¹ã«ãªã‚Šã¾ã™ã€‚ãŸã ã—ã€ã€Œå¤§ã„ãªã‚‹åŠ›ã«ã¯å¤§ã„ãªã‚‹è²¬ä»»ãŒä¼´ã†ã€ã“ã¨ã‚’å¿˜ã‚Œãšã«ï¼&lt;/p>
&lt;h2 id="å‚è€ƒãƒªãƒ³ã‚¯">å‚è€ƒãƒªãƒ³ã‚¯
&lt;/h2>&lt;ul>
&lt;li>&lt;a class="link" href="https://git-scm.com/docs/git-filter-branch" target="_blank" rel="noopener"
>Gitå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ - git-filter-branch&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/removing-sensitive-data-from-a-repository" target="_blank" rel="noopener"
>GitHub - Removing sensitive data&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://github.com/newren/git-filter-repo" target="_blank" rel="noopener"
>git-filter-repo&lt;/a>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;p>&lt;em>ã“ã®è¨˜äº‹ãŒå½¹ã«ç«‹ã£ãŸã‚‰ã€ãœã²ã‚·ã‚§ã‚¢ã—ã¦ãã ã•ã„ï¼Gitã®å›°ã£ãŸæ™‚ã®æ•‘ä¸–ä¸»ã¨ã—ã¦ã€å¤šãã®é–‹ç™ºè€…ã®åŠ©ã‘ã«ãªã‚Œã°å¹¸ã„ã§ã™ã€‚&lt;/em>&lt;/p></description></item><item><title>Dockerå…¥é–€ï¼šã‚³ãƒ³ãƒ†ãƒŠæŠ€è¡“ã®åŸºç¤ã‹ã‚‰å®Ÿè·µã¾ã§</title><link>https://firebird-techtalktech.com/post/docker%E5%85%A5%E9%96%80%E3%82%B3%E3%83%B3%E3%83%86%E3%83%8A%E6%8A%80%E8%A1%93%E3%81%AE%E5%9F%BA%E7%A4%8E%E3%81%8B%E3%82%89%E5%AE%9F%E8%B7%B5%E3%81%BE%E3%81%A7/</link><pubDate>Sat, 11 Jan 2025 10:00:00 +0900</pubDate><guid>https://firebird-techtalktech.com/post/docker%E5%85%A5%E9%96%80%E3%82%B3%E3%83%B3%E3%83%86%E3%83%8A%E6%8A%80%E8%A1%93%E3%81%AE%E5%9F%BA%E7%A4%8E%E3%81%8B%E3%82%89%E5%AE%9F%E8%B7%B5%E3%81%BE%E3%81%A7/</guid><description>&lt;h2 id="dockerã¨ã¯">Dockerã¨ã¯
&lt;/h2>&lt;p>Dockerã¯ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã‚³ãƒ³ãƒ†ãƒŠã¨ã„ã†å˜ä½ã§ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åŒ–ã—ã€ã©ã®ç’°å¢ƒã§ã‚‚åŒã˜ã‚ˆã†ã«å‹•ä½œã•ã›ã‚‹ã“ã¨ãŒã§ãã‚‹æŠ€è¡“ã§ã™ã€‚&lt;/p>
&lt;h2 id="ãªãœdockerãŒå¿…è¦ãªã®ã‹">ãªãœDockerãŒå¿…è¦ãªã®ã‹
&lt;/h2>&lt;h3 id="1-ç’°å¢ƒä¾å­˜ã®å•é¡Œã‚’è§£æ±º">1. ç’°å¢ƒä¾å­˜ã®å•é¡Œã‚’è§£æ±º
&lt;/h3>&lt;p>ã€Œç§ã®ç’°å¢ƒã§ã¯å‹•ãã®ã«&amp;hellip;ã€ã¨ã„ã†å•é¡Œã‚’è§£æ±ºã—ã¾ã™ã€‚é–‹ç™ºç’°å¢ƒã€ãƒ†ã‚¹ãƒˆç’°å¢ƒã€æœ¬ç•ªç’°å¢ƒã§åŒã˜ã‚³ãƒ³ãƒ†ãƒŠã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€ç’°å¢ƒå·®ç•°ã«ã‚ˆã‚‹å•é¡Œã‚’æœ€å°åŒ–ã§ãã¾ã™ã€‚&lt;/p>
&lt;h3 id="2-è»½é‡ã§é«˜é€Ÿ">2. è»½é‡ã§é«˜é€Ÿ
&lt;/h3>&lt;p>ä»®æƒ³ãƒã‚·ãƒ³ã¨æ¯”è¼ƒã—ã¦ï¼š&lt;/p>
&lt;ul>
&lt;li>èµ·å‹•ãŒé€Ÿã„ï¼ˆæ•°ç§’ï¼‰&lt;/li>
&lt;li>ãƒªã‚½ãƒ¼ã‚¹æ¶ˆè²»ãŒå°‘ãªã„&lt;/li>
&lt;li>åŒã˜ãƒ›ã‚¹ãƒˆã§å¤šæ•°ã®ã‚³ãƒ³ãƒ†ãƒŠã‚’å®Ÿè¡Œå¯èƒ½&lt;/li>
&lt;/ul>
&lt;h2 id="åŸºæœ¬çš„ãªdockerã‚³ãƒãƒ³ãƒ‰">åŸºæœ¬çš„ãªDockerã‚³ãƒãƒ³ãƒ‰
&lt;/h2>&lt;h3 id="ã‚¤ãƒ¡ãƒ¼ã‚¸ã®æ“ä½œ">ã‚¤ãƒ¡ãƒ¼ã‚¸ã®æ“ä½œ
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ã‚¤ãƒ¡ãƒ¼ã‚¸ã®æ¤œç´¢&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker search nginx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ã‚¤ãƒ¡ãƒ¼ã‚¸ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker pull nginx:latest
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ãƒ­ãƒ¼ã‚«ãƒ«ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ä¸€è¦§&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker images
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="ã‚³ãƒ³ãƒ†ãƒŠã®æ“ä½œ">ã‚³ãƒ³ãƒ†ãƒŠã®æ“ä½œ
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ã‚³ãƒ³ãƒ†ãƒŠã®èµ·å‹•&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker run -d -p 8080:80 --name my-nginx nginx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># å®Ÿè¡Œä¸­ã®ã‚³ãƒ³ãƒ†ãƒŠç¢ºèª&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker ps
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ã‚³ãƒ³ãƒ†ãƒŠã®åœæ­¢&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker stop my-nginx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ã‚³ãƒ³ãƒ†ãƒŠã®å‰Šé™¤&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker rm my-nginx
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="dockerfileã®åŸºæœ¬">Dockerfileã®åŸºæœ¬
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-dockerfile" data-lang="dockerfile">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ¡ãƒ¼ã‚¸ã®æŒ‡å®š&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="s"> node:18-alpine&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="c"># ä½œæ¥­ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®è¨­å®š&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">WORKDIR&lt;/span>&lt;span class="s"> /app&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="c"># ä¾å­˜é–¢ä¿‚ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚³ãƒ”ãƒ¼&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">COPY&lt;/span> package*.json ./&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="c"># ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">RUN&lt;/span> npm ci --only&lt;span class="o">=&lt;/span>production&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="c"># ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚³ãƒ”ãƒ¼&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">COPY&lt;/span> . .&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="c"># ãƒãƒ¼ãƒˆã®å…¬é–‹&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">EXPOSE&lt;/span>&lt;span class="s"> 3000&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="c"># ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®èµ·å‹•&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">CMD&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;node&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;server.js&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="docker-composeã§è¤‡æ•°ã‚³ãƒ³ãƒ†ãƒŠã‚’ç®¡ç†">Docker Composeã§è¤‡æ•°ã‚³ãƒ³ãƒ†ãƒŠã‚’ç®¡ç†
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;3.8&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">services&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">web&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">build&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;3000:3000&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">environment&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">NODE_ENV=production&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">depends_on&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">db&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">db&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">postgres:14&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">environment&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">POSTGRES_DB=myapp&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">POSTGRES_USER=user&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">POSTGRES_PASSWORD=password&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">postgres_data:/var/lib/postgresql/data&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">postgres_data&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹">ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹
&lt;/h2>&lt;h3 id="1-ãƒãƒ«ãƒã‚¹ãƒ†ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰ã®æ´»ç”¨">1. ãƒãƒ«ãƒã‚¹ãƒ†ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰ã®æ´»ç”¨
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-dockerfile" data-lang="dockerfile">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># ãƒ“ãƒ«ãƒ‰ã‚¹ãƒ†ãƒ¼ã‚¸&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="s"> node:18-alpine AS builder&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">WORKDIR&lt;/span>&lt;span class="s"> /app&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">COPY&lt;/span> package*.json ./&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">RUN&lt;/span> npm ci&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">COPY&lt;/span> . .&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">RUN&lt;/span> npm run build&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="c"># å®Ÿè¡Œã‚¹ãƒ†ãƒ¼ã‚¸&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="s"> node:18-alpine&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">WORKDIR&lt;/span>&lt;span class="s"> /app&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">COPY&lt;/span> --from&lt;span class="o">=&lt;/span>builder /app/dist ./dist&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">COPY&lt;/span> --from&lt;span class="o">=&lt;/span>builder /app/node_modules ./node_modules&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">CMD&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;node&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;dist/index.js&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="2-dockerignoreã®æ´»ç”¨">2. .dockerignoreã®æ´»ç”¨
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">node_modules
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">npm-debug.log
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">.git
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">.gitignore
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">README.md
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">.env
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">.vscode
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°">ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
&lt;/h2>&lt;h3 id="ãƒ‡ã‚£ã‚¹ã‚¯å®¹é‡ã®å•é¡Œ">ãƒ‡ã‚£ã‚¹ã‚¯å®¹é‡ã®å•é¡Œ
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># æœªä½¿ç”¨ã®ãƒªã‚½ãƒ¼ã‚¹ã‚’ä¸€æ‹¬å‰Šé™¤&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker system prune -a
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># å€‹åˆ¥ã«å‰Šé™¤&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker image prune
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker container prune
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker volume prune
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="ãƒ­ã‚°ã®ç¢ºèª">ãƒ­ã‚°ã®ç¢ºèª
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ã‚³ãƒ³ãƒ†ãƒŠãƒ­ã‚°ã®ç¢ºèª&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker logs my-container
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ãƒ­ã‚°ã‚’è¿½è·¡&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker logs -f my-container
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="ã¾ã¨ã‚">ã¾ã¨ã‚
&lt;/h2>&lt;p>Dockerã¯ç¾ä»£ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã«ãŠã„ã¦æ¬ ã‹ã›ãªã„ãƒ„ãƒ¼ãƒ«ã¨ãªã£ã¦ã„ã¾ã™ã€‚åŸºæœ¬çš„ãªã‚³ãƒãƒ³ãƒ‰ã‹ã‚‰å§‹ã‚ã¦ã€å¾ã€…ã«è¤‡é›‘ãªæ§‹æˆã«ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã—ã¦ã„ãã“ã¨ã§ã€åŠ¹ç‡çš„ãªé–‹ç™ºç’°å¢ƒã‚’æ§‹ç¯‰ã§ãã¾ã™ã€‚&lt;/p>
&lt;p>æ¬¡å›ã¯ã€Kubernetesã‚’ä½¿ã£ãŸã‚³ãƒ³ãƒ†ãƒŠã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã«ã¤ã„ã¦è§£èª¬äºˆå®šã§ã™ã€‚&lt;/p></description></item></channel></rss>