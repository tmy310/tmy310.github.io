<!doctype html><html lang=ja dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="Using '192.168.1.0 should be safe' across all sites led to massive routing conflicts during HQ-branch VPN integration. Complete record of 72-hour emergency IP address redesign and the importance of hierarchical design."><title>[IP Address Hell] 192.168.1.0 Duplicate Design Causes Company-wide Network Chaos → 72-Hour Emergency Redesign Battle</title><link rel=canonical href=https://firebird-techtalktech.com/post/ip-address-hell-192.168.1.0-duplicate-design-causes-company-wide-network-chaos-72-hour-emergency-redesign-battle/><link rel=stylesheet href=/scss/style.min.e6937209cf479aae8b2dc8dae2b126867e86dcb9029b922867e771b019f3d3d9.css><meta property='og:title' content="[IP Address Hell] 192.168.1.0 Duplicate Design Causes Company-wide Network Chaos → 72-Hour Emergency Redesign Battle"><meta property='og:description' content="Using '192.168.1.0 should be safe' across all sites led to massive routing conflicts during HQ-branch VPN integration. Complete record of 72-hour emergency IP address redesign and the importance of hierarchical design."><meta property='og:url' content='https://firebird-techtalktech.com/post/ip-address-hell-192.168.1.0-duplicate-design-causes-company-wide-network-chaos-72-hour-emergency-redesign-battle/'><meta property='og:site_name' content='firebirdテックトーク'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='IP Address Design'><meta property='article:tag' content='Network Design'><meta property='article:tag' content='DHCP'><meta property='article:tag' content='Subnet'><meta property='article:tag' content='VPN'><meta property='article:tag' content='Design Failure'><meta property='article:tag' content='author-created'><meta property='article:published_time' content='2025-09-14T18:00:00+09:00'><meta property='article:modified_time' content='2025-09-14T18:00:00+09:00'><meta name=twitter:title content="[IP Address Hell] 192.168.1.0 Duplicate Design Causes Company-wide Network Chaos → 72-Hour Emergency Redesign Battle"><meta name=twitter:description content="Using '192.168.1.0 should be safe' across all sites led to massive routing conflicts during HQ-branch VPN integration. Complete record of 72-hour emergency IP address redesign and the importance of hierarchical design."><link rel="shortcut icon" href=/images/favicon.png><script async src="https://www.googletagmanager.com/gtag/js?id=G-J8ND35KCZW"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-J8ND35KCZW")}</script><meta name=robots content="index,follow"><script type=application/ld+json>{"@context":"https://schema.org","@type":"WebSite","name":"firebirdテックトーク","url":"https:\/\/firebird-techtalktech.com\/","description":"技術ネタ、趣味や備忘録などを書いているブログです","publisher":{"@type":"Person","name":"トミー","url":"https:\/\/firebird-techtalktech.com\/about/"},"potentialAction":{"@type":"SearchAction","target":"https:\/\/firebird-techtalktech.com\/search/?q={search_term_string}","query-input":"required name=search_term_string"}}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","headline":"[IP Address Hell] 192.168.1.0 Duplicate Design Causes Company-wide Network Chaos → 72-Hour Emergency Redesign Battle","description":"Using \u0027192.168.1.0 should be safe\u0027 across all sites led to massive routing conflicts during HQ-branch VPN integration. Complete record of 72-hour emergency IP address redesign and the importance of hierarchical design.","author":{"@type":"Person","name":"トミー"},"publisher":{"@type":"Person","name":"トミー","url":"https:\/\/firebird-techtalktech.com\/about/"},"datePublished":"2025-09-14T18:00:00\u002b09:00","dateModified":"2025-09-14T18:00:00\u002b09:00","url":"https:\/\/firebird-techtalktech.com\/post\/ip-address-hell-192.168.1.0-duplicate-design-causes-company-wide-network-chaos-72-hour-emergency-redesign-battle\/","wordCount":"3522","keywords":["IP Address Design","Network Design","DHCP","Subnet","VPN","Design Failure","author-created"]}</script><meta name=description content="Using '192.168.1.0 should be safe' across all sites led to massive routing conflicts during HQ-branch VPN integration. Complete record of 72-hour emergency IP address redesign and the importance of hierarchical design."><meta property="og:site_name" content="firebirdテックトーク"><meta property="og:type" content="article"><meta name=google-adsense-account content="ca-pub-8563231513969804"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8563231513969804" crossorigin=anonymous></script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><header class=site-header><div class=header-container><div class=header-brand><div class=header-logo><a href=/><img src=/img/avatar_hu_d7c67b01a0ed7653.png width=40 height=40 class=header-logo-img loading=lazy alt=Avatar></a></div><div class=header-title><h1 class=site-title><a href=/>firebirdテックトーク</a></h1><div class=site-tagline>技術ネタ、趣味や備忘録などを書いているブログです</div></div></div><div class=header-search><form class=search-form action=/search/ method=get><div class=search-wrapper><input type=text name=keyword placeholder=記事を検索... class=search-input autocomplete=off>
<button type=submit class=search-button>
<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg></button></div></form></div><nav class=header-nav><ul class=nav-menu><li class=nav-item><a href=/ class=nav-link>ホーム</a></li><li class=nav-item><a href=/tags/author-created/ class=nav-link>マイブログ</a></li><li class=nav-item><a href=/categories/%E6%97%85%E8%A1%8C%E8%A8%98/ class=nav-link>旅行記</a></li><li class=nav-item><a href=/categories/%E6%9C%80%E6%96%B0%E8%A8%98%E4%BA%8B/ class=nav-link>最新記事</a></li><li class=nav-item><a href=/tags/ class=nav-link>タグ一覧</a></li></ul></nav><button class=mobile-menu-toggle type=button aria-label=メニューを開く>
<span class=hamburger></span>
<span class=hamburger></span>
<span class=hamburger></span></button></div></header><style>.site-header{background:var(--card-background);border-bottom:1px solid var(--card-separator-color);position:sticky;top:0;z-index:1000;box-shadow:0 2px 8px rgba(0,0,0,.1)}.header-container{max-width:1200px;margin:0 auto;padding:0 20px;display:flex;align-items:center;justify-content:space-between;height:60px;gap:20px}.header-brand{display:flex;align-items:center;gap:12px;flex-shrink:0}.header-logo-img{width:40px;height:40px;border-radius:50%;object-fit:cover}.header-title{display:flex;flex-direction:column;min-width:0}.site-title{margin:0;font-size:1.3em;font-weight:700;line-height:1}.site-title a{color:var(--card-text-color-main);text-decoration:none;transition:color .2s}.site-title a:hover{color:var(--accent-color)}.site-tagline{font-size:.8em;color:var(--card-text-color-secondary);margin-top:2px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.header-search{flex:1;max-width:400px;margin:0 20px}.search-form{width:100%}.search-wrapper{position:relative;display:flex;align-items:center}.search-input{width:100%;padding:8px 40px 8px 12px;border:1px solid var(--card-separator-color);border-radius:20px;background:var(--body-background);color:var(--card-text-color-main);font-size:.9em;transition:all .2s}.search-input:focus{outline:none;border-color:var(--accent-color);box-shadow:0 0 0 2px var(--accent-color-light)}.search-button{position:absolute;right:8px;background:0 0;border:none;padding:4px;color:var(--card-text-color-tertiary);cursor:pointer;transition:color .2s}.search-button:hover{color:var(--accent-color)}.header-nav{flex-shrink:0}.nav-menu{display:flex;list-style:none;margin:0;padding:0;gap:20px}.nav-item{margin:0}.nav-link{color:var(--card-text-color-main);text-decoration:none;font-weight:500;font-size:.9em;transition:color .2s;white-space:nowrap}.nav-link:hover{color:var(--accent-color)}.mobile-menu-toggle{display:none;flex-direction:column;gap:3px;background:0 0;border:none;padding:8px;cursor:pointer}.hamburger{width:20px;height:2px;background:var(--card-text-color-main);transition:all .3s}@media(max-width:768px){.header-container{padding:0 15px;height:56px}.header-search{order:3;flex:1;margin:0;max-width:none}.header-nav{display:none}.mobile-menu-toggle{display:flex;order:2}.site-tagline{display:none}.site-title{font-size:1.1em}}@media(max-width:480px){.header-container{gap:10px}.header-brand{gap:8px}.header-logo-img{width:32px;height:32px}.site-title{font-size:1em}}</style><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=メニューを開く・閉じる>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><div class=media-sidebar-content></div></aside><style>.left-sidebar-widgets{margin-top:10px;padding:15px}.left-sidebar-widgets .popular-tags-widget{margin-bottom:0}.left-sidebar-widgets .popular-tags-widget .widget-title{font-size:1rem;margin-bottom:15px;color:var(--accent-color);border-bottom:2px solid var(--accent-color);padding-bottom:8px}.media-sidebar-content{margin-top:10px;padding-top:10px}.media-sidebar-content .widget{margin-bottom:20px;padding:12px;background:var(--body-background);border-radius:6px;border:1px solid var(--card-separator-color)}.media-sidebar-content .widget .widget-title{font-size:.95em;margin-bottom:12px;color:var(--accent-color);border-bottom:1px solid var(--accent-color);padding-bottom:6px}.media-sidebar-content .topic-section{margin-bottom:15px}.media-sidebar-content .media-section{margin-bottom:15px;padding-bottom:12px}.media-sidebar-content .topic-title,.media-sidebar-content .media-title{font-size:.9em;margin-bottom:8px}.media-sidebar-content .topic-item,.media-sidebar-content .featured-item{margin-bottom:8px;padding:6px}.media-sidebar-content .trend-tag,.media-sidebar-content .guide-item,.media-sidebar-content .topic-category{padding:6px 8px}.media-sidebar-content .breaking-item{padding:8px}.media-sidebar-content .pickup-item{padding:8px}@media(max-width:1024px){.media-sidebar-content{display:none}}@media(min-width:1024px){.left-sidebar{width:300px;min-width:300px}}</style><aside class="sidebar right-sidebar sticky"><section class="widget ad-widget"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg></div><h2 class="widget-title section-title">スポンサーリンク</h2><div class=widget-content><div class="ad-container ad-sidebar"><a href="//af.moshimo.com/af/c/click?a_id=5220188&p_id=6430&pc_id=18166&pl_id=82494" rel=nofollow referrerpolicy=no-referrer-when-downgrade attributionsrc><img src=//image.moshimo.com/af-img/5467/000000082494.png width=499 height=1080 style=border:none></a><img src="//i.moshimo.com/af/i/impression?a_id=5220188&p_id=6430&pc_id=18166&pl_id=82494" width=1 height=1 style=border:none loading=lazy></div></div></section><style>.ad-widget{margin-bottom:8px;padding:0}.ad-widget .widget-icon{margin-bottom:4px;display:none}.ad-widget .widget-title{margin-bottom:6px;font-size:.8em;text-align:center}.ad-container{display:flex;justify-content:center;align-items:center;min-height:auto;padding:0;margin:0}.ad-sidebar{width:100%;max-width:320px;margin:0 auto;line-height:0}.ad-sidebar img{max-width:100%;height:auto;border-radius:6px;display:block;margin:0;padding:0}@media(max-width:768px){.ad-container{max-width:100%}.ad-sidebar{max-width:100%}}[data-scheme=dark] .ad-placeholder{background:var(--card-background)!important;border-color:var(--card-separator-color)!important;color:var(--card-text-color-secondary)!important}</style><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">目次</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#prologue-everyone-uses-19216810-so-its-safe>Prologue: &ldquo;Everyone Uses 192.168.1.0, So It&rsquo;s Safe&rdquo;</a></li><li><a href=#chapter-1-the-illusion-of-standard-19216810>Chapter 1: The Illusion of &ldquo;Standard&rdquo; 192.168.1.0</a><ol><li><a href=#site-by-site-network-configuration-at-the-time>Site-by-Site Network Configuration at the Time</a></li><li><a href=#august-20-vpn-integration-project-launch>August 20: VPN Integration Project Launch</a></li><li><a href=#initial-setup-work-smooth-start>Initial Setup Work: Smooth Start</a></li></ol></li><li><a href=#chapter-2-august-22---beginning-of-hell>Chapter 2: August 22 - Beginning of Hell</a><ol><li><a href=#900-am-emergency-call-from-osaka-branch>9:00 AM: Emergency Call from Osaka Branch</a></li><li><a href=#1100-am-the-core-problem-becomes-visible>11:00 AM: The Core Problem Becomes Visible</a></li><li><a href=#200-pm-major-chaos-after-all-branch-connections>2:00 PM: Major Chaos After All Branch Connections</a></li><li><a href=#400-pm-severe-business-impact>4:00 PM: Severe Business Impact</a></li><li><a href=#600-pm-emergency-response-headquarters-established>6:00 PM: Emergency Response Headquarters Established</a></li></ol></li><li><a href=#chapter-3-root-cause-analysis-and-emergency-measures>Chapter 3: Root Cause Analysis and Emergency Measures</a><ol><li><a href=#understanding-the-routing-conflict-mechanism>Understanding the Routing Conflict Mechanism</a></li><li><a href=#august-22-night-emergency-countermeasures>August 22 night: Emergency Countermeasures</a></li><li><a href=#august-23-data-damage-investigation>August 23: Data Damage Investigation</a></li></ol></li><li><a href=#chapter-4-72-hour-emergency-ip-address-redesign>Chapter 4: 72-Hour Emergency IP Address Redesign</a><ol><li><a href=#august-23-night-new-ip-address-system-design>August 23 night: New IP Address System Design</a></li><li><a href=#august-24-phased-migration-plan>August 24: Phased Migration Plan</a></li><li><a href=#august-24-night25-phase-1-implementation>August 24 night~25: Phase 1 Implementation</a></li><li><a href=#august-25-morning-phase-1-connection-test>August 25 morning: Phase 1 Connection Test</a></li><li><a href=#august-25-26-phase-2-3-remaining-sites-migration>August 25-26: Phase 2-3 Remaining Sites Migration</a></li></ol></li><li><a href=#chapter-5-integrated-network-completion-and-verification>Chapter 5: Integrated Network Completion and Verification</a><ol><li><a href=#august-26-night-all-site-vpn-reconnection>August 26 night: All-Site VPN Reconnection</a></li><li><a href=#final-connection-test-perfect-operation>Final Connection Test: Perfect Operation</a></li></ol></li><li><a href=#chapter-6-operations-start-and-unexpected-benefits>Chapter 6: Operations Start and Unexpected Benefits</a><ol><li><a href=#august-27-business-operations-resume>August 27: Business Operations Resume</a></li><li><a href=#unexpected-side-effects>Unexpected Side Effects</a><ol><li><a href=#1-significant-security-improvement>1. Significant Security Improvement</a></li><li><a href=#2-network-monitoring-efficiency>2. Network Monitoring Efficiency</a></li><li><a href=#3-clear-failure-impact-scope>3. Clear Failure Impact Scope</a></li></ol></li><li><a href=#6-months-later-quantitative-effects>6 Months Later Quantitative Effects</a></li></ol></li><li><a href=#chapter-7-lessons-learned-and-recommendations-for-other-companies>Chapter 7: Lessons Learned and Recommendations for Other Companies</a><ol><li><a href=#important-principles-of-ip-address-design>Important Principles of IP Address Design</a><ol><li><a href=#1-everyone-uses-it-is-a-danger-signal>1. &ldquo;Everyone Uses It&rdquo; is a Danger Signal</a></li><li><a href=#2-absolute-importance-of-hierarchical-design>2. Absolute Importance of Hierarchical Design</a></li><li><a href=#3-correct-understanding-of-reserved-addresses>3. Correct Understanding of Reserved Addresses</a></li></ol></li><li><a href=#practical-ip-address-design-procedure>Practical IP Address Design Procedure</a><ol><li><a href=#step-1-requirements-analysis>Step 1: Requirements Analysis</a></li><li><a href=#step-2-ip-address-range-selection>Step 2: IP Address Range Selection</a></li><li><a href=#step-3-hierarchical-design-implementation>Step 3: Hierarchical Design Implementation</a></li></ol></li><li><a href=#migration-work-best-practices>Migration Work Best Practices</a><ol><li><a href=#phased-migration-strategy>Phased Migration Strategy</a></li></ol></li></ol></li><li><a href=#summary-ip-address-design-truth-learned-from-320000-and-72-hours>Summary: IP Address Design Truth Learned from $320,000 and 72 Hours</a><ol><li><a href=#project-total-cost>Project Total Cost</a></li><li><a href=#most-important-lessons>Most Important Lessons</a><ol><li><a href=#1-ip-addresses-are-not-just-numbers>1. IP Addresses Are Not &ldquo;Just Numbers&rdquo;</a></li><li><a href=#2-danger-of-blind-following-of-standards>2. Danger of Blind Following of &ldquo;Standards&rdquo;</a></li><li><a href=#3-absolute-value-of-hierarchical-design>3. Absolute Value of Hierarchical Design</a></li></ol></li><li><a href=#future-outlook-ip-address-design-20>Future Outlook: IP Address Design 2.0</a></li><li><a href=#finally-to-avoid-making-the-same-mistakes>Finally: To Avoid Making the Same Mistakes</a></li></ol></li></ol></nav></div></section><section class="widget tagCloud"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">カテゴリ</h2><div class=tagCloud-tags><a href=/categories/%E3%83%9E%E3%82%A4%E3%83%96%E3%83%AD%E3%82%B0/ class=font_size_68>マイブログ
</a><a href=/categories/%E6%97%85%E8%A1%8C%E8%A8%98/ class=font_size_12>旅行記
</a><a href=/categories/%E6%9C%80%E6%96%B0%E8%A8%98%E4%BA%8B/ class=font_size_11>最新記事
</a><a href=/categories/ai%E3%83%84%E3%83%BC%E3%83%AB/ class=font_size_2>AI・ツール
</a><a href=/categories/%E5%8A%B9%E7%8E%87%E5%8C%96/ class=font_size_2>効率化
</a><a href=/categories/%E9%96%8B%E7%99%BA%E9%81%8B%E7%94%A8/ class=font_size_2>開発・運用
</a><a href=/categories/ai-tools/ class=font_size_1>AI Tools
</a><a href=/categories/architecture/ class=font_size_1>Architecture
</a><a href=/categories/cloud/infra/ class=font_size_1>Cloud/Infra
</a><a href=/categories/development-operations/ class=font_size_1>Development Operations</a></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/%E3%83%9E%E3%82%A4%E3%83%96%E3%83%AD%E3%82%B0/>マイブログ</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/post/ip-address-hell-192.168.1.0-duplicate-design-causes-company-wide-network-chaos-72-hour-emergency-redesign-battle/>[IP Address Hell] 192.168.1.0 Duplicate Design Causes Company-wide Network Chaos → 72-Hour Emergency Redesign Battle</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>2025年9月14日</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>読了時間: 8分</time></div></footer></div></header><section class=article-content><h1 id=ip-address-hell-19216810-duplicate-design-causes-company-wide-network-chaos--72-hour-emergency-redesign-battle>[IP Address Hell] 192.168.1.0 Duplicate Design Causes Company-wide Network Chaos → 72-Hour Emergency Redesign Battle</h1><h2 id=prologue-everyone-uses-19216810-so-its-safe>Prologue: &ldquo;Everyone Uses 192.168.1.0, So It&rsquo;s Safe&rdquo;</h2><p><strong>Tuesday, August 20, 2025, 10:00 AM</strong></p><p>&ldquo;IP address design? Just use 192.168.1.0 and you can&rsquo;t go wrong. It&rsquo;s the standard address everyone uses.&rdquo;</p><p>At the company-wide network integration project planning meeting, I answered casually. Little did I know that this &ldquo;everyone uses it&rdquo; would trigger a company-wide disaster&mldr;</p><p>This is the record of 72 hours of hell caused by ignorance about IP address design.</p><h2 id=chapter-1-the-illusion-of-standard-19216810>Chapter 1: The Illusion of &ldquo;Standard&rdquo; 192.168.1.0</h2><h3 id=site-by-site-network-configuration-at-the-time>Site-by-Site Network Configuration at the Time</h3><p><strong>Each Site Network as of June 2025</strong></p><p>Due to rapid growth, our company had expanded to 5 sites nationwide. Each site&rsquo;s network administrator had built systems &ldquo;independently&rdquo; resulting in&mldr;</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Head Office (Tokyo):
</span></span><span class=line><span class=cl>├─ Network: 192.168.1.0/24
</span></span><span class=line><span class=cl>├─ Gateway: 192.168.1.1
</span></span><span class=line><span class=cl>├─ DHCP Range: 192.168.1.100-200
</span></span><span class=line><span class=cl>├─ Servers: 192.168.1.10-50
</span></span><span class=line><span class=cl>└─ Employee PCs: 120 units
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Osaka Branch:
</span></span><span class=line><span class=cl>├─ Network: 192.168.1.0/24  ← Same!
</span></span><span class=line><span class=cl>├─ Gateway: 192.168.1.1     ← Same!
</span></span><span class=line><span class=cl>├─ DHCP Range: 192.168.1.100-200  ← Same!
</span></span><span class=line><span class=cl>├─ Servers: 192.168.1.10-50    ← Same!
</span></span><span class=line><span class=cl>└─ Employee PCs: 80 units
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Nagoya Branch:
</span></span><span class=line><span class=cl>├─ Network: 192.168.1.0/24  ← Same!
</span></span><span class=line><span class=cl>├─ Gateway: 192.168.1.1     ← Same!
</span></span><span class=line><span class=cl>├─ DHCP Range: 192.168.1.100-200  ← Same!
</span></span><span class=line><span class=cl>├─ Servers: 192.168.1.10-50    ← Same!
</span></span><span class=line><span class=cl>└─ Employee PCs: 45 units
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Fukuoka Branch:
</span></span><span class=line><span class=cl>├─ Network: 192.168.1.0/24  ← Same!
</span></span><span class=line><span class=cl>├─ Gateway: 192.168.1.1     ← Same!
</span></span><span class=line><span class=cl>├─ DHCP Range: 192.168.1.100-200  ← Same!
</span></span><span class=line><span class=cl>├─ Servers: 192.168.1.10-50    ← Same!
</span></span><span class=line><span class=cl>└─ Employee PCs: 30 units
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Sapporo Branch:
</span></span><span class=line><span class=cl>├─ Network: 192.168.1.0/24  ← Same!
</span></span><span class=line><span class=cl>├─ Gateway: 192.168.1.1     ← Same!
</span></span><span class=line><span class=cl>├─ DHCP Range: 192.168.1.100-200  ← Same!
</span></span><span class=line><span class=cl>├─ Servers: 192.168.1.10-50    ← Same!
</span></span><span class=line><span class=cl>└─ Employee PCs: 25 units
</span></span></code></pre></td></tr></table></div></div><p>&ldquo;All sites have the same configuration, so there&rsquo;s consistency. Good.&rdquo;</p><h3 id=august-20-vpn-integration-project-launch>August 20: VPN Integration Project Launch</h3><p><strong>Project Background</strong></p><p>Following the COVID-19 pandemic, to promote remote work and digital transformation, we decided to connect all sites via VPN to build an integrated network environment.</p><p><strong>Planned Post-Integration Configuration:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>                 [Internet]
</span></span><span class=line><span class=cl>                       ↓
</span></span><span class=line><span class=cl>            [Head Office Main Firewall]
</span></span><span class=line><span class=cl>                       ↓
</span></span><span class=line><span class=cl>              [Head Office LAN: 192.168.1.0/24]
</span></span><span class=line><span class=cl>                       ↓
</span></span><span class=line><span class=cl>           ┌─────────[VPN Hub]─────────┐
</span></span><span class=line><span class=cl>           ↓                          ↓
</span></span><span class=line><span class=cl>    [Osaka Branch VPN]              [Nagoya Branch VPN]
</span></span><span class=line><span class=cl>    192.168.1.0/24            192.168.1.0/24
</span></span><span class=line><span class=cl>           ↓                          ↓
</span></span><span class=line><span class=cl>    [Fukuoka Branch VPN]              [Sapporo Branch VPN]
</span></span><span class=line><span class=cl>    192.168.1.0/24            192.168.1.0/24
</span></span></code></pre></td></tr></table></div></div><p>&ldquo;Now we can access head office servers from anywhere! Perfect!&rdquo;</p><h3 id=initial-setup-work-smooth-start>Initial Setup Work: Smooth Start</h3><p><strong>August 21: VPN Connection Construction Begins</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Head office VPN server configuration</span>
</span></span><span class=line><span class=cl><span class=c1># /etc/openvpn/server.conf</span>
</span></span><span class=line><span class=cl>port <span class=m>1194</span>
</span></span><span class=line><span class=cl>proto udp
</span></span><span class=line><span class=cl>dev tun
</span></span><span class=line><span class=cl>server 192.168.1.0 255.255.255.0  <span class=c1># Same segment as head office</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Osaka branch VPN configuration  </span>
</span></span><span class=line><span class=cl><span class=c1># /etc/openvpn/client.conf</span>
</span></span><span class=line><span class=cl>remote tokyo-vpn.company.com <span class=m>1194</span>
</span></span><span class=line><span class=cl>dev tun
</span></span></code></pre></td></tr></table></div></div><p><strong>First connection test (August 21 afternoon):</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Connection test from Osaka branch</span>
</span></span><span class=line><span class=cl>ping 192.168.1.10  <span class=c1># Head office server</span>
</span></span><span class=line><span class=cl><span class=c1># PING 192.168.1.10: 56 data bytes</span>
</span></span><span class=line><span class=cl><span class=c1># 64 bytes from 192.168.1.10: icmp_seq=0 ttl=64 time=15.2 ms</span>
</span></span><span class=line><span class=cl><span class=c1># 64 bytes from 192.168.1.10: icmp_seq=1 ttl=64 time=14.8 ms</span>
</span></span></code></pre></td></tr></table></div></div><p>&ldquo;Great! It connected! That was easy!&rdquo;</p><h2 id=chapter-2-august-22---beginning-of-hell>Chapter 2: August 22 - Beginning of Hell</h2><h3 id=900-am-emergency-call-from-osaka-branch>9:00 AM: Emergency Call from Osaka Branch</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Osaka Branch IT Staff: &#34;Something strange is happening&#34;
</span></span><span class=line><span class=cl>Me: &#34;What&#39;s wrong?&#34;
</span></span><span class=line><span class=cl>Osaka Branch IT Staff: &#34;Sometimes we can access head office file server, sometimes we can&#39;t&#34;
</span></span><span class=line><span class=cl>Me: &#34;Is the VPN connection stable?&#34;
</span></span><span class=line><span class=cl>Osaka Branch IT Staff: &#34;The connection is stable, but sometimes Osaka&#39;s file server appears instead&#34;
</span></span><span class=line><span class=cl>Me: &#34;Huh?&#34;
</span></span></code></pre></td></tr></table></div></div><h3 id=1100-am-the-core-problem-becomes-visible>11:00 AM: The Core Problem Becomes Visible</h3><p><strong>Routing table check:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Head office routing table</span>
</span></span><span class=line><span class=cl>route -n
</span></span><span class=line><span class=cl>Destination     Gateway         Genmask         Iface
</span></span><span class=line><span class=cl>192.168.1.0     0.0.0.0         255.255.255.0   eth0     <span class=c1># Local</span>
</span></span><span class=line><span class=cl>192.168.1.0     10.8.0.6        255.255.255.0   tun0     <span class=c1># VPN (Osaka)</span>
</span></span><span class=line><span class=cl>192.168.1.0     10.8.0.10       255.255.255.0   tun0     <span class=c1># VPN (Nagoya)</span>
</span></span></code></pre></td></tr></table></div></div><p>&ldquo;Ah&mldr; multiple routes to the same destination&mldr;&rdquo;</p><p><strong>Packet capture revealed the horrifying truth:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Access to 192.168.1.10 (file server)</span>
</span></span><span class=line><span class=cl>tcpdump -i any host 192.168.1.10
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Results:</span>
</span></span><span class=line><span class=cl><span class=c1># 09:15:23 Osaka PC → 192.168.1.10 → Osaka file server</span>
</span></span><span class=line><span class=cl><span class=c1># 09:15:45 Osaka PC → 192.168.1.10 → Head office file server  </span>
</span></span><span class=line><span class=cl><span class=c1># 09:16:12 Osaka PC → 192.168.1.10 → Nagoya file server</span>
</span></span></code></pre></td></tr></table></div></div><p>&ldquo;It&rsquo;s randomly connecting to different servers&mldr; this is bad.&rdquo;</p><h3 id=200-pm-major-chaos-after-all-branch-connections>2:00 PM: Major Chaos After All Branch Connections</h3><p><strong>Situation after completing VPN connections to all sites:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Routing table hell:
</span></span><span class=line><span class=cl>Destination     Gateway         Iface      Priority
</span></span><span class=line><span class=cl>192.168.1.0     0.0.0.0        eth0       0        # Head office local
</span></span><span class=line><span class=cl>192.168.1.0     10.8.0.6       tun0       0        # Osaka VPN  
</span></span><span class=line><span class=cl>192.168.1.0     10.8.0.10      tun0       0        # Nagoya VPN
</span></span><span class=line><span class=cl>192.168.1.0     10.8.0.14      tun0       0        # Fukuoka VPN
</span></span><span class=line><span class=cl>192.168.1.0     10.8.0.18      tun0       0        # Sapporo VPN
</span></span></code></pre></td></tr></table></div></div><p><strong>5 routes competing with same priority</strong></p><h3 id=400-pm-severe-business-impact>4:00 PM: Severe Business Impact</h3><p><strong>Reports of confusion from each site:</strong></p><p><strong>Osaka Branch:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&#34;Thought I saved a file, but it was saved to Nagoya branch server&#34;
</span></span><span class=line><span class=cl>&#34;Tried to access accounting data, but Fukuoka&#39;s data appeared&#34;
</span></span><span class=line><span class=cl>&#34;Can&#39;t find printer (referencing Sapporo printer)&#34;
</span></span></code></pre></td></tr></table></div></div><p><strong>Nagoya Branch:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&#34;Customer database showing Osaka inventory data instead&#34;  
</span></span><span class=line><span class=cl>&#34;Mail server connection intermittent&#34;
</span></span><span class=line><span class=cl>&#34;Company chat mixing with people from other branches&#34;
</span></span></code></pre></td></tr></table></div></div><p><strong>Fukuoka Branch:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&#34;Important proposal document being simultaneously edited by head office person, causing conflicts&#34;
</span></span><span class=line><span class=cl>&#34;Timecard system mixing employee data from other branches&#34;
</span></span></code></pre></td></tr></table></div></div><p><strong>Sapporo Branch:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&#34;Inventory management system contaminated with Fukuoka products&#34;
</span></span><span class=line><span class=cl>&#34;Employee list in attendance system completely messed up&#34;
</span></span></code></pre></td></tr></table></div></div><h3 id=600-pm-emergency-response-headquarters-established>6:00 PM: Emergency Response Headquarters Established</h3><p><strong>Damage situation summary:</strong></p><ul><li><strong>Data integrity</strong>: Each site&rsquo;s server contaminated with other sites&rsquo; data</li><li><strong>Security</strong>: Unintended access to other sites&rsquo; confidential data</li><li><strong>Business continuity</strong>: All core systems operating unstably</li><li><strong>Reliability</strong>: Unknown where saved files are located</li></ul><p>&ldquo;The entire company&rsquo;s foundation systems have collapsed&mldr;&rdquo;</p><h2 id=chapter-3-root-cause-analysis-and-emergency-measures>Chapter 3: Root Cause Analysis and Emergency Measures</h2><h3 id=understanding-the-routing-conflict-mechanism>Understanding the Routing Conflict Mechanism</h3><p><strong>Problem essence: IP address space overlap</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Previously (independent sites):
</span></span><span class=line><span class=cl>Head office: [192.168.1.10] → Head office file server ✓
</span></span><span class=line><span class=cl>Osaka: [192.168.1.10] → Osaka file server ✓
</span></span><span class=line><span class=cl>Nagoya: [192.168.1.10] → Nagoya file server ✓
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>After VPN integration:
</span></span><span class=line><span class=cl>All sites: [192.168.1.10] → ???Which server???
</span></span><span class=line><span class=cl>        ↓Randomly distributed
</span></span><span class=line><span class=cl>    Head office OR Osaka OR Nagoya OR Fukuoka OR Sapporo
</span></span></code></pre></td></tr></table></div></div><p><strong>Routing decision mechanism:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Linux kernel routing decision</span>
</span></span><span class=line><span class=cl><span class=c1># When multiple routes to same destination exist:</span>
</span></span><span class=line><span class=cl>1. Decide by metric value <span class=o>(</span>priority<span class=o>)</span>
</span></span><span class=line><span class=cl>2. If same metric, load balance <span class=o>(</span>Round Robin<span class=o>)</span>
</span></span><span class=line><span class=cl>3. Result: Different server connection each access
</span></span></code></pre></td></tr></table></div></div><h3 id=august-22-night-emergency-countermeasures>August 22 night: Emergency Countermeasures</h3><p><strong>Immediately cut VPN connections:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Stop all branch VPNs</span>
</span></span><span class=line><span class=cl>systemctl stop openvpn@client-osaka
</span></span><span class=line><span class=cl>systemctl stop openvpn@client-nagoya  
</span></span><span class=line><span class=cl>systemctl stop openvpn@client-fukuoka
</span></span><span class=line><span class=cl>systemctl stop openvpn@client-sapporo
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Completely block inter-site communication</span>
</span></span><span class=line><span class=cl>iptables -A FORWARD -s 10.8.0.0/24 -j DROP
</span></span></code></pre></td></tr></table></div></div><p><strong>Emergency notice to all sites:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Subject: [EMERGENCY] VPN Integration Project Temporary Suspension Notice
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>All employees,
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Serious network communication problems occurred due to VPN integration started today.
</span></span><span class=line><span class=cl>To ensure data integrity, we are implementing the following measures:
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>1. Emergency stop of all inter-site VPN connections
</span></span><span class=line><span class=cl>2. Continue business operations with each site&#39;s local network only
</span></span><span class=line><span class=cl>3. Temporarily stop inter-site data synchronization
</span></span><span class=line><span class=cl>4. Estimated 72 hours to recovery
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>We apologize for the inconvenience.
</span></span></code></pre></td></tr></table></div></div><h3 id=august-23-data-damage-investigation>August 23: Data Damage Investigation</h3><p><strong>Database integrity check at each site:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- Customer database duplication check
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=n>customer_id</span><span class=p>,</span><span class=w> </span><span class=k>COUNT</span><span class=p>(</span><span class=o>*</span><span class=p>)</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>customers</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>customer_id</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>HAVING</span><span class=w> </span><span class=k>COUNT</span><span class=p>(</span><span class=o>*</span><span class=p>)</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>1</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Results</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Head</span><span class=w> </span><span class=n>office</span><span class=w> </span><span class=n>DB</span><span class=p>:</span><span class=w> </span><span class=mi>2</span><span class=p>,</span><span class=mi>347</span><span class=w> </span><span class=n>duplicate</span><span class=w> </span><span class=n>records</span><span class=w> </span><span class=p>(</span><span class=n>other</span><span class=w> </span><span class=n>sites</span><span class=s1>&#39; data contamination)
</span></span></span><span class=line><span class=cl><span class=s1>Osaka DB: 1,892 duplicate records
</span></span></span><span class=line><span class=cl><span class=s1>Nagoya DB: 1,234 duplicate records  
</span></span></span><span class=line><span class=cl><span class=s1>Fukuoka DB: 897 duplicate records
</span></span></span><span class=line><span class=cl><span class=s1>Sapporo DB: 654 duplicate records
</span></span></span></code></pre></td></tr></table></div></div><p><strong>File server contamination situation:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Inter-site file contamination investigation</span>
</span></span><span class=line><span class=cl>find /shared -name <span class=s2>&#34;*.docx&#34;</span> -exec grep -l <span class=s2>&#34;Osaka&#34;</span> <span class=o>{}</span> <span class=se>\;</span> <span class=p>|</span> wc -l
</span></span><span class=line><span class=cl><span class=c1># Head office server with Osaka-specific files: 156 files</span>
</span></span><span class=line><span class=cl><span class=c1># Osaka server with head office files: 203 files</span>
</span></span><span class=line><span class=cl><span class=c1># Nagoya server with other sites&#39; files: 89 files</span>
</span></span></code></pre></td></tr></table></div></div><p>&ldquo;Data is completely jumbled&mldr; this is serious.&rdquo;</p><h2 id=chapter-4-72-hour-emergency-ip-address-redesign>Chapter 4: 72-Hour Emergency IP Address Redesign</h2><h3 id=august-23-night-new-ip-address-system-design>August 23 night: New IP Address System Design</h3><p><strong>Design principle review:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>Failed design</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>Problem</span><span class=p>:</span><span class=w> </span><span class=l>All sites using same IP address range</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>Cause</span><span class=p>:</span><span class=w> </span><span class=l>Lack of understanding of IP address conflicts</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>Result</span><span class=p>:</span><span class=w> </span><span class=l>Routing conflicts &amp; data contamination</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>New design principles</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=m>1</span><span class=l>. Hierarchical IP address system</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=m>2</span><span class=l>. Complete site separation</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=m>3</span><span class=l>. Ensure future scalability</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=m>4</span><span class=l>. Management ease</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p><strong>New IP address design:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Hierarchical design: 10.{site}.{department}.{host}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Site code definition:
</span></span><span class=line><span class=cl>├─ Head Office (Tokyo): 10.1.x.x/16
</span></span><span class=line><span class=cl>├─ Osaka Branch: 10.2.x.x/16  
</span></span><span class=line><span class=cl>├─ Nagoya Branch: 10.3.x.x/16
</span></span><span class=line><span class=cl>├─ Fukuoka Branch: 10.4.x.x/16
</span></span><span class=line><span class=cl>└─ Sapporo Branch: 10.5.x.x/16
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Department code (common across sites):
</span></span><span class=line><span class=cl>├─ General departments: x.1.x/24
</span></span><span class=line><span class=cl>├─ Accounting department: x.2.x/24
</span></span><span class=line><span class=cl>├─ Development department: x.3.x/24
</span></span><span class=line><span class=cl>├─ Servers: x.99.x/24
</span></span><span class=line><span class=cl>└─ Network equipment: x.254.x/24
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Examples:
</span></span><span class=line><span class=cl>Head office accounting: 10.1.2.0/24
</span></span><span class=line><span class=cl>Osaka development: 10.2.3.0/24  
</span></span><span class=line><span class=cl>Nagoya servers: 10.3.99.0/24
</span></span></code></pre></td></tr></table></div></div><h3 id=august-24-phased-migration-plan>August 24: Phased Migration Plan</h3><p><strong>Migration phase design:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>Phase_1_Design</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>Duration</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;24 hours&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>Target</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;Head office &amp; Osaka branch&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>Method</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;Weekend work forced switchover&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>Head office migration</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>From</span><span class=p>:</span><span class=w> </span><span class=m>192.168.1.0</span><span class=l>/24</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>To</span><span class=p>:</span><span class=w> </span><span class=m>10.1.0.0</span><span class=l>/16</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>Osaka migration</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>From</span><span class=p>:</span><span class=w> </span><span class=m>192.168.1.0</span><span class=l>/24</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>To</span><span class=p>:</span><span class=w> </span><span class=m>10.2.0.0</span><span class=l>/16</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>Phase_2_Implementation</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>Duration</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;24 hours&#34;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>Target</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;Nagoya &amp; Fukuoka branches&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>Phase_3_Final</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>Duration</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;24 hours&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>Target</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;Sapporo branch &amp; all-site VPN connection&#34;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=august-24-night25-phase-1-implementation>August 24 night~25: Phase 1 Implementation</h3><p><strong>Head office IP address change work (midnight work):</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 1. DHCP server configuration change</span>
</span></span><span class=line><span class=cl><span class=c1># /etc/dhcp/dhcpd.conf</span>
</span></span><span class=line><span class=cl>subnet 10.1.1.0 netmask 255.255.255.0 <span class=o>{</span>
</span></span><span class=line><span class=cl>    range 10.1.1.100 10.1.1.200<span class=p>;</span>
</span></span><span class=line><span class=cl>    option routers 10.1.1.1<span class=p>;</span>
</span></span><span class=line><span class=cl>    option domain-name-servers 10.1.1.2<span class=p>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 2. Server static IP change</span>
</span></span><span class=line><span class=cl><span class=c1># File server: 192.168.1.10 → 10.1.99.10</span>
</span></span><span class=line><span class=cl><span class=c1># Mail server: 192.168.1.11 → 10.1.99.11  </span>
</span></span><span class=line><span class=cl><span class=c1># DB server: 192.168.1.12 → 10.1.99.12</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 3. Client PC restart (DHCP automatic acquisition)</span>
</span></span><span class=line><span class=cl><span class=k>for</span> pc in tokyo-pc-<span class=o>{</span>001..120<span class=o>}</span><span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>    ssh admin@<span class=nv>$pc</span> <span class=s2>&#34;sudo reboot&#34;</span>
</span></span><span class=line><span class=cl><span class=k>done</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>Osaka branch simultaneous work:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Remote work (coordination with Osaka local IT staff)</span>
</span></span><span class=line><span class=cl><span class=c1># DHCP configuration change</span>
</span></span><span class=line><span class=cl>subnet 10.2.1.0 netmask 255.255.255.0 <span class=o>{</span>
</span></span><span class=line><span class=cl>    range 10.2.1.100 10.2.1.200<span class=p>;</span>
</span></span><span class=line><span class=cl>    option routers 10.2.1.1<span class=p>;</span>
</span></span><span class=line><span class=cl>    option domain-name-servers 10.2.1.2<span class=p>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Server IP change</span>
</span></span><span class=line><span class=cl><span class=c1># File server: 192.168.1.10 → 10.2.99.10</span>
</span></span><span class=line><span class=cl><span class=c1># Print server: 192.168.1.11 → 10.2.99.11</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=august-25-morning-phase-1-connection-test>August 25 morning: Phase 1 Connection Test</h3><p><strong>VPN connection test with new IP addresses:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Head office→Osaka access test</span>
</span></span><span class=line><span class=cl>ping 10.2.99.10  <span class=c1># Osaka file server</span>
</span></span><span class=line><span class=cl><span class=c1># PING 10.2.99.10: 56 data bytes  </span>
</span></span><span class=line><span class=cl><span class=c1># 64 bytes from 10.2.99.10: icmp_seq=0 ttl=64 time=16.3 ms</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Osaka→Head office access test  </span>
</span></span><span class=line><span class=cl>ping 10.1.99.10  <span class=c1># Head office file server</span>
</span></span><span class=line><span class=cl><span class=c1># PING 10.1.99.10: 56 data bytes</span>
</span></span><span class=line><span class=cl><span class=c1># 64 bytes from 10.1.99.10: icmp_seq=0 ttl=64 time=15.8 ms</span>
</span></span></code></pre></td></tr></table></div></div><p>&ldquo;Yes! They can be clearly distinguished now!&rdquo;</p><h3 id=august-25-26-phase-2-3-remaining-sites-migration>August 25-26: Phase 2-3 Remaining Sites Migration</h3><p><strong>Phased migration of Nagoya, Fukuoka, Sapporo:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>Migration results</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>Nagoya Branch</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>Old</span><span class=p>:</span><span class=w> </span><span class=m>192.168.1.0</span><span class=l>/24 </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>New</span><span class=p>:</span><span class=w> </span><span class=m>10.3.0.0</span><span class=l>/16 ✓</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>Fukuoka Branch</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>Old</span><span class=p>:</span><span class=w> </span><span class=m>192.168.1.0</span><span class=l>/24</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>New</span><span class=p>:</span><span class=w> </span><span class=m>10.4.0.0</span><span class=l>/16 ✓</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>Sapporo Branch</span><span class=p>:</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>Old</span><span class=p>:</span><span class=w> </span><span class=m>192.168.1.0</span><span class=l>/24</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>New</span><span class=p>:</span><span class=w> </span><span class=m>10.5.0.0</span><span class=l>/16 ✓</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h2 id=chapter-5-integrated-network-completion-and-verification>Chapter 5: Integrated Network Completion and Verification</h2><h3 id=august-26-night-all-site-vpn-reconnection>August 26 night: All-Site VPN Reconnection</h3><p><strong>New VPN routing configuration:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Head office VPN server configuration</span>
</span></span><span class=line><span class=cl><span class=c1># /etc/openvpn/server.conf</span>
</span></span><span class=line><span class=cl>server 172.16.0.0 255.255.0.0  <span class=c1># VPN segment (conflict avoidance)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Routing configuration</span>
</span></span><span class=line><span class=cl>push <span class=s2>&#34;route 10.1.0.0 255.255.0.0&#34;</span>  <span class=c1># Route to head office</span>
</span></span><span class=line><span class=cl>push <span class=s2>&#34;route 10.2.0.0 255.255.0.0&#34;</span>  <span class=c1># Route to Osaka  </span>
</span></span><span class=line><span class=cl>push <span class=s2>&#34;route 10.3.0.0 255.255.0.0&#34;</span>  <span class=c1># Route to Nagoya</span>
</span></span><span class=line><span class=cl>push <span class=s2>&#34;route 10.4.0.0 255.255.0.0&#34;</span>  <span class=c1># Route to Fukuoka</span>
</span></span><span class=line><span class=cl>push <span class=s2>&#34;route 10.5.0.0 255.255.0.0&#34;</span>  <span class=c1># Route to Sapporo</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Access control from each site</span>
</span></span><span class=line><span class=cl>iptables -A FORWARD -s 10.2.0.0/16 -d 10.1.99.0/24 -j ACCEPT  <span class=c1># Osaka→Head office servers</span>
</span></span><span class=line><span class=cl>iptables -A FORWARD -s 10.3.0.0/16 -d 10.1.99.0/24 -j ACCEPT  <span class=c1># Nagoya→Head office servers</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=final-connection-test-perfect-operation>Final Connection Test: Perfect Operation</h3><p><strong>Integrated test from each site (August 26 late night):</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Test from Osaka branch</span>
</span></span><span class=line><span class=cl>ping 10.1.99.10  <span class=c1># Head office file server ✓</span>
</span></span><span class=line><span class=cl>ping 10.3.99.10  <span class=c1># Nagoya file server ✓</span>
</span></span><span class=line><span class=cl>ping 10.4.99.10  <span class=c1># Fukuoka file server ✓  </span>
</span></span><span class=line><span class=cl>ping 10.5.99.10  <span class=c1># Sapporo file server ✓</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># File sharing test</span>
</span></span><span class=line><span class=cl>mount -t cifs //10.1.99.10/shared /mnt/tokyo-share ✓
</span></span><span class=line><span class=cl>mount -t cifs //10.3.99.10/shared /mnt/nagoya-share ✓
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Database connection test</span>
</span></span><span class=line><span class=cl>mysql -h 10.1.99.12 -u osaka_user -p company_db ✓
</span></span></code></pre></td></tr></table></div></div><p><strong>Routing table confirmation:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>route -n
</span></span><span class=line><span class=cl>Destination     Gateway         Genmask         Iface
</span></span><span class=line><span class=cl>10.1.0.0        172.16.0.1      255.255.0.0     tun0    <span class=c1># Head office</span>
</span></span><span class=line><span class=cl>10.2.0.0        0.0.0.0         255.255.0.0     eth0    <span class=c1># Osaka (self)</span>
</span></span><span class=line><span class=cl>10.3.0.0        172.16.0.1      255.255.0.0     tun0    <span class=c1># Nagoya</span>
</span></span><span class=line><span class=cl>10.4.0.0        172.16.0.1      255.255.0.0     tun0    <span class=c1># Fukuoka  </span>
</span></span><span class=line><span class=cl>10.5.0.0        172.16.0.1      255.255.0.0     tun0    <span class=c1># Sapporo</span>
</span></span></code></pre></td></tr></table></div></div><p>&ldquo;Perfect! Each site is clearly distinguished!&rdquo;</p><h2 id=chapter-6-operations-start-and-unexpected-benefits>Chapter 6: Operations Start and Unexpected Benefits</h2><h3 id=august-27-business-operations-resume>August 27: Business Operations Resume</h3><p><strong>Reports from each site:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Head office: &#34;Can clearly access all sites&#39; file servers&#34;
</span></span><span class=line><span class=cl>Osaka: &#34;Customer data contamination resolved, safe access&#34;
</span></span><span class=line><span class=cl>Nagoya: &#34;Printers also recognize correct site ones&#34;
</span></span><span class=line><span class=cl>Fukuoka: &#34;Inventory system working normally, can also reference other sites&#39; data&#34;
</span></span><span class=line><span class=cl>Sapporo: &#34;Attendance system stable, company-wide integration features also working&#34;
</span></span></code></pre></td></tr></table></div></div><h3 id=unexpected-side-effects>Unexpected Side Effects</h3><h4 id=1-significant-security-improvement>1. Significant Security Improvement</h4><p><strong>IP address-based access control now possible:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Site-based access control rules</span>
</span></span><span class=line><span class=cl><span class=c1># Accounting system accessible only from head office and Osaka</span>
</span></span><span class=line><span class=cl>iptables -A FORWARD -s 10.1.2.0/24 -d 10.1.99.13 -j ACCEPT  <span class=c1># Head office accounting→Accounting server</span>
</span></span><span class=line><span class=cl>iptables -A FORWARD -s 10.2.2.0/24 -d 10.1.99.13 -j ACCEPT  <span class=c1># Osaka accounting→Accounting server</span>
</span></span><span class=line><span class=cl>iptables -A FORWARD -s 0.0.0.0/0 -d 10.1.99.13 -j DROP      <span class=c1># Others denied</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Development environment accessible only to development departments</span>
</span></span><span class=line><span class=cl>iptables -A FORWARD -s 10.1.3.0/24 -d 10.1.99.15 -j ACCEPT  <span class=c1># Head office dev→Dev server</span>
</span></span><span class=line><span class=cl>iptables -A FORWARD -s 10.2.3.0/24 -d 10.1.99.15 -j ACCEPT  <span class=c1># Osaka dev→Dev server</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=2-network-monitoring-efficiency>2. Network Monitoring Efficiency</h4><p><strong>Site-based traffic analysis now possible:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Network monitoring script</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>analyze_traffic</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>traffic_by_location</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;Head Office&#39;</span><span class=p>:</span> <span class=n>monitor_subnet</span><span class=p>(</span><span class=s1>&#39;10.1.0.0/16&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;Osaka&#39;</span><span class=p>:</span> <span class=n>monitor_subnet</span><span class=p>(</span><span class=s1>&#39;10.2.0.0/16&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;Nagoya&#39;</span><span class=p>:</span> <span class=n>monitor_subnet</span><span class=p>(</span><span class=s1>&#39;10.3.0.0/16&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;Fukuoka&#39;</span><span class=p>:</span> <span class=n>monitor_subnet</span><span class=p>(</span><span class=s1>&#39;10.4.0.0/16&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;Sapporo&#39;</span><span class=p>:</span> <span class=n>monitor_subnet</span><span class=p>(</span><span class=s1>&#39;10.5.0.0/16&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>location</span><span class=p>,</span> <span class=n>traffic</span> <span class=ow>in</span> <span class=n>traffic_by_location</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>location</span><span class=si>}</span><span class=s2>: </span><span class=si>{</span><span class=n>traffic</span><span class=p>[</span><span class=s1>&#39;bandwidth&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>Mbps, </span><span class=si>{</span><span class=n>traffic</span><span class=p>[</span><span class=s1>&#39;connections&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2> connections&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=3-clear-failure-impact-scope>3. Clear Failure Impact Scope</h4><p><strong>Site-based failure isolation:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>Before (overlap era)</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>Failure occurs</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;192.168.1.10 failure&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>Impact scope</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;Unknown (all sites possible)&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>Recovery work</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;All sites investigation needed&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>After (hierarchical)</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>Failure occurs</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;10.2.99.10 failure&#34;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>Impact scope</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;Osaka branch only&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>Recovery work</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;Focus on Osaka branch&#34;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=6-months-later-quantitative-effects>6 Months Later Quantitative Effects</h3><p><strong>Network management efficiency:</strong></p><div class=table-wrapper><table><thead><tr><th>Item</th><th>Old Environment</th><th>New Environment</th><th>Improvement</th></tr></thead><tbody><tr><td><strong>Failure identification time</strong></td><td>Average 45 min</td><td>Average 8 min</td><td>82% reduction</td></tr><tr><td><strong>Security incidents</strong></td><td>7/month</td><td>1/month</td><td>86% reduction</td></tr><tr><td><strong>Access control setup time</strong></td><td>Impossible</td><td>10 min</td><td>New feature</td></tr><tr><td><strong>Network monitoring accuracy</strong></td><td>50%</td><td>95%</td><td>90% improvement</td></tr></tbody></table></div><h2 id=chapter-7-lessons-learned-and-recommendations-for-other-companies>Chapter 7: Lessons Learned and Recommendations for Other Companies</h2><h3 id=important-principles-of-ip-address-design>Important Principles of IP Address Design</h3><h4 id=1-everyone-uses-it-is-a-danger-signal>1. &ldquo;Everyone Uses It&rdquo; is a Danger Signal</h4><p><strong>Wrong judgment:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&#34;192.168.1.0 is default so it&#39;s safe&#34;
</span></span><span class=line><span class=cl>&#34;Everyone uses it so no problem&#34;  
</span></span><span class=line><span class=cl>&#34;It&#39;s a standard address so it can&#39;t be wrong&#34;
</span></span></code></pre></td></tr></table></div></div><p><strong>Correct judgment:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&#34;Design considering future scalability is necessary&#34;
</span></span><span class=line><span class=cl>&#34;Conflict avoidance is the top priority&#34;
</span></span><span class=line><span class=cl>&#34;Hierarchical system design is important&#34;
</span></span></code></pre></td></tr></table></div></div><h4 id=2-absolute-importance-of-hierarchical-design>2. Absolute Importance of Hierarchical Design</h4><p><strong>Effective hierarchical design:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>Large enterprise recommended design</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>Format</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;10.{region}.{dept}.{host}&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>Benefits</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>Scalability</span><span class=p>:</span><span class=w> </span><span class=m>256</span><span class=w> </span><span class=l>regions × 256 departments = 65,536 segments</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>Easy understanding</span><span class=p>:</span><span class=w> </span><span class=l>Site &amp; department visible from IP address</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>Management efficiency</span><span class=p>:</span><span class=w> </span><span class=l>Systematic routing &amp; firewall configuration</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>Failure isolation</span><span class=p>:</span><span class=w> </span><span class=l>Instantly identify impact scope</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>Medium enterprise recommended design</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>Format</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;172.16.{site}.{subnet}&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>Range</span><span class=p>:</span><span class=w> </span><span class=m>172.16.0.0</span><span class=l>/12</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>Benefits</span><span class=p>:</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>Appropriate scale</span><span class=p>:</span><span class=w> </span><span class=m>16</span><span class=w> </span><span class=l>sites × 256 segments = 4,096 segments</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>Distinction from home use</span><span class=p>:</span><span class=w> </span><span class=l>Clearly separate from 192.168.x.x</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>Easy future cloud integration</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>Small enterprise recommended design</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>Format</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;192.168.{dept}.{host}&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>Benefits</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>Simple</span><span class=p>:</span><span class=w> </span><span class=l>Easy to understand</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>Department separation</span><span class=p>:</span><span class=w> </span><span class=l>Basic segmentation</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>Low cost</span><span class=p>:</span><span class=w> </span><span class=l>Can handle with existing equipment</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=3-correct-understanding-of-reserved-addresses>3. Correct Understanding of Reserved Addresses</h4><p><strong>Technical reservations (absolutely avoid):</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>Network_Address</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;x.x.x.0&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>Broadcast_Address</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;x.x.x.255&#34;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p><strong>Conventional reservations (recommended):</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>Gateway</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;x.x.x.1&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>DNS_Primary</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;x.x.x.2&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>DNS_Secondary</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;x.x.x.3&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>Network_Equipment</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;x.x.x.4-9&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>DHCP_Pool</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;x.x.x.10-99&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>Servers</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;x.x.x.100-199&#34;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>Printers_IoT</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;x.x.x.200-230&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>Management</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;x.x.x.240-254&#34;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=practical-ip-address-design-procedure>Practical IP Address Design Procedure</h3><h4 id=step-1-requirements-analysis>Step 1: Requirements Analysis</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>Analysis_Checklist</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>Current_Scale</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>Number of sites</span><span class=p>:</span><span class=w> </span>?
</span></span><span class=line><span class=cl>    - <span class=nt>Number of departments</span><span class=p>:</span><span class=w> </span>?  
</span></span><span class=line><span class=cl>    - <span class=nt>Number of employees</span><span class=p>:</span><span class=w> </span>?
</span></span><span class=line><span class=cl>    - <span class=nt>Number of devices</span><span class=p>:</span><span class=w> </span><span class=p>?</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>Future_Growth</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>Number of sites in 5 years</span><span class=p>:</span><span class=w> </span>?
</span></span><span class=line><span class=cl>    - <span class=nt>Number of employees in 10 years</span><span class=p>:</span><span class=w> </span>?
</span></span><span class=line><span class=cl>    - <span class=nt>IoT device deployment plan</span><span class=p>:</span><span class=w> </span>?
</span></span><span class=line><span class=cl>    - <span class=nt>Cloud integration plan</span><span class=p>:</span><span class=w> </span><span class=p>?</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>Technical_Requirements</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>VPN integration necessity</span><span class=p>:</span><span class=w> </span>?
</span></span><span class=line><span class=cl>    - <span class=nt>Security requirements</span><span class=p>:</span><span class=w> </span>?
</span></span><span class=line><span class=cl>    - <span class=nt>Existing system constraints</span><span class=p>:</span><span class=w> </span><span class=p>?</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=step-2-ip-address-range-selection>Step 2: IP Address Range Selection</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>select_ip_range</span><span class=p>(</span><span class=n>total_sites</span><span class=p>,</span> <span class=n>total_subnets</span><span class=p>,</span> <span class=n>total_hosts</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>    Optimal IP address range selection based on requirements
</span></span></span><span class=line><span class=cl><span class=s2>    &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>total_hosts</span> <span class=o>&gt;</span> <span class=mi>1_000_000</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=s2>&#34;10.0.0.0/8&#34;</span>  <span class=c1># Large enterprise, multi-site</span>
</span></span><span class=line><span class=cl>    <span class=k>elif</span> <span class=n>total_hosts</span> <span class=o>&gt;</span> <span class=mi>50_000</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=s2>&#34;172.16.0.0/12&#34;</span>  <span class=c1># Medium enterprise</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=s2>&#34;192.168.0.0/16&#34;</span>  <span class=c1># Small enterprise</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl><span class=c1># Usage example</span>
</span></span><span class=line><span class=cl><span class=n>recommendation</span> <span class=o>=</span> <span class=n>select_ip_range</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>total_sites</span><span class=o>=</span><span class=mi>5</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>total_subnets</span><span class=o>=</span><span class=mi>20</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=n>total_hosts</span><span class=o>=</span><span class=mi>500</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Recommended: </span><span class=si>{</span><span class=n>recommendation</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>  <span class=c1># Recommended: 172.16.0.0/12</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=step-3-hierarchical-design-implementation>Step 3: Hierarchical Design Implementation</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>Implementation_Template</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>Large_Enterprise</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>Format</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;10.{region}.{dept}.{host}&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>Example</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;10.1.2.100 = Tokyo, Accounting Dept, Host 100&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>Medium_Enterprise</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>Format</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;172.16.{site}.{subnet}&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>Example</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;172.16.1.100 = Head Office, Server Segment&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>Small_Enterprise</span><span class=p>:</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>Format</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;192.168.{dept}.{host}&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>Example</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;192.168.1.100 = General Dept, Host 100&#34;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=migration-work-best-practices>Migration Work Best Practices</h3><h4 id=phased-migration-strategy>Phased Migration Strategy</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>Phase_Migration_Strategy</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>Phase_1</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>Duration</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;1 week&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>Scope</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;Low importance, small impact&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>Target</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&#34;Test environment&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;Some sites&#34;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>Phase_2</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>Duration</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;2 weeks&#34;</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>Scope</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;Medium importance, partial impact&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>Target</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&#34;Development environment&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;Non-critical sites&#34;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>Phase_3</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>Duration</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;1 week&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>Scope</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;High importance, company-wide impact&#34;</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>Target</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&#34;Production environment&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;Main sites&#34;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>Rollback_Plan</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>Trigger</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;30% or more malfunction&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>Time_Limit</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;Complete recovery within 4 hours&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>Backup</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;Complete configuration backup mandatory&#34;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h2 id=summary-ip-address-design-truth-learned-from-320000-and-72-hours>Summary: IP Address Design Truth Learned from $320,000 and 72 Hours</h2><h3 id=project-total-cost>Project Total Cost</h3><p><strong>Direct costs:</strong></p><ul><li>Emergency work personnel costs: $150,000</li><li>External consultant fees: $80,000</li><li>Equipment configuration change costs: $50,000</li><li>System outage losses: $40,000</li></ul><p><strong>Indirect costs:</strong></p><ul><li>All employee business downtime: $380,000</li><li>Data recovery & integrity assurance: $120,000</li><li>Customer impact & trust recovery: $200,000</li></ul><p><strong>Total cost: $1,020,000</strong></p><p>However, the value gained was even greater.</p><h3 id=most-important-lessons>Most Important Lessons</h3><h4 id=1-ip-addresses-are-not-just-numbers>1. IP Addresses Are Not &ldquo;Just Numbers&rdquo;</h4><p><strong>New understanding:</strong></p><ul><li>IP addresses reflect the design philosophy of the entire network</li><li>Proper design dramatically improves management efficiency</li><li>Improper design can destroy entire organization productivity</li></ul><h4 id=2-danger-of-blind-following-of-standards>2. Danger of Blind Following of &ldquo;Standards&rdquo;</h4><p><strong>Truth about &ldquo;everyone uses 192.168.1.0&rdquo;:</strong></p><ul><li>Standard configuration for home networks</li><li>Inappropriate for enterprise use</li><li>Completely ignores scalability considerations</li></ul><h4 id=3-absolute-value-of-hierarchical-design>3. Absolute Value of Hierarchical Design</h4><p><strong>Effects of hierarchical design:</strong></p><ul><li>Management effort: 80% reduction</li><li>Incident response: 85% faster</li><li>Security: 90% improvement</li><li>Scalability: Unlimited</li></ul><h3 id=future-outlook-ip-address-design-20>Future Outlook: IP Address Design 2.0</h3><p>Currently, we are working on the following as next-generation IP address design:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>Next_Generation_IP_Design</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>Software_Defined_Networking</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>Dynamic IP address allocation</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>Automatic segmentation by purpose</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>AI optimization</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>Zero_Trust_Integration</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>IP address + Identity integrated management</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>Risk-based access control</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>Continuous permission optimization</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>Cloud_Native_Approach</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>Multi-cloud IP address management  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>Container-compatible address design</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>Serverless environment integration</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=finally-to-avoid-making-the-same-mistakes>Finally: To Avoid Making the Same Mistakes</h3><p>Organizations reading this article don&rsquo;t need to experience the same 72 hours of hell we did.</p><p><strong>IP Address Design Check You Can Do Right Now:</strong></p><ol><li><strong>Do IP address ranges overlap across sites?</strong></li><li><strong>Can you handle the next 3 years of expansion plans?</strong></li><li><strong>Can you identify site & department just by looking at IP addresses?</strong></li><li><strong>Do you have VPN integration or cloud migration plans?</strong></li></ol><p>If you have even one &ldquo;concern,&rdquo; I strongly recommend starting IP address design review immediately.</p><p><strong>Abandon the illusion that &ldquo;192.168.1.0 is universal&rdquo; and build networks that support your company&rsquo;s future with true hierarchical design.</strong></p><p>This is the most important lesson learned from $1,020,000 and 72 hours of hell.</p><hr><p><strong>Related articles:</strong></p><ul><li><a class=link href=/tags/network-design/>Network Design Hierarchical Approach Practice Guide</a></li><li><a class=link href=/categories/infrastructure/>Enterprise-Scale IP Address Design Patterns</a></li><li><a class=link href=/tags/vpn/>VPN Integration Project Pitfalls and Solutions</a></li></ul><p><strong>Note:</strong> This article is based on actual network incident experience, but specific company names and technical details have been partially modified and anonymized.</p><div class="ad-container ad-briefs_bottom"><a href="//af.moshimo.com/af/c/click?a_id=5207614&p_id=54&pc_id=54&pl_id=1220" rel=nofollow referrerpolicy=no-referrer-when-downgrade attributionsrc><img src=//image.moshimo.com/af-img/0032/000000001220.gif width=468 height=60 style=border:none></a><img src="//i.moshimo.com/af/i/impression?a_id=5207614&p_id=54&pc_id=54&pl_id=1220" width=1 height=1 style=border:none loading=lazy></div><style>.ad-container{margin:16px 0}.ad-placeholder{background:var(--card-background);border:1px dashed var(--card-border-color);color:var(--card-text-color-secondary);border-radius:8px;padding:12px;text-align:center;font-size:.9rem}</style></section><footer class=article-footer><section class=article-tags><a href=/tags/ip-address-design/>IP Address Design</a>
<a href=/tags/network-design/>Network Design</a>
<a href=/tags/dhcp/>DHCP</a>
<a href=/tags/subnet/>Subnet</a>
<a href=/tags/vpn/>VPN</a>
<a href=/tags/design-failure/>Design Failure</a>
<a href=/tags/author-created/>Author-Created</a></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>関連するコンテンツ</h2><div class=related-content><div class="flex article-list--tile"><article><a href=/post/ip%E3%82%A2%E3%83%89%E3%83%AC%E3%82%B9%E5%9C%B0%E7%8D%84192.168.1.0%E9%87%8D%E8%A4%87%E8%A8%AD%E8%A8%88%E3%81%A7%E5%85%A8%E7%A4%BE%E3%83%8D%E3%83%83%E3%83%88%E3%83%AF%E3%83%BC%E3%82%AF%E5%A4%A7%E6%B7%B7%E4%B9%B172%E6%99%82%E9%96%93%E3%81%AE%E7%B7%8A%E6%80%A5%E5%86%8D%E8%A8%AD%E8%A8%88%E4%BF%AE%E7%BE%85%E5%A0%B4/><div class=article-details><h2 class=article-title>【IPアドレス地獄】192.168.1.0重複設計で全社ネットワーク大混乱→72時間の緊急再設計修羅場</h2></div></a></article><article><a href=/post/design-hell-vpc-peering-design-mistake-causes-3-day-company-wide-system-outage-emergency-psc-migration-battle-record/><div class=article-details><h2 class=article-title>[Design Hell] VPC Peering Design Mistake Causes 3-Day Company-wide System Outage → Emergency PSC Migration Battle Record</h2></div></a></article><article><a href=/post/%E8%A8%AD%E8%A8%88%E5%9C%B0%E7%8D%84vpc-peering%E8%A8%AD%E8%A8%88%E3%83%9F%E3%82%B9%E3%81%A7%E5%85%A8%E7%A4%BE%E3%82%B7%E3%82%B9%E3%83%86%E3%83%A03%E6%97%A5%E9%96%93%E5%81%9C%E6%AD%A2%E7%B7%8A%E6%80%A5psc%E7%A7%BB%E8%A1%8C%E3%81%AE%E4%BF%AE%E7%BE%85%E5%A0%B4%E8%A8%98%E9%8C%B2/><div class=article-details><h2 class=article-title>【設計地獄】VPC Peering設計ミスで全社システム3日間停止→緊急PSC移行の修羅場記録</h2></div></a></article><article><a href=/post/migration-hell-complete-record-of-6-month-gcp-migration-disaster-from-20-year-physical-network-to-cloud/><div class=article-details><h2 class=article-title>[Migration Hell] Complete Record of 6-Month GCP Migration Disaster: From 20-Year Physical Network to Cloud</h2></div></a></article><article><a href=/post/%E7%A7%BB%E8%A1%8C%E5%9C%B0%E7%8D%8420%E5%B9%B4%E9%81%8B%E7%94%A8%E3%81%97%E3%81%9F%E7%89%A9%E7%90%86%E3%83%8D%E3%83%83%E3%83%88%E3%83%AF%E3%83%BC%E3%82%AF%E3%82%92gcp%E3%81%AB%E7%A7%BB%E8%A1%8C%E3%81%97%E3%81%A66%E3%83%B6%E6%9C%88%E7%82%8E%E4%B8%8A%E3%81%97%E3%81%9F%E5%85%A8%E8%A8%98%E9%8C%B2/><div class=article-details><h2 class=article-title>【移行地獄】20年運用した物理ネットワークをGCPに移行して6ヶ月炎上した全記録</h2></div></a></article></div></div></aside><footer class=site-footer><section class=copyright>&copy;
2025 トミー</section><section class=powerby>技術ネタ、趣味や備忘録などを書いているブログです<br><a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> で構築されています。<br>テーマ <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.30.0>Stack</a></b> は <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> によって設計されています。</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><footer class=site-footer><div class=footer-container><div class=footer-content><div class=footer-section><h3 class=footer-title>firebirdテックトーク</h3><p class=footer-description>技術ネタ、趣味や備忘録などを書いているブログです</p><div class=footer-social><a href=https://twitter.com/firebird19245 class=social-link target=_blank title=Twitter rel=me><svg class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 4.01c-1 .49-1.98.689-3 .99-1.121-1.265-2.783-1.335-4.38-.737S11.977 6.323 12 8v1c-3.245.083-6.135-1.395-8-4 0 0-4.182 7.433 4 11-1.872 1.247-3.739 2.088-6 2 3.308 1.803 6.913 2.423 10.034 1.517 3.58-1.04 6.522-3.723 7.651-7.742a13.84 13.84.0 00.497-3.753C20.18 7.773 21.692 5.25 22 4.009z"/></svg></a></div></div><div class=footer-section><h3 class=footer-title>カテゴリー</h3><ul class=footer-links><li><a href=/categories/%E3%83%9E%E3%82%A4%E3%83%96%E3%83%AD%E3%82%B0/>マイブログ (68)</a></li><li><a href=/categories/%E6%97%85%E8%A1%8C%E8%A8%98/>旅行記 (12)</a></li><li><a href=/categories/%E6%9C%80%E6%96%B0%E8%A8%98%E4%BA%8B/>最新記事 (11)</a></li><li><a href=/categories/ai%E3%83%84%E3%83%BC%E3%83%AB/>AI・ツール (2)</a></li><li><a href=/categories/%E5%8A%B9%E7%8E%87%E5%8C%96/>効率化 (2)</a></li><li><a href=/categories/%E9%96%8B%E7%99%BA%E9%81%8B%E7%94%A8/>開発・運用 (2)</a></li><li><a href=/categories/ai-tools/>AI Tools (1)</a></li><li><a href=/categories/architecture/>Architecture (1)</a></li><li><a href=/categories/cloud/infra/>Cloud/Infra (1)</a></li><li><a href=/categories/development-operations/>Development Operations (1)</a></li><li><a href=/categories/efficiency/>Efficiency (1)</a></li><li><a href=/categories/gcp/>GCP (1)</a></li><li><a href=/categories/tech/>Tech (1)</a></li><li><a href=/categories/technical-articles/>Technical Articles (1)</a></li><li><a href=/categories/%E3%81%8A%E7%9F%A5%E3%82%89%E3%81%9B/>お知らせ (1)</a></li><li><a href=/categories/%E3%82%BB%E3%82%AD%E3%83%A5%E3%83%AA%E3%83%86%E3%82%A3/>セキュリティ (1)</a></li><li><a href=/categories/%E6%8A%80%E8%A1%93/>技術 (1)</a></li><li><a href=/categories/%E6%97%85%E8%A1%8C/>旅行 (1)</a></li></ul></div><div class=footer-section><h3 class=footer-title>人気タグ</h3><div class=footer-tags><a href=/tags/author-created/ class=tag-link>Author-Created
<span class=tag-count>53</span>
</a><a href=/tags/gcp/ class=tag-link>Gcp
<span class=tag-count>27</span>
</a><a href=/tags/ai/ class=tag-link>AI
<span class=tag-count>10</span>
</a><a href=/tags/network/ class=tag-link>Network
<span class=tag-count>9</span>
</a><a href=/tags/vpc/ class=tag-link>VPC
<span class=tag-count>8</span>
</a><a href=/tags/css/ class=tag-link>CSS
<span class=tag-count>7</span>
</a><a href=/tags/grpc/ class=tag-link>GRPC
<span class=tag-count>7</span>
</a><a href=/tags/security/ class=tag-link>Security
<span class=tag-count>7</span>
</a><a href=/tags/claude-code/ class=tag-link>Claude Code
<span class=tag-count>6</span>
</a><a href=/tags/devops/ class=tag-link>DevOps
<span class=tag-count>6</span></a></div></div><div class=footer-section><h3 class=footer-title>アーカイブ</h3><ul class=footer-links><li><a href=/archives/#2025>2025年 (98)</a></li><li><a href=/archives/#2024>2024年 (3)</a></li><li><a href=/archives/#0001>0001年 (5)</a></li></ul></div><div class=footer-section><h3 class=footer-title>このサイトについて</h3><ul class=footer-links><li><a href=/about/>サイトについて</a></li><li><a href=/privacy/>プライバシーポリシー</a></li><li><a href=/sitemap.xml>サイトマップ</a></li><li><a href=/index.xml>RSS</a></li></ul></div></div><div class=footer-bottom><div class=footer-copyright><p>&copy; 2025 firebirdテックトーク. All rights reserved.</p></div></div></div></footer><style>.site-footer{background:var(--card-background);border-top:1px solid var(--card-separator-color);margin-top:60px;padding:40px 0 20px}.footer-container{max-width:1200px;margin:0 auto;padding:0 20px}.footer-content{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:40px;margin-bottom:40px}.footer-section{display:flex;flex-direction:column}.footer-title{color:var(--card-text-color-main);font-size:1.1em;font-weight:600;margin:0 0 20px;padding-bottom:10px;border-bottom:2px solid var(--accent-color)}.footer-description{color:var(--card-text-color-secondary);line-height:1.6;margin-bottom:20px}.footer-links{list-style:none;padding:0;margin:0}.footer-links li{margin-bottom:8px}.footer-links a{color:var(--card-text-color-secondary);text-decoration:none;font-size:.9em;transition:color .2s}.footer-links a:hover{color:var(--accent-color)}.footer-social{display:flex;gap:12px;flex-wrap:wrap}.social-link{display:flex;align-items:center;justify-content:center;width:36px;height:36px;background:var(--card-separator-color);border-radius:50%;color:var(--card-text-color-secondary);text-decoration:none;transition:all .2s}.social-link:hover{background:var(--accent-color);color:#fff}.footer-tags{display:flex;flex-wrap:wrap;gap:8px}.tag-link{display:inline-flex;align-items:center;gap:4px;padding:4px 8px;background:var(--card-separator-color);border-radius:4px;color:var(--card-text-color-secondary);text-decoration:none;font-size:.8em;transition:all .2s}.tag-link:hover{background:var(--accent-color-light);color:var(--accent-color)}.tag-count{background:var(--accent-color);color:#fff;padding:1px 4px;border-radius:3px;font-size:.7em;font-weight:700}.footer-bottom{padding-top:20px;border-top:1px solid var(--card-separator-color);text-align:center}.footer-copyright{color:var(--card-text-color-tertiary);font-size:.8em}.footer-copyright p{margin:4px 0}@media(max-width:768px){.site-footer{padding:30px 0 15px;margin-top:40px}.footer-container{padding:0 15px}.footer-content{grid-template-columns:1fr;gap:30px;margin-bottom:30px}.footer-section{text-align:center}.footer-links{display:flex;flex-wrap:wrap;justify-content:center;gap:15px}.footer-tags{justify-content:center}.footer-social{justify-content:center}}</style><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>